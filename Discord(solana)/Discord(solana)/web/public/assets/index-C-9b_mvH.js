(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();function sn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function li(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),e}var Fn={},wr={},Fi;function Co(){if(Fi)return wr;Fi=1,wr.byteLength=u,wr.toByteArray=S,wr.fromByteArray=M;for(var n=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)n[s]=r[s],t[r.charCodeAt(s)]=s;t[45]=62,t[95]=63;function o(B){var F=B.length;if(F%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var L=B.indexOf("=");L===-1&&(L=F);var R=L===F?0:4-L%4;return[L,R]}function u(B){var F=o(B),L=F[0],R=F[1];return(L+R)*3/4-R}function p(B,F,L){return(F+L)*3/4-L}function S(B){var F,L=o(B),R=L[0],$=L[1],V=new e(p(B,R,$)),G=0,Q=$>0?R-4:R,X;for(X=0;X<Q;X+=4)F=t[B.charCodeAt(X)]<<18|t[B.charCodeAt(X+1)]<<12|t[B.charCodeAt(X+2)]<<6|t[B.charCodeAt(X+3)],V[G++]=F>>16&255,V[G++]=F>>8&255,V[G++]=F&255;return $===2&&(F=t[B.charCodeAt(X)]<<2|t[B.charCodeAt(X+1)]>>4,V[G++]=F&255),$===1&&(F=t[B.charCodeAt(X)]<<10|t[B.charCodeAt(X+1)]<<4|t[B.charCodeAt(X+2)]>>2,V[G++]=F>>8&255,V[G++]=F&255),V}function k(B){return n[B>>18&63]+n[B>>12&63]+n[B>>6&63]+n[B&63]}function T(B,F,L){for(var R,$=[],V=F;V<L;V+=3)R=(B[V]<<16&16711680)+(B[V+1]<<8&65280)+(B[V+2]&255),$.push(k(R));return $.join("")}function M(B){for(var F,L=B.length,R=L%3,$=[],V=16383,G=0,Q=L-R;G<Q;G+=V)$.push(T(B,G,G+V>Q?Q:G+V));return R===1?(F=B[L-1],$.push(n[F>>2]+n[F<<4&63]+"==")):R===2&&(F=(B[L-2]<<8)+B[L-1],$.push(n[F>>10]+n[F>>4&63]+n[F<<2&63]+"=")),$.join("")}return wr}var Cr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ni;function Uo(){return Ni||(Ni=1,Cr.read=function(n,t,e,r,s){var i,o,u=s*8-r-1,p=(1<<u)-1,S=p>>1,k=-7,T=e?s-1:0,M=e?-1:1,B=n[t+T];for(T+=M,i=B&(1<<-k)-1,B>>=-k,k+=u;k>0;i=i*256+n[t+T],T+=M,k-=8);for(o=i&(1<<-k)-1,i>>=-k,k+=r;k>0;o=o*256+n[t+T],T+=M,k-=8);if(i===0)i=1-S;else{if(i===p)return o?NaN:(B?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-S}return(B?-1:1)*o*Math.pow(2,i-r)},Cr.write=function(n,t,e,r,s,i){var o,u,p,S=i*8-s-1,k=(1<<S)-1,T=k>>1,M=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=r?0:i-1,F=r?1:-1,L=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=k):(o=Math.floor(Math.log(t)/Math.LN2),t*(p=Math.pow(2,-o))<1&&(o--,p*=2),o+T>=1?t+=M/p:t+=M*Math.pow(2,1-T),t*p>=2&&(o++,p/=2),o+T>=k?(u=0,o=k):o+T>=1?(u=(t*p-1)*Math.pow(2,s),o=o+T):(u=t*Math.pow(2,T-1)*Math.pow(2,s),o=0));s>=8;n[e+B]=u&255,B+=F,u/=256,s-=8);for(o=o<<s|u,S+=s;S>0;n[e+B]=o&255,B+=F,o/=256,S-=8);n[e+B-F]|=L*128}),Cr}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Oi;function hi(){return Oi||(Oi=1,function(n){const t=Co(),e=Uo(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=u,n.SlowBuffer=V,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=i(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const m=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(m,l),m.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function o(m){if(m>s)throw new RangeError('The value "'+m+'" is invalid for option "size"');const l=new Uint8Array(m);return Object.setPrototypeOf(l,u.prototype),l}function u(m,l,h){if(typeof m=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return T(m)}return p(m,l,h)}u.poolSize=8192;function p(m,l,h){if(typeof m=="string")return M(m,l);if(ArrayBuffer.isView(m))return F(m);if(m==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(ge(m,ArrayBuffer)||m&&ge(m.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ge(m,SharedArrayBuffer)||m&&ge(m.buffer,SharedArrayBuffer)))return L(m,l,h);if(typeof m=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const E=m.valueOf&&m.valueOf();if(E!=null&&E!==m)return u.from(E,l,h);const O=R(m);if(O)return O;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof m[Symbol.toPrimitive]=="function")return u.from(m[Symbol.toPrimitive]("string"),l,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}u.from=function(m,l,h){return p(m,l,h)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function S(m){if(typeof m!="number")throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function k(m,l,h){return S(m),m<=0?o(m):l!==void 0?typeof h=="string"?o(m).fill(l,h):o(m).fill(l):o(m)}u.alloc=function(m,l,h){return k(m,l,h)};function T(m){return S(m),o(m<0?0:$(m)|0)}u.allocUnsafe=function(m){return T(m)},u.allocUnsafeSlow=function(m){return T(m)};function M(m,l){if((typeof l!="string"||l==="")&&(l="utf8"),!u.isEncoding(l))throw new TypeError("Unknown encoding: "+l);const h=G(m,l)|0;let E=o(h);const O=E.write(m,l);return O!==h&&(E=E.slice(0,O)),E}function B(m){const l=m.length<0?0:$(m.length)|0,h=o(l);for(let E=0;E<l;E+=1)h[E]=m[E]&255;return h}function F(m){if(ge(m,Uint8Array)){const l=new Uint8Array(m);return L(l.buffer,l.byteOffset,l.byteLength)}return B(m)}function L(m,l,h){if(l<0||m.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<l+(h||0))throw new RangeError('"length" is outside of buffer bounds');let E;return l===void 0&&h===void 0?E=new Uint8Array(m):h===void 0?E=new Uint8Array(m,l):E=new Uint8Array(m,l,h),Object.setPrototypeOf(E,u.prototype),E}function R(m){if(u.isBuffer(m)){const l=$(m.length)|0,h=o(l);return h.length===0||m.copy(h,0,0,l),h}if(m.length!==void 0)return typeof m.length!="number"||At(m.length)?o(0):B(m);if(m.type==="Buffer"&&Array.isArray(m.data))return B(m.data)}function $(m){if(m>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return m|0}function V(m){return+m!=m&&(m=0),u.alloc(+m)}u.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==u.prototype},u.compare=function(l,h){if(ge(l,Uint8Array)&&(l=u.from(l,l.offset,l.byteLength)),ge(h,Uint8Array)&&(h=u.from(h,h.offset,h.byteLength)),!u.isBuffer(l)||!u.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===h)return 0;let E=l.length,O=h.length;for(let D=0,W=Math.min(E,O);D<W;++D)if(l[D]!==h[D]){E=l[D],O=h[D];break}return E<O?-1:O<E?1:0},u.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(l,h){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return u.alloc(0);let E;if(h===void 0)for(h=0,E=0;E<l.length;++E)h+=l[E].length;const O=u.allocUnsafe(h);let D=0;for(E=0;E<l.length;++E){let W=l[E];if(ge(W,Uint8Array))D+W.length>O.length?(u.isBuffer(W)||(W=u.from(W)),W.copy(O,D)):Uint8Array.prototype.set.call(O,W,D);else if(u.isBuffer(W))W.copy(O,D);else throw new TypeError('"list" argument must be an Array of Buffers');D+=W.length}return O};function G(m,l){if(u.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||ge(m,ArrayBuffer))return m.byteLength;if(typeof m!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);const h=m.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&h===0)return 0;let O=!1;for(;;)switch(l){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return _t(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return kt(m).length;default:if(O)return E?-1:_t(m).length;l=(""+l).toLowerCase(),O=!0}}u.byteLength=G;function Q(m,l,h){let E=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,l>>>=0,h<=l))return"";for(m||(m="utf8");;)switch(m){case"hex":return A(this,l,h);case"utf8":case"utf-8":return a(this,l,h);case"ascii":return y(this,l,h);case"latin1":case"binary":return x(this,l,h);case"base64":return w(this,l,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,l,h);default:if(E)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),E=!0}}u.prototype._isBuffer=!0;function X(m,l,h){const E=m[l];m[l]=m[h],m[h]=E}u.prototype.swap16=function(){const l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<l;h+=2)X(this,h,h+1);return this},u.prototype.swap32=function(){const l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<l;h+=4)X(this,h,h+3),X(this,h+1,h+2);return this},u.prototype.swap64=function(){const l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<l;h+=8)X(this,h,h+7),X(this,h+1,h+6),X(this,h+2,h+5),X(this,h+3,h+4);return this},u.prototype.toString=function(){const l=this.length;return l===0?"":arguments.length===0?a(this,0,l):Q.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(l){if(!u.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:u.compare(this,l)===0},u.prototype.inspect=function(){let l="";const h=n.INSPECT_MAX_BYTES;return l=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(l+=" ... "),"<Buffer "+l+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(l,h,E,O,D){if(ge(l,Uint8Array)&&(l=u.from(l,l.offset,l.byteLength)),!u.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(h===void 0&&(h=0),E===void 0&&(E=l?l.length:0),O===void 0&&(O=0),D===void 0&&(D=this.length),h<0||E>l.length||O<0||D>this.length)throw new RangeError("out of range index");if(O>=D&&h>=E)return 0;if(O>=D)return-1;if(h>=E)return 1;if(h>>>=0,E>>>=0,O>>>=0,D>>>=0,this===l)return 0;let W=D-O,pt=E-h;const ht=Math.min(W,pt),lt=this.slice(O,D),Bt=l.slice(h,E);for(let ft=0;ft<ht;++ft)if(lt[ft]!==Bt[ft]){W=lt[ft],pt=Bt[ft];break}return W<pt?-1:pt<W?1:0};function Y(m,l,h,E,O){if(m.length===0)return-1;if(typeof h=="string"?(E=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,At(h)&&(h=O?0:m.length-1),h<0&&(h=m.length+h),h>=m.length){if(O)return-1;h=m.length-1}else if(h<0)if(O)h=0;else return-1;if(typeof l=="string"&&(l=u.from(l,E)),u.isBuffer(l))return l.length===0?-1:at(m,l,h,E,O);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?O?Uint8Array.prototype.indexOf.call(m,l,h):Uint8Array.prototype.lastIndexOf.call(m,l,h):at(m,[l],h,E,O);throw new TypeError("val must be string, number or Buffer")}function at(m,l,h,E,O){let D=1,W=m.length,pt=l.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(m.length<2||l.length<2)return-1;D=2,W/=2,pt/=2,h/=2}function ht(Bt,ft){return D===1?Bt[ft]:Bt.readUInt16BE(ft*D)}let lt;if(O){let Bt=-1;for(lt=h;lt<W;lt++)if(ht(m,lt)===ht(l,Bt===-1?0:lt-Bt)){if(Bt===-1&&(Bt=lt),lt-Bt+1===pt)return Bt*D}else Bt!==-1&&(lt-=lt-Bt),Bt=-1}else for(h+pt>W&&(h=W-pt),lt=h;lt>=0;lt--){let Bt=!0;for(let ft=0;ft<pt;ft++)if(ht(m,lt+ft)!==ht(l,ft)){Bt=!1;break}if(Bt)return lt}return-1}u.prototype.includes=function(l,h,E){return this.indexOf(l,h,E)!==-1},u.prototype.indexOf=function(l,h,E){return Y(this,l,h,E,!0)},u.prototype.lastIndexOf=function(l,h,E){return Y(this,l,h,E,!1)};function ot(m,l,h,E){h=Number(h)||0;const O=m.length-h;E?(E=Number(E),E>O&&(E=O)):E=O;const D=l.length;E>D/2&&(E=D/2);let W;for(W=0;W<E;++W){const pt=parseInt(l.substr(W*2,2),16);if(At(pt))return W;m[h+W]=pt}return W}function K(m,l,h,E){return Et(_t(l,m.length-h),m,h,E)}function I(m,l,h,E){return Et(Tt(l),m,h,E)}function C(m,l,h,E){return Et(kt(l),m,h,E)}function q(m,l,h,E){return Et(Lr(l,m.length-h),m,h,E)}u.prototype.write=function(l,h,E,O){if(h===void 0)O="utf8",E=this.length,h=0;else if(E===void 0&&typeof h=="string")O=h,E=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(E)?(E=E>>>0,O===void 0&&(O="utf8")):(O=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const D=this.length-h;if((E===void 0||E>D)&&(E=D),l.length>0&&(E<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");let W=!1;for(;;)switch(O){case"hex":return ot(this,l,h,E);case"utf8":case"utf-8":return K(this,l,h,E);case"ascii":case"latin1":case"binary":return I(this,l,h,E);case"base64":return C(this,l,h,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,l,h,E);default:if(W)throw new TypeError("Unknown encoding: "+O);O=(""+O).toLowerCase(),W=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function w(m,l,h){return l===0&&h===m.length?t.fromByteArray(m):t.fromByteArray(m.slice(l,h))}function a(m,l,h){h=Math.min(m.length,h);const E=[];let O=l;for(;O<h;){const D=m[O];let W=null,pt=D>239?4:D>223?3:D>191?2:1;if(O+pt<=h){let ht,lt,Bt,ft;switch(pt){case 1:D<128&&(W=D);break;case 2:ht=m[O+1],(ht&192)===128&&(ft=(D&31)<<6|ht&63,ft>127&&(W=ft));break;case 3:ht=m[O+1],lt=m[O+2],(ht&192)===128&&(lt&192)===128&&(ft=(D&15)<<12|(ht&63)<<6|lt&63,ft>2047&&(ft<55296||ft>57343)&&(W=ft));break;case 4:ht=m[O+1],lt=m[O+2],Bt=m[O+3],(ht&192)===128&&(lt&192)===128&&(Bt&192)===128&&(ft=(D&15)<<18|(ht&63)<<12|(lt&63)<<6|Bt&63,ft>65535&&ft<1114112&&(W=ft))}}W===null?(W=65533,pt=1):W>65535&&(W-=65536,E.push(W>>>10&1023|55296),W=56320|W&1023),E.push(W),O+=pt}return g(E)}const d=4096;function g(m){const l=m.length;if(l<=d)return String.fromCharCode.apply(String,m);let h="",E=0;for(;E<l;)h+=String.fromCharCode.apply(String,m.slice(E,E+=d));return h}function y(m,l,h){let E="";h=Math.min(m.length,h);for(let O=l;O<h;++O)E+=String.fromCharCode(m[O]&127);return E}function x(m,l,h){let E="";h=Math.min(m.length,h);for(let O=l;O<h;++O)E+=String.fromCharCode(m[O]);return E}function A(m,l,h){const E=m.length;(!l||l<0)&&(l=0),(!h||h<0||h>E)&&(h=E);let O="";for(let D=l;D<h;++D)O+=Lt[m[D]];return O}function N(m,l,h){const E=m.slice(l,h);let O="";for(let D=0;D<E.length-1;D+=2)O+=String.fromCharCode(E[D]+E[D+1]*256);return O}u.prototype.slice=function(l,h){const E=this.length;l=~~l,h=h===void 0?E:~~h,l<0?(l+=E,l<0&&(l=0)):l>E&&(l=E),h<0?(h+=E,h<0&&(h=0)):h>E&&(h=E),h<l&&(h=l);const O=this.subarray(l,h);return Object.setPrototypeOf(O,u.prototype),O};function v(m,l,h){if(m%1!==0||m<0)throw new RangeError("offset is not uint");if(m+l>h)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(l,h,E){l=l>>>0,h=h>>>0,E||v(l,h,this.length);let O=this[l],D=1,W=0;for(;++W<h&&(D*=256);)O+=this[l+W]*D;return O},u.prototype.readUintBE=u.prototype.readUIntBE=function(l,h,E){l=l>>>0,h=h>>>0,E||v(l,h,this.length);let O=this[l+--h],D=1;for(;h>0&&(D*=256);)O+=this[l+--h]*D;return O},u.prototype.readUint8=u.prototype.readUInt8=function(l,h){return l=l>>>0,h||v(l,1,this.length),this[l]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(l,h){return l=l>>>0,h||v(l,2,this.length),this[l]|this[l+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(l,h){return l=l>>>0,h||v(l,2,this.length),this[l]<<8|this[l+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(l,h){return l=l>>>0,h||v(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(l,h){return l=l>>>0,h||v(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},u.prototype.readBigUInt64LE=Se(function(l){l=l>>>0,he(l,"offset");const h=this[l],E=this[l+7];(h===void 0||E===void 0)&&bt(l,this.length-8);const O=h+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24,D=this[++l]+this[++l]*2**8+this[++l]*2**16+E*2**24;return BigInt(O)+(BigInt(D)<<BigInt(32))}),u.prototype.readBigUInt64BE=Se(function(l){l=l>>>0,he(l,"offset");const h=this[l],E=this[l+7];(h===void 0||E===void 0)&&bt(l,this.length-8);const O=h*2**24+this[++l]*2**16+this[++l]*2**8+this[++l],D=this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+E;return(BigInt(O)<<BigInt(32))+BigInt(D)}),u.prototype.readIntLE=function(l,h,E){l=l>>>0,h=h>>>0,E||v(l,h,this.length);let O=this[l],D=1,W=0;for(;++W<h&&(D*=256);)O+=this[l+W]*D;return D*=128,O>=D&&(O-=Math.pow(2,8*h)),O},u.prototype.readIntBE=function(l,h,E){l=l>>>0,h=h>>>0,E||v(l,h,this.length);let O=h,D=1,W=this[l+--O];for(;O>0&&(D*=256);)W+=this[l+--O]*D;return D*=128,W>=D&&(W-=Math.pow(2,8*h)),W},u.prototype.readInt8=function(l,h){return l=l>>>0,h||v(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},u.prototype.readInt16LE=function(l,h){l=l>>>0,h||v(l,2,this.length);const E=this[l]|this[l+1]<<8;return E&32768?E|4294901760:E},u.prototype.readInt16BE=function(l,h){l=l>>>0,h||v(l,2,this.length);const E=this[l+1]|this[l]<<8;return E&32768?E|4294901760:E},u.prototype.readInt32LE=function(l,h){return l=l>>>0,h||v(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},u.prototype.readInt32BE=function(l,h){return l=l>>>0,h||v(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},u.prototype.readBigInt64LE=Se(function(l){l=l>>>0,he(l,"offset");const h=this[l],E=this[l+7];(h===void 0||E===void 0)&&bt(l,this.length-8);const O=this[l+4]+this[l+5]*2**8+this[l+6]*2**16+(E<<24);return(BigInt(O)<<BigInt(32))+BigInt(h+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24)}),u.prototype.readBigInt64BE=Se(function(l){l=l>>>0,he(l,"offset");const h=this[l],E=this[l+7];(h===void 0||E===void 0)&&bt(l,this.length-8);const O=(h<<24)+this[++l]*2**16+this[++l]*2**8+this[++l];return(BigInt(O)<<BigInt(32))+BigInt(this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+E)}),u.prototype.readFloatLE=function(l,h){return l=l>>>0,h||v(l,4,this.length),e.read(this,l,!0,23,4)},u.prototype.readFloatBE=function(l,h){return l=l>>>0,h||v(l,4,this.length),e.read(this,l,!1,23,4)},u.prototype.readDoubleLE=function(l,h){return l=l>>>0,h||v(l,8,this.length),e.read(this,l,!0,52,8)},u.prototype.readDoubleBE=function(l,h){return l=l>>>0,h||v(l,8,this.length),e.read(this,l,!1,52,8)};function c(m,l,h,E,O,D){if(!u.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>O||l<D)throw new RangeError('"value" argument is out of bounds');if(h+E>m.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(l,h,E,O){if(l=+l,h=h>>>0,E=E>>>0,!O){const pt=Math.pow(2,8*E)-1;c(this,l,h,E,pt,0)}let D=1,W=0;for(this[h]=l&255;++W<E&&(D*=256);)this[h+W]=l/D&255;return h+E},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(l,h,E,O){if(l=+l,h=h>>>0,E=E>>>0,!O){const pt=Math.pow(2,8*E)-1;c(this,l,h,E,pt,0)}let D=E-1,W=1;for(this[h+D]=l&255;--D>=0&&(W*=256);)this[h+D]=l/W&255;return h+E},u.prototype.writeUint8=u.prototype.writeUInt8=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,1,255,0),this[h]=l&255,h+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,2,65535,0),this[h]=l&255,this[h+1]=l>>>8,h+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,2,65535,0),this[h]=l>>>8,this[h+1]=l&255,h+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,4,4294967295,0),this[h+3]=l>>>24,this[h+2]=l>>>16,this[h+1]=l>>>8,this[h]=l&255,h+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,4,4294967295,0),this[h]=l>>>24,this[h+1]=l>>>16,this[h+2]=l>>>8,this[h+3]=l&255,h+4};function f(m,l,h,E,O){wt(l,E,O,m,h,7);let D=Number(l&BigInt(4294967295));m[h++]=D,D=D>>8,m[h++]=D,D=D>>8,m[h++]=D,D=D>>8,m[h++]=D;let W=Number(l>>BigInt(32)&BigInt(4294967295));return m[h++]=W,W=W>>8,m[h++]=W,W=W>>8,m[h++]=W,W=W>>8,m[h++]=W,h}function b(m,l,h,E,O){wt(l,E,O,m,h,7);let D=Number(l&BigInt(4294967295));m[h+7]=D,D=D>>8,m[h+6]=D,D=D>>8,m[h+5]=D,D=D>>8,m[h+4]=D;let W=Number(l>>BigInt(32)&BigInt(4294967295));return m[h+3]=W,W=W>>8,m[h+2]=W,W=W>>8,m[h+1]=W,W=W>>8,m[h]=W,h+8}u.prototype.writeBigUInt64LE=Se(function(l,h=0){return f(this,l,h,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Se(function(l,h=0){return b(this,l,h,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(l,h,E,O){if(l=+l,h=h>>>0,!O){const ht=Math.pow(2,8*E-1);c(this,l,h,E,ht-1,-ht)}let D=0,W=1,pt=0;for(this[h]=l&255;++D<E&&(W*=256);)l<0&&pt===0&&this[h+D-1]!==0&&(pt=1),this[h+D]=(l/W>>0)-pt&255;return h+E},u.prototype.writeIntBE=function(l,h,E,O){if(l=+l,h=h>>>0,!O){const ht=Math.pow(2,8*E-1);c(this,l,h,E,ht-1,-ht)}let D=E-1,W=1,pt=0;for(this[h+D]=l&255;--D>=0&&(W*=256);)l<0&&pt===0&&this[h+D+1]!==0&&(pt=1),this[h+D]=(l/W>>0)-pt&255;return h+E},u.prototype.writeInt8=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,1,127,-128),l<0&&(l=255+l+1),this[h]=l&255,h+1},u.prototype.writeInt16LE=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,2,32767,-32768),this[h]=l&255,this[h+1]=l>>>8,h+2},u.prototype.writeInt16BE=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,2,32767,-32768),this[h]=l>>>8,this[h+1]=l&255,h+2},u.prototype.writeInt32LE=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,4,2147483647,-2147483648),this[h]=l&255,this[h+1]=l>>>8,this[h+2]=l>>>16,this[h+3]=l>>>24,h+4},u.prototype.writeInt32BE=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[h]=l>>>24,this[h+1]=l>>>16,this[h+2]=l>>>8,this[h+3]=l&255,h+4},u.prototype.writeBigInt64LE=Se(function(l,h=0){return f(this,l,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Se(function(l,h=0){return b(this,l,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _(m,l,h,E,O,D){if(h+E>m.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function P(m,l,h,E,O){return l=+l,h=h>>>0,O||_(m,l,h,4),e.write(m,l,h,E,23,4),h+4}u.prototype.writeFloatLE=function(l,h,E){return P(this,l,h,!0,E)},u.prototype.writeFloatBE=function(l,h,E){return P(this,l,h,!1,E)};function j(m,l,h,E,O){return l=+l,h=h>>>0,O||_(m,l,h,8),e.write(m,l,h,E,52,8),h+8}u.prototype.writeDoubleLE=function(l,h,E){return j(this,l,h,!0,E)},u.prototype.writeDoubleBE=function(l,h,E){return j(this,l,h,!1,E)},u.prototype.copy=function(l,h,E,O){if(!u.isBuffer(l))throw new TypeError("argument should be a Buffer");if(E||(E=0),!O&&O!==0&&(O=this.length),h>=l.length&&(h=l.length),h||(h=0),O>0&&O<E&&(O=E),O===E||l.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length),l.length-h<O-E&&(O=l.length-h+E);const D=O-E;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,E,O):Uint8Array.prototype.set.call(l,this.subarray(E,O),h),D},u.prototype.fill=function(l,h,E,O){if(typeof l=="string"){if(typeof h=="string"?(O=h,h=0,E=this.length):typeof E=="string"&&(O=E,E=this.length),O!==void 0&&typeof O!="string")throw new TypeError("encoding must be a string");if(typeof O=="string"&&!u.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(l.length===1){const W=l.charCodeAt(0);(O==="utf8"&&W<128||O==="latin1")&&(l=W)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(h<0||this.length<h||this.length<E)throw new RangeError("Out of range index");if(E<=h)return this;h=h>>>0,E=E===void 0?this.length:E>>>0,l||(l=0);let D;if(typeof l=="number")for(D=h;D<E;++D)this[D]=l;else{const W=u.isBuffer(l)?l:u.from(l,O),pt=W.length;if(pt===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(D=0;D<E-h;++D)this[D+h]=W[D%pt]}return this};const et={};function st(m,l,h){et[m]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:l.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${m}]`,this.stack,delete this.name}get code(){return m}set code(O){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:O,writable:!0})}toString(){return`${this.name} [${m}]: ${this.message}`}}}st("ERR_BUFFER_OUT_OF_BOUNDS",function(m){return m?`${m} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),st("ERR_INVALID_ARG_TYPE",function(m,l){return`The "${m}" argument must be of type number. Received type ${typeof l}`},TypeError),st("ERR_OUT_OF_RANGE",function(m,l,h){let E=`The value of "${m}" is out of range.`,O=h;return Number.isInteger(h)&&Math.abs(h)>2**32?O=Rt(String(h)):typeof h=="bigint"&&(O=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(O=Rt(O)),O+="n"),E+=` It must be ${l}. Received ${O}`,E},RangeError);function Rt(m){let l="",h=m.length;const E=m[0]==="-"?1:0;for(;h>=E+4;h-=3)l=`_${m.slice(h-3,h)}${l}`;return`${m.slice(0,h)}${l}`}function yt(m,l,h){he(l,"offset"),(m[l]===void 0||m[l+h]===void 0)&&bt(l,m.length-(h+1))}function wt(m,l,h,E,O,D){if(m>h||m<l){const W=typeof l=="bigint"?"n":"";let pt;throw l===0||l===BigInt(0)?pt=`>= 0${W} and < 2${W} ** ${(D+1)*8}${W}`:pt=`>= -(2${W} ** ${(D+1)*8-1}${W}) and < 2 ** ${(D+1)*8-1}${W}`,new et.ERR_OUT_OF_RANGE("value",pt,m)}yt(E,O,D)}function he(m,l){if(typeof m!="number")throw new et.ERR_INVALID_ARG_TYPE(l,"number",m)}function bt(m,l,h){throw Math.floor(m)!==m?(he(m,h),new et.ERR_OUT_OF_RANGE("offset","an integer",m)):l<0?new et.ERR_BUFFER_OUT_OF_BOUNDS:new et.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${l}`,m)}const St=/[^+/0-9A-Za-z-_]/g;function Tr(m){if(m=m.split("=")[0],m=m.trim().replace(St,""),m.length<2)return"";for(;m.length%4!==0;)m=m+"=";return m}function _t(m,l){l=l||1/0;let h;const E=m.length;let O=null;const D=[];for(let W=0;W<E;++W){if(h=m.charCodeAt(W),h>55295&&h<57344){if(!O){if(h>56319){(l-=3)>-1&&D.push(239,191,189);continue}else if(W+1===E){(l-=3)>-1&&D.push(239,191,189);continue}O=h;continue}if(h<56320){(l-=3)>-1&&D.push(239,191,189),O=h;continue}h=(O-55296<<10|h-56320)+65536}else O&&(l-=3)>-1&&D.push(239,191,189);if(O=null,h<128){if((l-=1)<0)break;D.push(h)}else if(h<2048){if((l-=2)<0)break;D.push(h>>6|192,h&63|128)}else if(h<65536){if((l-=3)<0)break;D.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((l-=4)<0)break;D.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return D}function Tt(m){const l=[];for(let h=0;h<m.length;++h)l.push(m.charCodeAt(h)&255);return l}function Lr(m,l){let h,E,O;const D=[];for(let W=0;W<m.length&&!((l-=2)<0);++W)h=m.charCodeAt(W),E=h>>8,O=h%256,D.push(O),D.push(E);return D}function kt(m){return t.toByteArray(Tr(m))}function Et(m,l,h,E){let O;for(O=0;O<E&&!(O+h>=l.length||O>=m.length);++O)l[O+h]=m[O];return O}function ge(m,l){return m instanceof l||m!=null&&m.constructor!=null&&m.constructor.name!=null&&m.constructor.name===l.name}function At(m){return m!==m}const Lt=function(){const m="0123456789abcdef",l=new Array(256);for(let h=0;h<16;++h){const E=h*16;for(let O=0;O<16;++O)l[E+O]=m[h]+m[O]}return l}();function Se(m){return typeof BigInt>"u"?Ct:m}function Ct(){throw new Error("BigInt not supported")}}(Fn)),Fn}var dt=hi();const er=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Wr(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function si(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function me(n,...t){if(!Wr(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function Bs(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");si(n.outputLen),si(n.blockLen)}function jr(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Fo(n,t){me(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function hr(...n){for(let t=0;t<n.length;t++)n[t].fill(0)}function Nn(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function _e(n,t){return n<<32-t|n>>>t}const _s=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",No=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Ze(n){if(me(n),_s)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=No[n[e]];return t}const Re={_0:48,_9:57,A:65,F:70,a:97,f:102};function Pi(n){if(n>=Re._0&&n<=Re._9)return n-Re._0;if(n>=Re.A&&n<=Re.F)return n-(Re.A-10);if(n>=Re.a&&n<=Re.f)return n-(Re.a-10)}function Gr(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(_s)return Uint8Array.fromHex(n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=Pi(n.charCodeAt(i)),u=Pi(n.charCodeAt(i+1));if(o===void 0||u===void 0){const p=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+i)}r[s]=o*16+u}return r}function Oo(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function di(n){return typeof n=="string"&&(n=Oo(n)),me(n),n}function Fe(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];me(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}class As{}function ks(n){const t=r=>n().update(di(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function Is(n=32){if(er&&typeof er.getRandomValues=="function")return er.getRandomValues(new Uint8Array(n));if(er&&typeof er.randomBytes=="function")return Uint8Array.from(er.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function Po(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),u=Number(e&i),p=r?4:0,S=r?0:4;n.setUint32(t+p,o,r),n.setUint32(t+S,u,r)}function qo(n,t,e){return n&t^~n&e}function Do(n,t,e){return n&t^n&e^t&e}class Ms extends As{constructor(t,e,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Nn(this.buffer)}update(t){jr(this),t=di(t),me(t);const{view:e,buffer:r,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const u=Math.min(s-this.pos,i-o);if(u===s){const p=Nn(t);for(;s<=i-o;o+=s)this.process(p,o);continue}r.set(t.subarray(o,o+u),this.pos),this.pos+=u,o+=u,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){jr(this),Fo(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,hr(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let T=o;T<s;T++)e[T]=0;Po(r,s-8,BigInt(this.length*8),i),this.process(r,0);const u=Nn(t),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const S=p/4,k=this.get();if(S>k.length)throw new Error("_sha2: outputLen bigger than state");for(let T=0;T<S;T++)u.setUint32(4*T,k[T],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:o,pos:u}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=u,s%e&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const Oe=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ae=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Ur=BigInt(2**32-1),qi=BigInt(32);function zo(n,t=!1){return t?{h:Number(n&Ur),l:Number(n>>qi&Ur)}:{h:Number(n>>qi&Ur)|0,l:Number(n&Ur)|0}}function Ho(n,t=!1){const e=n.length;let r=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:o,l:u}=zo(n[i],t);[r[i],s[i]]=[o,u]}return[r,s]}const Di=(n,t,e)=>n>>>e,zi=(n,t,e)=>n<<32-e|t>>>e,rr=(n,t,e)=>n>>>e|t<<32-e,nr=(n,t,e)=>n<<32-e|t>>>e,Fr=(n,t,e)=>n<<64-e|t>>>e-32,Nr=(n,t,e)=>n>>>e-32|t<<64-e;function Te(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const $o=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),Ko=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,Wo=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),jo=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,Go=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),Vo=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,Zo=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pe=new Uint32Array(64);class Yo extends Ms{constructor(t=32){super(64,t,8,!1),this.A=Oe[0]|0,this.B=Oe[1]|0,this.C=Oe[2]|0,this.D=Oe[3]|0,this.E=Oe[4]|0,this.F=Oe[5]|0,this.G=Oe[6]|0,this.H=Oe[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:o,G:u,H:p}=this;return[t,e,r,s,i,o,u,p]}set(t,e,r,s,i,o,u,p){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=u|0,this.H=p|0}process(t,e){for(let T=0;T<16;T++,e+=4)Pe[T]=t.getUint32(e,!1);for(let T=16;T<64;T++){const M=Pe[T-15],B=Pe[T-2],F=_e(M,7)^_e(M,18)^M>>>3,L=_e(B,17)^_e(B,19)^B>>>10;Pe[T]=L+Pe[T-7]+F+Pe[T-16]|0}let{A:r,B:s,C:i,D:o,E:u,F:p,G:S,H:k}=this;for(let T=0;T<64;T++){const M=_e(u,6)^_e(u,11)^_e(u,25),B=k+M+qo(u,p,S)+Zo[T]+Pe[T]|0,L=(_e(r,2)^_e(r,13)^_e(r,22))+Do(r,s,i)|0;k=S,S=p,p=u,u=o+B|0,o=i,i=s,s=r,r=B+L|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,u=u+this.E|0,p=p+this.F|0,S=S+this.G|0,k=k+this.H|0,this.set(r,s,i,o,u,p,S,k)}roundClean(){hr(Pe)}destroy(){this.set(0,0,0,0,0,0,0,0),hr(this.buffer)}}const Rs=Ho(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Xo=Rs[0],Jo=Rs[1],qe=new Uint32Array(80),De=new Uint32Array(80);class Qo extends Ms{constructor(t=64){super(128,t,16,!1),this.Ah=ae[0]|0,this.Al=ae[1]|0,this.Bh=ae[2]|0,this.Bl=ae[3]|0,this.Ch=ae[4]|0,this.Cl=ae[5]|0,this.Dh=ae[6]|0,this.Dl=ae[7]|0,this.Eh=ae[8]|0,this.El=ae[9]|0,this.Fh=ae[10]|0,this.Fl=ae[11]|0,this.Gh=ae[12]|0,this.Gl=ae[13]|0,this.Hh=ae[14]|0,this.Hl=ae[15]|0}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:o,Dh:u,Dl:p,Eh:S,El:k,Fh:T,Fl:M,Gh:B,Gl:F,Hh:L,Hl:R}=this;return[t,e,r,s,i,o,u,p,S,k,T,M,B,F,L,R]}set(t,e,r,s,i,o,u,p,S,k,T,M,B,F,L,R){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=u|0,this.Dl=p|0,this.Eh=S|0,this.El=k|0,this.Fh=T|0,this.Fl=M|0,this.Gh=B|0,this.Gl=F|0,this.Hh=L|0,this.Hl=R|0}process(t,e){for(let G=0;G<16;G++,e+=4)qe[G]=t.getUint32(e),De[G]=t.getUint32(e+=4);for(let G=16;G<80;G++){const Q=qe[G-15]|0,X=De[G-15]|0,Y=rr(Q,X,1)^rr(Q,X,8)^Di(Q,X,7),at=nr(Q,X,1)^nr(Q,X,8)^zi(Q,X,7),ot=qe[G-2]|0,K=De[G-2]|0,I=rr(ot,K,19)^Fr(ot,K,61)^Di(ot,K,6),C=nr(ot,K,19)^Nr(ot,K,61)^zi(ot,K,6),q=Wo(at,C,De[G-7],De[G-16]),w=jo(q,Y,I,qe[G-7],qe[G-16]);qe[G]=w|0,De[G]=q|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:u,Cl:p,Dh:S,Dl:k,Eh:T,El:M,Fh:B,Fl:F,Gh:L,Gl:R,Hh:$,Hl:V}=this;for(let G=0;G<80;G++){const Q=rr(T,M,14)^rr(T,M,18)^Fr(T,M,41),X=nr(T,M,14)^nr(T,M,18)^Nr(T,M,41),Y=T&B^~T&L,at=M&F^~M&R,ot=Go(V,X,at,Jo[G],De[G]),K=Vo(ot,$,Q,Y,Xo[G],qe[G]),I=ot|0,C=rr(r,s,28)^Fr(r,s,34)^Fr(r,s,39),q=nr(r,s,28)^Nr(r,s,34)^Nr(r,s,39),w=r&i^r&u^i&u,a=s&o^s&p^o&p;$=L|0,V=R|0,L=B|0,R=F|0,B=T|0,F=M|0,{h:T,l:M}=Te(S|0,k|0,K|0,I|0),S=u|0,k=p|0,u=i|0,p=o|0,i=r|0,o=s|0;const d=$o(I,q,a);r=Ko(d,K,C,w),s=d|0}({h:r,l:s}=Te(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Te(this.Bh|0,this.Bl|0,i|0,o|0),{h:u,l:p}=Te(this.Ch|0,this.Cl|0,u|0,p|0),{h:S,l:k}=Te(this.Dh|0,this.Dl|0,S|0,k|0),{h:T,l:M}=Te(this.Eh|0,this.El|0,T|0,M|0),{h:B,l:F}=Te(this.Fh|0,this.Fl|0,B|0,F|0),{h:L,l:R}=Te(this.Gh|0,this.Gl|0,L|0,R|0),{h:$,l:V}=Te(this.Hh|0,this.Hl|0,$|0,V|0),this.set(r,s,i,o,u,p,S,k,T,M,B,F,L,R,$,V)}roundClean(){hr(qe,De)}destroy(){hr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ts=ks(()=>new Yo),ta=ks(()=>new Qo);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pi=BigInt(0),oi=BigInt(1);function Ye(n,t){if(typeof t!="boolean")throw new Error(n+" boolean expected, got "+t)}function Or(n){const t=n.toString(16);return t.length&1?"0"+t:t}function Ls(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?pi:BigInt("0x"+n)}function on(n){return Ls(Ze(n))}function Sr(n){return me(n),Ls(Ze(Uint8Array.from(n).reverse()))}function gi(n,t){return Gr(n.toString(16).padStart(t*2,"0"))}function an(n,t){return gi(n,t).reverse()}function Ft(n,t,e){let r;if(typeof t=="string")try{r=Gr(t)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(Wr(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(n+" of length "+e+" expected, got "+s);return r}const On=n=>typeof n=="bigint"&&pi<=n;function ea(n,t,e){return On(n)&&On(t)&&On(e)&&t<=n&&n<e}function ar(n,t,e,r){if(!ea(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function Cs(n){let t;for(t=0;n>pi;n>>=oi,t+=1);return t}const _r=n=>(oi<<BigInt(n))-oi;function ra(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const r=B=>new Uint8Array(B),s=B=>Uint8Array.of(B);let i=r(n),o=r(n),u=0;const p=()=>{i.fill(1),o.fill(0),u=0},S=(...B)=>e(o,i,...B),k=(B=r(0))=>{o=S(s(0),B),i=S(),B.length!==0&&(o=S(s(1),B),i=S())},T=()=>{if(u++>=1e3)throw new Error("drbg: tried 1000 values");let B=0;const F=[];for(;B<t;){i=S();const L=i.slice();F.push(L),B+=i.length}return Fe(...F)};return(B,F)=>{p(),k(B);let L;for(;!(L=F(T()));)k();return p(),L}}function Ar(n,t,e={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(s,i,o){const u=n[s];if(o&&u===void 0)return;const p=typeof u;if(p!==i||u===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${p}`)}Object.entries(t).forEach(([s,i])=>r(s,i,!1)),Object.entries(e).forEach(([s,i])=>r(s,i,!0))}function Vr(n){const t=new WeakMap;return(e,...r)=>{const s=t.get(e);if(s!==void 0)return s;const i=n(e,...r);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pe=BigInt(0),oe=BigInt(1),je=BigInt(2),Us=BigInt(3),Fs=BigInt(4),Ns=BigInt(5),na=BigInt(7),Os=BigInt(8),ia=BigInt(9),Ps=BigInt(16);function ee(n,t){const e=n%t;return e>=pe?e:t+e}function Ut(n,t,e){let r=n;for(;t-- >pe;)r*=r,r%=e;return r}function Hi(n,t){if(n===pe)throw new Error("invert: expected non-zero number");if(t<=pe)throw new Error("invert: expected positive modulus, got "+t);let e=ee(n,t),r=t,s=pe,i=oe;for(;e!==pe;){const u=r/e,p=r%e,S=s-i*u;r=e,e=p,s=i,i=S}if(r!==oe)throw new Error("invert: does not exist");return ee(s,t)}function mi(n,t,e){if(!n.eql(n.sqr(t),e))throw new Error("Cannot find square root")}function qs(n,t){const e=(n.ORDER+oe)/Fs,r=n.pow(t,e);return mi(n,r,t),r}function sa(n,t){const e=(n.ORDER-Ns)/Os,r=n.mul(t,je),s=n.pow(r,e),i=n.mul(t,s),o=n.mul(n.mul(i,je),s),u=n.mul(i,n.sub(o,n.ONE));return mi(n,u,t),u}function oa(n){const t=Xe(n),e=Ds(n),r=e(t,t.neg(t.ONE)),s=e(t,r),i=e(t,t.neg(r)),o=(n+na)/Ps;return(u,p)=>{let S=u.pow(p,o),k=u.mul(S,r);const T=u.mul(S,s),M=u.mul(S,i),B=u.eql(u.sqr(k),p),F=u.eql(u.sqr(T),p);S=u.cmov(S,k,B),k=u.cmov(M,T,F);const L=u.eql(u.sqr(k),p),R=u.cmov(S,k,L);return mi(u,R,p),R}}function Ds(n){if(n<Us)throw new Error("sqrt is not defined for small field");let t=n-oe,e=0;for(;t%je===pe;)t/=je,e++;let r=je;const s=Xe(n);for(;$i(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return qs;let i=s.pow(r,t);const o=(t+oe)/je;return function(p,S){if(p.is0(S))return S;if($i(p,S)!==1)throw new Error("Cannot find square root");let k=e,T=p.mul(p.ONE,i),M=p.pow(S,t),B=p.pow(S,o);for(;!p.eql(M,p.ONE);){if(p.is0(M))return p.ZERO;let F=1,L=p.sqr(M);for(;!p.eql(L,p.ONE);)if(F++,L=p.sqr(L),F===k)throw new Error("Cannot find square root");const R=oe<<BigInt(k-F-1),$=p.pow(T,R);k=F,T=p.sqr($),M=p.mul(M,T),B=p.mul(B,$)}return B}}function aa(n){return n%Fs===Us?qs:n%Os===Ns?sa:n%Ps===ia?oa(n):Ds(n)}const ca=(n,t)=>(ee(n,t)&oe)===oe,ua=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fa(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=ua.reduce((r,s)=>(r[s]="function",r),t);return Ar(n,e),n}function la(n,t,e){if(e<pe)throw new Error("invalid exponent, negatives unsupported");if(e===pe)return n.ONE;if(e===oe)return t;let r=n.ONE,s=t;for(;e>pe;)e&oe&&(r=n.mul(r,s)),s=n.sqr(s),e>>=oe;return r}function zs(n,t,e=!1){const r=new Array(t.length).fill(e?n.ZERO:void 0),s=t.reduce((o,u,p)=>n.is0(u)?o:(r[p]=o,n.mul(o,u)),n.ONE),i=n.inv(s);return t.reduceRight((o,u,p)=>n.is0(u)?o:(r[p]=n.mul(o,r[p]),n.mul(o,u)),i),r}function $i(n,t){const e=(n.ORDER-oe)/je,r=n.pow(t,e),s=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function ha(n,t){t!==void 0&&si(t);const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function Xe(n,t,e=!1,r={}){if(n<=pe)throw new Error("invalid field: expected ORDER > 0, got "+n);let s,i,o=!1,u;if(typeof t=="object"&&t!=null){if(r.sqrt||e)throw new Error("cannot specify opts in two arguments");const M=t;M.BITS&&(s=M.BITS),M.sqrt&&(i=M.sqrt),typeof M.isLE=="boolean"&&(e=M.isLE),typeof M.modOnDecode=="boolean"&&(o=M.modOnDecode),u=M.allowedLengths}else typeof t=="number"&&(s=t),r.sqrt&&(i=r.sqrt);const{nBitLength:p,nByteLength:S}=ha(n,s);if(S>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let k;const T=Object.freeze({ORDER:n,isLE:e,BITS:p,BYTES:S,MASK:_r(p),ZERO:pe,ONE:oe,allowedLengths:u,create:M=>ee(M,n),isValid:M=>{if(typeof M!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof M);return pe<=M&&M<n},is0:M=>M===pe,isValidNot0:M=>!T.is0(M)&&T.isValid(M),isOdd:M=>(M&oe)===oe,neg:M=>ee(-M,n),eql:(M,B)=>M===B,sqr:M=>ee(M*M,n),add:(M,B)=>ee(M+B,n),sub:(M,B)=>ee(M-B,n),mul:(M,B)=>ee(M*B,n),pow:(M,B)=>la(T,M,B),div:(M,B)=>ee(M*Hi(B,n),n),sqrN:M=>M*M,addN:(M,B)=>M+B,subN:(M,B)=>M-B,mulN:(M,B)=>M*B,inv:M=>Hi(M,n),sqrt:i||(M=>(k||(k=aa(n)),k(T,M))),toBytes:M=>e?an(M,S):gi(M,S),fromBytes:(M,B=!0)=>{if(u){if(!u.includes(M.length)||M.length>S)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+M.length);const L=new Uint8Array(S);L.set(M,e?0:L.length-M.length),M=L}if(M.length!==S)throw new Error("Field.fromBytes: expected "+S+" bytes, got "+M.length);let F=e?Sr(M):on(M);if(o&&(F=ee(F,n)),!B&&!T.isValid(F))throw new Error("invalid field element: outside of range 0..ORDER");return F},invertBatch:M=>zs(T,M),cmov:(M,B,F)=>F?B:M});return Object.freeze(T)}function Hs(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function $s(n){const t=Hs(n);return t+Math.ceil(t/2)}function da(n,t,e=!1){const r=n.length,s=Hs(t),i=$s(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=e?Sr(n):on(n),u=ee(o,t-oe)+oe;return e?an(u,s):gi(u,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dr=BigInt(0),Ge=BigInt(1);function Zr(n,t){const e=t.negate();return n?e:t}function Ve(n,t){const e=zs(n.Fp,t.map(r=>r.Z));return t.map((r,s)=>n.fromAffine(r.toAffine(e[s])))}function Ks(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function Pn(n,t){Ks(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1),s=2**n,i=_r(n),o=BigInt(n);return{windows:e,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Ki(n,t,e){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=e;let u=Number(n&s),p=n>>o;u>r&&(u-=i,p+=Ge);const S=t*r,k=S+Math.abs(u)-1,T=u===0,M=u<0,B=t%2!==0;return{nextN:p,offset:k,isZero:T,isNeg:M,isNegF:B,offsetF:S}}function pa(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function ga(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const qn=new WeakMap,Ws=new WeakMap;function Dn(n){return Ws.get(n)||1}function Wi(n){if(n!==dr)throw new Error("invalid wNAF")}class js{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,r=this.ZERO){let s=t;for(;e>dr;)e&Ge&&(r=r.add(s)),s=s.double(),e>>=Ge;return r}precomputeWindow(t,e){const{windows:r,windowSize:s}=Pn(e,this.bits),i=[];let o=t,u=o;for(let p=0;p<r;p++){u=o,i.push(u);for(let S=1;S<s;S++)u=u.add(o),i.push(u);o=u.double()}return i}wNAF(t,e,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=Pn(t,this.bits);for(let u=0;u<o.windows;u++){const{nextN:p,offset:S,isZero:k,isNeg:T,isNegF:M,offsetF:B}=Ki(r,u,o);r=p,k?i=i.add(Zr(M,e[B])):s=s.add(Zr(T,e[S]))}return Wi(r),{p:s,f:i}}wNAFUnsafe(t,e,r,s=this.ZERO){const i=Pn(t,this.bits);for(let o=0;o<i.windows&&r!==dr;o++){const{nextN:u,offset:p,isZero:S,isNeg:k}=Ki(r,o,i);if(r=u,!S){const T=e[p];s=s.add(k?T.negate():T)}}return Wi(r),s}getPrecomputes(t,e,r){let s=qn.get(e);return s||(s=this.precomputeWindow(e,t),t!==1&&(typeof r=="function"&&(s=r(s)),qn.set(e,s))),s}cached(t,e,r){const s=Dn(t);return this.wNAF(s,this.getPrecomputes(s,t,r),e)}unsafe(t,e,r,s){const i=Dn(t);return i===1?this._unsafeLadder(t,e,s):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),e,s)}createCache(t,e){Ks(e,this.bits),Ws.set(t,e),qn.delete(t)}hasCache(t){return Dn(t)!==1}}function ma(n,t,e,r){let s=t,i=n.ZERO,o=n.ZERO;for(;e>dr||r>dr;)e&Ge&&(i=i.add(s)),r&Ge&&(o=o.add(s)),s=s.double(),e>>=Ge,r>>=Ge;return{p1:i,p2:o}}function Gs(n,t,e,r){pa(e,n),ga(r,t);const s=e.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,u=Cs(BigInt(s));let p=1;u>12?p=u-3:u>4?p=u-2:u>0&&(p=2);const S=_r(p),k=new Array(Number(S)+1).fill(o),T=Math.floor((t.BITS-1)/p)*p;let M=o;for(let B=T;B>=0;B-=p){k.fill(o);for(let L=0;L<i;L++){const R=r[L],$=Number(R>>BigInt(B)&S);k[$]=k[$].add(e[L])}let F=o;for(let L=k.length-1,R=o;L>0;L--)R=R.add(k[L]),F=F.add(R);if(M=M.add(F),B!==0)for(let L=0;L<p;L++)M=M.double()}return M}function ji(n,t){if(t){if(t.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return fa(t),t}else return Xe(n)}function Vs(n,t,e={}){if(!t||typeof t!="object")throw new Error(`expected valid ${n} CURVE object`);for(const u of["p","n","h"]){const p=t[u];if(!(typeof p=="bigint"&&p>dr))throw new Error(`CURVE.${u} must be positive bigint`)}const r=ji(t.p,e.Fp),s=ji(t.n,e.Fn),o=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(const u of o)if(!r.isValid(t[u]))throw new Error(`CURVE.${u} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ae=BigInt(0),re=BigInt(1),zn=BigInt(2),ya=BigInt(8);function wa(n,t,e,r){const s=n.sqr(e),i=n.sqr(r),o=n.add(n.mul(t.a,s),i),u=n.add(n.ONE,n.mul(t.d,n.mul(s,i)));return n.eql(o,u)}function ba(n,t={}){const{Fp:e,Fn:r}=Vs("edwards",n,t),{h:s,n:i}=n;Ar(t,{},{uvRatio:"function"});const o=zn<<BigInt(r.BYTES*8)-re,u=L=>e.create(L),p=t.uvRatio||((L,R)=>{try{return{isValid:!0,value:e.sqrt(e.div(L,R))}}catch{return{isValid:!1,value:Ae}}});if(!wa(e,n,n.Gx,n.Gy))throw new Error("bad curve params: generator point");function S(L,R,$=!1){const V=$?re:Ae;return ar("coordinate "+L,R,V,o),R}function k(L){if(!(L instanceof B))throw new Error("ExtendedPoint expected")}const T=Vr((L,R)=>{const{X:$,Y:V,Z:G}=L,Q=L.is0();R==null&&(R=Q?ya:e.inv(G));const X=u($*R),Y=u(V*R),at=e.mul(G,R);if(Q)return{x:Ae,y:re};if(at!==re)throw new Error("invZ was invalid");return{x:X,y:Y}}),M=Vr(L=>{const{a:R,d:$}=n;if(L.is0())throw new Error("bad point: ZERO");const{X:V,Y:G,Z:Q,T:X}=L,Y=u(V*V),at=u(G*G),ot=u(Q*Q),K=u(ot*ot),I=u(Y*R),C=u(ot*u(I+at)),q=u(K+u($*u(Y*at)));if(C!==q)throw new Error("bad point: equation left != right (1)");const w=u(V*G),a=u(Q*X);if(w!==a)throw new Error("bad point: equation left != right (2)");return!0});class B{constructor(R,$,V,G){this.X=S("x",R),this.Y=S("y",$),this.Z=S("z",V,!0),this.T=S("t",G),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(R){return Ve(B,R)}static msm(R,$){return Gs(B,r,R,$)}_setWindowSize(R){this.precompute(R)}static fromAffine(R){if(R instanceof B)throw new Error("extended point not allowed");const{x:$,y:V}=R||{};return S("x",$),S("y",V),new B($,V,re,u($*V))}precompute(R=8,$=!0){return F.createCache(this,R),$||this.multiply(zn),this}assertValidity(){M(this)}equals(R){k(R);const{X:$,Y:V,Z:G}=this,{X:Q,Y:X,Z:Y}=R,at=u($*Y),ot=u(Q*G),K=u(V*Y),I=u(X*G);return at===ot&&K===I}is0(){return this.equals(B.ZERO)}negate(){return new B(u(-this.X),this.Y,this.Z,u(-this.T))}double(){const{a:R}=n,{X:$,Y:V,Z:G}=this,Q=u($*$),X=u(V*V),Y=u(zn*u(G*G)),at=u(R*Q),ot=$+V,K=u(u(ot*ot)-Q-X),I=at+X,C=I-Y,q=at-X,w=u(K*C),a=u(I*q),d=u(K*q),g=u(C*I);return new B(w,a,g,d)}add(R){k(R);const{a:$,d:V}=n,{X:G,Y:Q,Z:X,T:Y}=this,{X:at,Y:ot,Z:K,T:I}=R,C=u(G*at),q=u(Q*ot),w=u(Y*V*I),a=u(X*K),d=u((G+Q)*(at+ot)-C-q),g=a-w,y=a+w,x=u(q-$*C),A=u(d*g),N=u(y*x),v=u(d*x),c=u(g*y);return new B(A,N,c,v)}subtract(R){return this.add(R.negate())}multiply(R){const $=R;ar("scalar",$,re,i);const{p:V,f:G}=F.cached(this,$,Q=>Ve(B,Q));return Ve(B,[V,G])[0]}multiplyUnsafe(R,$=B.ZERO){const V=R;return ar("scalar",V,Ae,i),V===Ae?B.ZERO:this.is0()||V===re?this:F.unsafe(this,V,G=>Ve(B,G),$)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return F.unsafe(this,i).is0()}toAffine(R){return T(this,R)}clearCofactor(){return s===re?this:this.multiplyUnsafe(s)}static fromBytes(R,$=!1){return me(R),B.fromHex(R,$)}static fromHex(R,$=!1){const{d:V,a:G}=n,Q=e.BYTES;R=Ft("pointHex",R,Q),Ye("zip215",$);const X=R.slice(),Y=R[Q-1];X[Q-1]=Y&-129;const at=Sr(X),ot=$?o:e.ORDER;ar("pointHex.y",at,Ae,ot);const K=u(at*at),I=u(K-re),C=u(V*K-G);let{isValid:q,value:w}=p(I,C);if(!q)throw new Error("Point.fromHex: invalid y coordinate");const a=(w&re)===re,d=(Y&128)!==0;if(!$&&w===Ae&&d)throw new Error("Point.fromHex: x=0 and x_0=1");return d!==a&&(w=u(-w)),B.fromAffine({x:w,y:at})}toBytes(){const{x:R,y:$}=this.toAffine(),V=an($,e.BYTES);return V[V.length-1]|=R&re?128:0,V}toRawBytes(){return this.toBytes()}toHex(){return Ze(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}B.BASE=new B(n.Gx,n.Gy,re,u(n.Gx*n.Gy)),B.ZERO=new B(Ae,re,re,Ae),B.Fp=e,B.Fn=r;const F=new js(B,r.BYTES*8);return B}function va(n,t,e){if(typeof t!="function")throw new Error('"hash" function param is required');Ar(e,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=e,{BASE:s,Fp:i,Fn:o}=n,u=o.ORDER,p=e.randomBytes||Is,S=e.adjustScalarBytes||(C=>C),k=e.domain||((C,q,w)=>{if(Ye("phflag",w),q.length||w)throw new Error("Contexts/pre-hash are not supported");return C});function T(C){return o.create(C)}function M(C){return T(Sr(C))}function B(C){const q=i.BYTES;C=Ft("private key",C,q);const w=Ft("hashed private key",t(C),2*q),a=S(w.slice(0,q)),d=w.slice(q,2*q),g=M(a);return{head:a,prefix:d,scalar:g}}function F(C){const{head:q,prefix:w,scalar:a}=B(C),d=s.multiply(a),g=d.toBytes();return{head:q,prefix:w,scalar:a,point:d,pointBytes:g}}function L(C){return F(C).pointBytes}function R(C=Uint8Array.of(),...q){const w=Fe(...q);return M(t(k(w,Ft("context",C),!!r)))}function $(C,q,w={}){C=Ft("message",C),r&&(C=r(C));const{prefix:a,scalar:d,pointBytes:g}=F(q),y=R(w.context,a,C),x=s.multiply(y).toBytes(),A=R(w.context,x,g,C),N=T(y+A*d);ar("signature.s",N,Ae,u);const v=i.BYTES,c=Fe(x,an(N,v));return Ft("result",c,v*2)}const V={zip215:!0};function G(C,q,w,a=V){const{context:d,zip215:g}=a,y=i.BYTES;C=Ft("signature",C,2*y),q=Ft("message",q),w=Ft("publicKey",w,y),g!==void 0&&Ye("zip215",g),r&&(q=r(q));const x=Sr(C.slice(y,2*y));let A,N,v;try{A=n.fromHex(w,g),N=n.fromHex(C.slice(0,y),g),v=s.multiplyUnsafe(x)}catch{return!1}if(!g&&A.isSmallOrder())return!1;const c=R(d,N.toBytes(),A.toBytes(),q);return N.add(A.multiplyUnsafe(c)).subtract(v).clearCofactor().is0()}s.precompute(8);const Q=i.BYTES,X={secret:Q,public:Q,signature:2*Q,seed:Q};function Y(C=p(X.seed)){return C}const at={getExtendedPublicKey:F,randomSecretKey:Y,isValidSecretKey:K,isValidPublicKey:I,randomPrivateKey:Y,toMontgomery(C){const{y:q}=n.fromBytes(C),w=Q===32;if(!w&&Q!==57)throw new Error("only defined for 25519 and 448");const a=w?i.div(re+q,re-q):i.div(q-re,q+re);return i.toBytes(a)},toMontgomeryPriv(C){me(C,Q);const q=t(C.subarray(0,Q));return S(q).subarray(0,Q)},precompute(C=8,q=n.BASE){return q.precompute(C,!1)}};function ot(C){const q=at.randomSecretKey(C);return{secretKey:q,publicKey:L(q)}}function K(C){try{return!!o.fromBytes(C,!1)}catch{return!1}}function I(C,q){try{return!!n.fromBytes(C,q)}catch{return!1}}return Object.freeze({keygen:ot,getPublicKey:L,sign:$,verify:G,utils:at,Point:n,info:{type:"edwards",lengths:X}})}function xa(n){const t={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp,r=Xe(t.n,n.nBitLength,!0),s={Fp:e,Fn:r,uvRatio:n.uvRatio},i={randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:t,curveOpts:s,hash:n.hash,eddsaOpts:i}}function Sa(n,t){return Object.assign({},t,{ExtendedPoint:t.Point,CURVE:n})}function Ea(n){const{CURVE:t,curveOpts:e,hash:r,eddsaOpts:s}=xa(n),i=ba(t,e),o=va(i,r,s);return Sa(n,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const Ba=BigInt(1),Gi=BigInt(2);BigInt(3);const _a=BigInt(5),Aa=BigInt(8),cn={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Aa,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function ka(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),s=BigInt(80),i=cn.p,u=n*n%i*n%i,p=Ut(u,Gi,i)*u%i,S=Ut(p,Ba,i)*n%i,k=Ut(S,_a,i)*S%i,T=Ut(k,t,i)*k%i,M=Ut(T,e,i)*T%i,B=Ut(M,r,i)*M%i,F=Ut(B,s,i)*B%i,L=Ut(F,s,i)*B%i,R=Ut(L,t,i)*k%i;return{pow_p_5_8:Ut(R,Gi,i)*n%i,b2:u}}function Ia(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const Vi=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Ma(n,t){const e=cn.p,r=ee(t*t*t,e),s=ee(r*r*t,e),i=ka(n*s).pow_p_5_8;let o=ee(n*r*i,e);const u=ee(t*o*o,e),p=o,S=ee(o*Vi,e),k=u===n,T=u===ee(-n,e),M=u===ee(-n*Vi,e);return k&&(o=p),(T||M)&&(o=S),ca(o,e)&&(o=ee(-o,e)),{isValid:k||T,value:o}}const Ra=Xe(cn.p,{isLE:!0}),Ta={...cn,Fp:Ra,hash:ta,adjustScalarBytes:Ia,uvRatio:Ma},kr=Ea(Ta);var $r={exports:{}};const La={},Ca=Object.freeze(Object.defineProperty({__proto__:null,default:La},Symbol.toStringTag,{value:"Module"})),Ua=li(Ca);var Fa=$r.exports,Zi;function Zs(){return Zi||(Zi=1,function(n){(function(t,e){function r(w,a){if(!w)throw new Error(a||"Assertion failed")}function s(w,a){w.super_=a;var d=function(){};d.prototype=a.prototype,w.prototype=new d,w.prototype.constructor=w}function i(w,a,d){if(i.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((a==="le"||a==="be")&&(d=a,a=10),this._init(w||0,a||10,d||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ua.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,d){return a.cmp(d)>0?a:d},i.min=function(a,d){return a.cmp(d)<0?a:d},i.prototype._init=function(a,d,g){if(typeof a=="number")return this._initNumber(a,d,g);if(typeof a=="object")return this._initArray(a,d,g);d==="hex"&&(d=16),r(d===(d|0)&&d>=2&&d<=36),a=a.toString().replace(/\s+/g,"");var y=0;a[0]==="-"&&(y++,this.negative=1),y<a.length&&(d===16?this._parseHex(a,y,g):(this._parseBase(a,d,y),g==="le"&&this._initArray(this.toArray(),d,g)))},i.prototype._initNumber=function(a,d,g){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(r(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),d,g)},i.prototype._initArray=function(a,d,g){if(r(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var x,A,N=0;if(g==="be")for(y=a.length-1,x=0;y>=0;y-=3)A=a[y]|a[y-1]<<8|a[y-2]<<16,this.words[x]|=A<<N&67108863,this.words[x+1]=A>>>26-N&67108863,N+=24,N>=26&&(N-=26,x++);else if(g==="le")for(y=0,x=0;y<a.length;y+=3)A=a[y]|a[y+1]<<8|a[y+2]<<16,this.words[x]|=A<<N&67108863,this.words[x+1]=A>>>26-N&67108863,N+=24,N>=26&&(N-=26,x++);return this._strip()};function u(w,a){var d=w.charCodeAt(a);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;r(!1,"Invalid character in "+w)}function p(w,a,d){var g=u(w,d);return d-1>=a&&(g|=u(w,d-1)<<4),g}i.prototype._parseHex=function(a,d,g){this.length=Math.ceil((a.length-d)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var x=0,A=0,N;if(g==="be")for(y=a.length-1;y>=d;y-=2)N=p(a,d,y)<<x,this.words[A]|=N&67108863,x>=18?(x-=18,A+=1,this.words[A]|=N>>>26):x+=8;else{var v=a.length-d;for(y=v%2===0?d+1:d;y<a.length;y+=2)N=p(a,d,y)<<x,this.words[A]|=N&67108863,x>=18?(x-=18,A+=1,this.words[A]|=N>>>26):x+=8}this._strip()};function S(w,a,d,g){for(var y=0,x=0,A=Math.min(w.length,d),N=a;N<A;N++){var v=w.charCodeAt(N)-48;y*=g,v>=49?x=v-49+10:v>=17?x=v-17+10:x=v,r(v>=0&&x<g,"Invalid character"),y+=x}return y}i.prototype._parseBase=function(a,d,g){this.words=[0],this.length=1;for(var y=0,x=1;x<=67108863;x*=d)y++;y--,x=x/d|0;for(var A=a.length-g,N=A%y,v=Math.min(A,A-N)+g,c=0,f=g;f<v;f+=y)c=S(a,f,f+y,d),this.imuln(x),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(N!==0){var b=1;for(c=S(a,f,a.length,d),f=0;f<N;f++)b*=d;this.imuln(b),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var d=0;d<this.length;d++)a.words[d]=this.words[d];a.length=this.length,a.negative=this.negative,a.red=this.red};function k(w,a){w.words=a.words,w.length=a.length,w.negative=a.negative,w.red=a.red}if(i.prototype._move=function(a){k(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=T}catch{i.prototype.inspect=T}else i.prototype.inspect=T;function T(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var M=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],B=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],F=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,d){a=a||10,d=d|0||1;var g;if(a===16||a==="hex"){g="";for(var y=0,x=0,A=0;A<this.length;A++){var N=this.words[A],v=((N<<y|x)&16777215).toString(16);x=N>>>24-y&16777215,y+=2,y>=26&&(y-=26,A--),x!==0||A!==this.length-1?g=M[6-v.length]+v+g:g=v+g}for(x!==0&&(g=x.toString(16)+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(a===(a|0)&&a>=2&&a<=36){var c=B[a],f=F[a];g="";var b=this.clone();for(b.negative=0;!b.isZero();){var _=b.modrn(f).toString(a);b=b.idivn(f),b.isZero()?g=_+g:g=M[c-_.length]+_+g}for(this.isZero()&&(g="0"+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,d){return this.toArrayLike(o,a,d)}),i.prototype.toArray=function(a,d){return this.toArrayLike(Array,a,d)};var L=function(a,d){return a.allocUnsafe?a.allocUnsafe(d):new a(d)};i.prototype.toArrayLike=function(a,d,g){this._strip();var y=this.byteLength(),x=g||Math.max(1,y);r(y<=x,"byte array longer than desired length"),r(x>0,"Requested array length <= 0");var A=L(a,x),N=d==="le"?"LE":"BE";return this["_toArrayLike"+N](A,y),A},i.prototype._toArrayLikeLE=function(a,d){for(var g=0,y=0,x=0,A=0;x<this.length;x++){var N=this.words[x]<<A|y;a[g++]=N&255,g<a.length&&(a[g++]=N>>8&255),g<a.length&&(a[g++]=N>>16&255),A===6?(g<a.length&&(a[g++]=N>>24&255),y=0,A=0):(y=N>>>24,A+=2)}if(g<a.length)for(a[g++]=y;g<a.length;)a[g++]=0},i.prototype._toArrayLikeBE=function(a,d){for(var g=a.length-1,y=0,x=0,A=0;x<this.length;x++){var N=this.words[x]<<A|y;a[g--]=N&255,g>=0&&(a[g--]=N>>8&255),g>=0&&(a[g--]=N>>16&255),A===6?(g>=0&&(a[g--]=N>>24&255),y=0,A=0):(y=N>>>24,A+=2)}if(g>=0)for(a[g--]=y;g>=0;)a[g--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var d=a,g=0;return d>=4096&&(g+=13,d>>>=13),d>=64&&(g+=7,d>>>=7),d>=8&&(g+=4,d>>>=4),d>=2&&(g+=2,d>>>=2),g+d},i.prototype._zeroBits=function(a){if(a===0)return 26;var d=a,g=0;return(d&8191)===0&&(g+=13,d>>>=13),(d&127)===0&&(g+=7,d>>>=7),(d&15)===0&&(g+=4,d>>>=4),(d&3)===0&&(g+=2,d>>>=2),(d&1)===0&&g++,g},i.prototype.bitLength=function(){var a=this.words[this.length-1],d=this._countBits(a);return(this.length-1)*26+d};function R(w){for(var a=new Array(w.bitLength()),d=0;d<a.length;d++){var g=d/26|0,y=d%26;a[d]=w.words[g]>>>y&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,d=0;d<this.length;d++){var g=this._zeroBits(this.words[d]);if(a+=g,g!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var d=0;d<a.length;d++)this.words[d]=this.words[d]|a.words[d];return this._strip()},i.prototype.ior=function(a){return r((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var d;this.length>a.length?d=a:d=this;for(var g=0;g<d.length;g++)this.words[g]=this.words[g]&a.words[g];return this.length=d.length,this._strip()},i.prototype.iand=function(a){return r((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var d,g;this.length>a.length?(d=this,g=a):(d=a,g=this);for(var y=0;y<g.length;y++)this.words[y]=d.words[y]^g.words[y];if(this!==d)for(;y<d.length;y++)this.words[y]=d.words[y];return this.length=d.length,this._strip()},i.prototype.ixor=function(a){return r((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){r(typeof a=="number"&&a>=0);var d=Math.ceil(a/26)|0,g=a%26;this._expand(d),g>0&&d--;for(var y=0;y<d;y++)this.words[y]=~this.words[y]&67108863;return g>0&&(this.words[y]=~this.words[y]&67108863>>26-g),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,d){r(typeof a=="number"&&a>=0);var g=a/26|0,y=a%26;return this._expand(g+1),d?this.words[g]=this.words[g]|1<<y:this.words[g]=this.words[g]&~(1<<y),this._strip()},i.prototype.iadd=function(a){var d;if(this.negative!==0&&a.negative===0)return this.negative=0,d=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,d=this.isub(a),a.negative=1,d._normSign();var g,y;this.length>a.length?(g=this,y=a):(g=a,y=this);for(var x=0,A=0;A<y.length;A++)d=(g.words[A]|0)+(y.words[A]|0)+x,this.words[A]=d&67108863,x=d>>>26;for(;x!==0&&A<g.length;A++)d=(g.words[A]|0)+x,this.words[A]=d&67108863,x=d>>>26;if(this.length=g.length,x!==0)this.words[this.length]=x,this.length++;else if(g!==this)for(;A<g.length;A++)this.words[A]=g.words[A];return this},i.prototype.add=function(a){var d;return a.negative!==0&&this.negative===0?(a.negative=0,d=this.sub(a),a.negative^=1,d):a.negative===0&&this.negative!==0?(this.negative=0,d=a.sub(this),this.negative=1,d):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var d=this.iadd(a);return a.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var g=this.cmp(a);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,x;g>0?(y=this,x=a):(y=a,x=this);for(var A=0,N=0;N<x.length;N++)d=(y.words[N]|0)-(x.words[N]|0)+A,A=d>>26,this.words[N]=d&67108863;for(;A!==0&&N<y.length;N++)d=(y.words[N]|0)+A,A=d>>26,this.words[N]=d&67108863;if(A===0&&N<y.length&&y!==this)for(;N<y.length;N++)this.words[N]=y.words[N];return this.length=Math.max(this.length,N),y!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function $(w,a,d){d.negative=a.negative^w.negative;var g=w.length+a.length|0;d.length=g,g=g-1|0;var y=w.words[0]|0,x=a.words[0]|0,A=y*x,N=A&67108863,v=A/67108864|0;d.words[0]=N;for(var c=1;c<g;c++){for(var f=v>>>26,b=v&67108863,_=Math.min(c,a.length-1),P=Math.max(0,c-w.length+1);P<=_;P++){var j=c-P|0;y=w.words[j]|0,x=a.words[P]|0,A=y*x+b,f+=A/67108864|0,b=A&67108863}d.words[c]=b|0,v=f|0}return v!==0?d.words[c]=v|0:d.length--,d._strip()}var V=function(a,d,g){var y=a.words,x=d.words,A=g.words,N=0,v,c,f,b=y[0]|0,_=b&8191,P=b>>>13,j=y[1]|0,et=j&8191,st=j>>>13,Rt=y[2]|0,yt=Rt&8191,wt=Rt>>>13,he=y[3]|0,bt=he&8191,St=he>>>13,Tr=y[4]|0,_t=Tr&8191,Tt=Tr>>>13,Lr=y[5]|0,kt=Lr&8191,Et=Lr>>>13,ge=y[6]|0,At=ge&8191,Lt=ge>>>13,Se=y[7]|0,Ct=Se&8191,m=Se>>>13,l=y[8]|0,h=l&8191,E=l>>>13,O=y[9]|0,D=O&8191,W=O>>>13,pt=x[0]|0,ht=pt&8191,lt=pt>>>13,Bt=x[1]|0,ft=Bt&8191,Ot=Bt>>>13,ki=x[2]|0,Pt=ki&8191,qt=ki>>>13,Ii=x[3]|0,Dt=Ii&8191,zt=Ii>>>13,Mi=x[4]|0,Ht=Mi&8191,$t=Mi>>>13,Ri=x[5]|0,Kt=Ri&8191,Wt=Ri>>>13,Ti=x[6]|0,jt=Ti&8191,Gt=Ti>>>13,Li=x[7]|0,Vt=Li&8191,Zt=Li>>>13,Ci=x[8]|0,Yt=Ci&8191,Xt=Ci>>>13,Ui=x[9]|0,Jt=Ui&8191,Qt=Ui>>>13;g.negative=a.negative^d.negative,g.length=19,v=Math.imul(_,ht),c=Math.imul(_,lt),c=c+Math.imul(P,ht)|0,f=Math.imul(P,lt);var mn=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(mn>>>26)|0,mn&=67108863,v=Math.imul(et,ht),c=Math.imul(et,lt),c=c+Math.imul(st,ht)|0,f=Math.imul(st,lt),v=v+Math.imul(_,ft)|0,c=c+Math.imul(_,Ot)|0,c=c+Math.imul(P,ft)|0,f=f+Math.imul(P,Ot)|0;var yn=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(yn>>>26)|0,yn&=67108863,v=Math.imul(yt,ht),c=Math.imul(yt,lt),c=c+Math.imul(wt,ht)|0,f=Math.imul(wt,lt),v=v+Math.imul(et,ft)|0,c=c+Math.imul(et,Ot)|0,c=c+Math.imul(st,ft)|0,f=f+Math.imul(st,Ot)|0,v=v+Math.imul(_,Pt)|0,c=c+Math.imul(_,qt)|0,c=c+Math.imul(P,Pt)|0,f=f+Math.imul(P,qt)|0;var wn=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(wn>>>26)|0,wn&=67108863,v=Math.imul(bt,ht),c=Math.imul(bt,lt),c=c+Math.imul(St,ht)|0,f=Math.imul(St,lt),v=v+Math.imul(yt,ft)|0,c=c+Math.imul(yt,Ot)|0,c=c+Math.imul(wt,ft)|0,f=f+Math.imul(wt,Ot)|0,v=v+Math.imul(et,Pt)|0,c=c+Math.imul(et,qt)|0,c=c+Math.imul(st,Pt)|0,f=f+Math.imul(st,qt)|0,v=v+Math.imul(_,Dt)|0,c=c+Math.imul(_,zt)|0,c=c+Math.imul(P,Dt)|0,f=f+Math.imul(P,zt)|0;var bn=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(bn>>>26)|0,bn&=67108863,v=Math.imul(_t,ht),c=Math.imul(_t,lt),c=c+Math.imul(Tt,ht)|0,f=Math.imul(Tt,lt),v=v+Math.imul(bt,ft)|0,c=c+Math.imul(bt,Ot)|0,c=c+Math.imul(St,ft)|0,f=f+Math.imul(St,Ot)|0,v=v+Math.imul(yt,Pt)|0,c=c+Math.imul(yt,qt)|0,c=c+Math.imul(wt,Pt)|0,f=f+Math.imul(wt,qt)|0,v=v+Math.imul(et,Dt)|0,c=c+Math.imul(et,zt)|0,c=c+Math.imul(st,Dt)|0,f=f+Math.imul(st,zt)|0,v=v+Math.imul(_,Ht)|0,c=c+Math.imul(_,$t)|0,c=c+Math.imul(P,Ht)|0,f=f+Math.imul(P,$t)|0;var vn=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(vn>>>26)|0,vn&=67108863,v=Math.imul(kt,ht),c=Math.imul(kt,lt),c=c+Math.imul(Et,ht)|0,f=Math.imul(Et,lt),v=v+Math.imul(_t,ft)|0,c=c+Math.imul(_t,Ot)|0,c=c+Math.imul(Tt,ft)|0,f=f+Math.imul(Tt,Ot)|0,v=v+Math.imul(bt,Pt)|0,c=c+Math.imul(bt,qt)|0,c=c+Math.imul(St,Pt)|0,f=f+Math.imul(St,qt)|0,v=v+Math.imul(yt,Dt)|0,c=c+Math.imul(yt,zt)|0,c=c+Math.imul(wt,Dt)|0,f=f+Math.imul(wt,zt)|0,v=v+Math.imul(et,Ht)|0,c=c+Math.imul(et,$t)|0,c=c+Math.imul(st,Ht)|0,f=f+Math.imul(st,$t)|0,v=v+Math.imul(_,Kt)|0,c=c+Math.imul(_,Wt)|0,c=c+Math.imul(P,Kt)|0,f=f+Math.imul(P,Wt)|0;var xn=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(xn>>>26)|0,xn&=67108863,v=Math.imul(At,ht),c=Math.imul(At,lt),c=c+Math.imul(Lt,ht)|0,f=Math.imul(Lt,lt),v=v+Math.imul(kt,ft)|0,c=c+Math.imul(kt,Ot)|0,c=c+Math.imul(Et,ft)|0,f=f+Math.imul(Et,Ot)|0,v=v+Math.imul(_t,Pt)|0,c=c+Math.imul(_t,qt)|0,c=c+Math.imul(Tt,Pt)|0,f=f+Math.imul(Tt,qt)|0,v=v+Math.imul(bt,Dt)|0,c=c+Math.imul(bt,zt)|0,c=c+Math.imul(St,Dt)|0,f=f+Math.imul(St,zt)|0,v=v+Math.imul(yt,Ht)|0,c=c+Math.imul(yt,$t)|0,c=c+Math.imul(wt,Ht)|0,f=f+Math.imul(wt,$t)|0,v=v+Math.imul(et,Kt)|0,c=c+Math.imul(et,Wt)|0,c=c+Math.imul(st,Kt)|0,f=f+Math.imul(st,Wt)|0,v=v+Math.imul(_,jt)|0,c=c+Math.imul(_,Gt)|0,c=c+Math.imul(P,jt)|0,f=f+Math.imul(P,Gt)|0;var Sn=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,v=Math.imul(Ct,ht),c=Math.imul(Ct,lt),c=c+Math.imul(m,ht)|0,f=Math.imul(m,lt),v=v+Math.imul(At,ft)|0,c=c+Math.imul(At,Ot)|0,c=c+Math.imul(Lt,ft)|0,f=f+Math.imul(Lt,Ot)|0,v=v+Math.imul(kt,Pt)|0,c=c+Math.imul(kt,qt)|0,c=c+Math.imul(Et,Pt)|0,f=f+Math.imul(Et,qt)|0,v=v+Math.imul(_t,Dt)|0,c=c+Math.imul(_t,zt)|0,c=c+Math.imul(Tt,Dt)|0,f=f+Math.imul(Tt,zt)|0,v=v+Math.imul(bt,Ht)|0,c=c+Math.imul(bt,$t)|0,c=c+Math.imul(St,Ht)|0,f=f+Math.imul(St,$t)|0,v=v+Math.imul(yt,Kt)|0,c=c+Math.imul(yt,Wt)|0,c=c+Math.imul(wt,Kt)|0,f=f+Math.imul(wt,Wt)|0,v=v+Math.imul(et,jt)|0,c=c+Math.imul(et,Gt)|0,c=c+Math.imul(st,jt)|0,f=f+Math.imul(st,Gt)|0,v=v+Math.imul(_,Vt)|0,c=c+Math.imul(_,Zt)|0,c=c+Math.imul(P,Vt)|0,f=f+Math.imul(P,Zt)|0;var En=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(En>>>26)|0,En&=67108863,v=Math.imul(h,ht),c=Math.imul(h,lt),c=c+Math.imul(E,ht)|0,f=Math.imul(E,lt),v=v+Math.imul(Ct,ft)|0,c=c+Math.imul(Ct,Ot)|0,c=c+Math.imul(m,ft)|0,f=f+Math.imul(m,Ot)|0,v=v+Math.imul(At,Pt)|0,c=c+Math.imul(At,qt)|0,c=c+Math.imul(Lt,Pt)|0,f=f+Math.imul(Lt,qt)|0,v=v+Math.imul(kt,Dt)|0,c=c+Math.imul(kt,zt)|0,c=c+Math.imul(Et,Dt)|0,f=f+Math.imul(Et,zt)|0,v=v+Math.imul(_t,Ht)|0,c=c+Math.imul(_t,$t)|0,c=c+Math.imul(Tt,Ht)|0,f=f+Math.imul(Tt,$t)|0,v=v+Math.imul(bt,Kt)|0,c=c+Math.imul(bt,Wt)|0,c=c+Math.imul(St,Kt)|0,f=f+Math.imul(St,Wt)|0,v=v+Math.imul(yt,jt)|0,c=c+Math.imul(yt,Gt)|0,c=c+Math.imul(wt,jt)|0,f=f+Math.imul(wt,Gt)|0,v=v+Math.imul(et,Vt)|0,c=c+Math.imul(et,Zt)|0,c=c+Math.imul(st,Vt)|0,f=f+Math.imul(st,Zt)|0,v=v+Math.imul(_,Yt)|0,c=c+Math.imul(_,Xt)|0,c=c+Math.imul(P,Yt)|0,f=f+Math.imul(P,Xt)|0;var Bn=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,v=Math.imul(D,ht),c=Math.imul(D,lt),c=c+Math.imul(W,ht)|0,f=Math.imul(W,lt),v=v+Math.imul(h,ft)|0,c=c+Math.imul(h,Ot)|0,c=c+Math.imul(E,ft)|0,f=f+Math.imul(E,Ot)|0,v=v+Math.imul(Ct,Pt)|0,c=c+Math.imul(Ct,qt)|0,c=c+Math.imul(m,Pt)|0,f=f+Math.imul(m,qt)|0,v=v+Math.imul(At,Dt)|0,c=c+Math.imul(At,zt)|0,c=c+Math.imul(Lt,Dt)|0,f=f+Math.imul(Lt,zt)|0,v=v+Math.imul(kt,Ht)|0,c=c+Math.imul(kt,$t)|0,c=c+Math.imul(Et,Ht)|0,f=f+Math.imul(Et,$t)|0,v=v+Math.imul(_t,Kt)|0,c=c+Math.imul(_t,Wt)|0,c=c+Math.imul(Tt,Kt)|0,f=f+Math.imul(Tt,Wt)|0,v=v+Math.imul(bt,jt)|0,c=c+Math.imul(bt,Gt)|0,c=c+Math.imul(St,jt)|0,f=f+Math.imul(St,Gt)|0,v=v+Math.imul(yt,Vt)|0,c=c+Math.imul(yt,Zt)|0,c=c+Math.imul(wt,Vt)|0,f=f+Math.imul(wt,Zt)|0,v=v+Math.imul(et,Yt)|0,c=c+Math.imul(et,Xt)|0,c=c+Math.imul(st,Yt)|0,f=f+Math.imul(st,Xt)|0,v=v+Math.imul(_,Jt)|0,c=c+Math.imul(_,Qt)|0,c=c+Math.imul(P,Jt)|0,f=f+Math.imul(P,Qt)|0;var _n=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(_n>>>26)|0,_n&=67108863,v=Math.imul(D,ft),c=Math.imul(D,Ot),c=c+Math.imul(W,ft)|0,f=Math.imul(W,Ot),v=v+Math.imul(h,Pt)|0,c=c+Math.imul(h,qt)|0,c=c+Math.imul(E,Pt)|0,f=f+Math.imul(E,qt)|0,v=v+Math.imul(Ct,Dt)|0,c=c+Math.imul(Ct,zt)|0,c=c+Math.imul(m,Dt)|0,f=f+Math.imul(m,zt)|0,v=v+Math.imul(At,Ht)|0,c=c+Math.imul(At,$t)|0,c=c+Math.imul(Lt,Ht)|0,f=f+Math.imul(Lt,$t)|0,v=v+Math.imul(kt,Kt)|0,c=c+Math.imul(kt,Wt)|0,c=c+Math.imul(Et,Kt)|0,f=f+Math.imul(Et,Wt)|0,v=v+Math.imul(_t,jt)|0,c=c+Math.imul(_t,Gt)|0,c=c+Math.imul(Tt,jt)|0,f=f+Math.imul(Tt,Gt)|0,v=v+Math.imul(bt,Vt)|0,c=c+Math.imul(bt,Zt)|0,c=c+Math.imul(St,Vt)|0,f=f+Math.imul(St,Zt)|0,v=v+Math.imul(yt,Yt)|0,c=c+Math.imul(yt,Xt)|0,c=c+Math.imul(wt,Yt)|0,f=f+Math.imul(wt,Xt)|0,v=v+Math.imul(et,Jt)|0,c=c+Math.imul(et,Qt)|0,c=c+Math.imul(st,Jt)|0,f=f+Math.imul(st,Qt)|0;var An=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(An>>>26)|0,An&=67108863,v=Math.imul(D,Pt),c=Math.imul(D,qt),c=c+Math.imul(W,Pt)|0,f=Math.imul(W,qt),v=v+Math.imul(h,Dt)|0,c=c+Math.imul(h,zt)|0,c=c+Math.imul(E,Dt)|0,f=f+Math.imul(E,zt)|0,v=v+Math.imul(Ct,Ht)|0,c=c+Math.imul(Ct,$t)|0,c=c+Math.imul(m,Ht)|0,f=f+Math.imul(m,$t)|0,v=v+Math.imul(At,Kt)|0,c=c+Math.imul(At,Wt)|0,c=c+Math.imul(Lt,Kt)|0,f=f+Math.imul(Lt,Wt)|0,v=v+Math.imul(kt,jt)|0,c=c+Math.imul(kt,Gt)|0,c=c+Math.imul(Et,jt)|0,f=f+Math.imul(Et,Gt)|0,v=v+Math.imul(_t,Vt)|0,c=c+Math.imul(_t,Zt)|0,c=c+Math.imul(Tt,Vt)|0,f=f+Math.imul(Tt,Zt)|0,v=v+Math.imul(bt,Yt)|0,c=c+Math.imul(bt,Xt)|0,c=c+Math.imul(St,Yt)|0,f=f+Math.imul(St,Xt)|0,v=v+Math.imul(yt,Jt)|0,c=c+Math.imul(yt,Qt)|0,c=c+Math.imul(wt,Jt)|0,f=f+Math.imul(wt,Qt)|0;var kn=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(kn>>>26)|0,kn&=67108863,v=Math.imul(D,Dt),c=Math.imul(D,zt),c=c+Math.imul(W,Dt)|0,f=Math.imul(W,zt),v=v+Math.imul(h,Ht)|0,c=c+Math.imul(h,$t)|0,c=c+Math.imul(E,Ht)|0,f=f+Math.imul(E,$t)|0,v=v+Math.imul(Ct,Kt)|0,c=c+Math.imul(Ct,Wt)|0,c=c+Math.imul(m,Kt)|0,f=f+Math.imul(m,Wt)|0,v=v+Math.imul(At,jt)|0,c=c+Math.imul(At,Gt)|0,c=c+Math.imul(Lt,jt)|0,f=f+Math.imul(Lt,Gt)|0,v=v+Math.imul(kt,Vt)|0,c=c+Math.imul(kt,Zt)|0,c=c+Math.imul(Et,Vt)|0,f=f+Math.imul(Et,Zt)|0,v=v+Math.imul(_t,Yt)|0,c=c+Math.imul(_t,Xt)|0,c=c+Math.imul(Tt,Yt)|0,f=f+Math.imul(Tt,Xt)|0,v=v+Math.imul(bt,Jt)|0,c=c+Math.imul(bt,Qt)|0,c=c+Math.imul(St,Jt)|0,f=f+Math.imul(St,Qt)|0;var In=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(In>>>26)|0,In&=67108863,v=Math.imul(D,Ht),c=Math.imul(D,$t),c=c+Math.imul(W,Ht)|0,f=Math.imul(W,$t),v=v+Math.imul(h,Kt)|0,c=c+Math.imul(h,Wt)|0,c=c+Math.imul(E,Kt)|0,f=f+Math.imul(E,Wt)|0,v=v+Math.imul(Ct,jt)|0,c=c+Math.imul(Ct,Gt)|0,c=c+Math.imul(m,jt)|0,f=f+Math.imul(m,Gt)|0,v=v+Math.imul(At,Vt)|0,c=c+Math.imul(At,Zt)|0,c=c+Math.imul(Lt,Vt)|0,f=f+Math.imul(Lt,Zt)|0,v=v+Math.imul(kt,Yt)|0,c=c+Math.imul(kt,Xt)|0,c=c+Math.imul(Et,Yt)|0,f=f+Math.imul(Et,Xt)|0,v=v+Math.imul(_t,Jt)|0,c=c+Math.imul(_t,Qt)|0,c=c+Math.imul(Tt,Jt)|0,f=f+Math.imul(Tt,Qt)|0;var Mn=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,v=Math.imul(D,Kt),c=Math.imul(D,Wt),c=c+Math.imul(W,Kt)|0,f=Math.imul(W,Wt),v=v+Math.imul(h,jt)|0,c=c+Math.imul(h,Gt)|0,c=c+Math.imul(E,jt)|0,f=f+Math.imul(E,Gt)|0,v=v+Math.imul(Ct,Vt)|0,c=c+Math.imul(Ct,Zt)|0,c=c+Math.imul(m,Vt)|0,f=f+Math.imul(m,Zt)|0,v=v+Math.imul(At,Yt)|0,c=c+Math.imul(At,Xt)|0,c=c+Math.imul(Lt,Yt)|0,f=f+Math.imul(Lt,Xt)|0,v=v+Math.imul(kt,Jt)|0,c=c+Math.imul(kt,Qt)|0,c=c+Math.imul(Et,Jt)|0,f=f+Math.imul(Et,Qt)|0;var Rn=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,v=Math.imul(D,jt),c=Math.imul(D,Gt),c=c+Math.imul(W,jt)|0,f=Math.imul(W,Gt),v=v+Math.imul(h,Vt)|0,c=c+Math.imul(h,Zt)|0,c=c+Math.imul(E,Vt)|0,f=f+Math.imul(E,Zt)|0,v=v+Math.imul(Ct,Yt)|0,c=c+Math.imul(Ct,Xt)|0,c=c+Math.imul(m,Yt)|0,f=f+Math.imul(m,Xt)|0,v=v+Math.imul(At,Jt)|0,c=c+Math.imul(At,Qt)|0,c=c+Math.imul(Lt,Jt)|0,f=f+Math.imul(Lt,Qt)|0;var Tn=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,v=Math.imul(D,Vt),c=Math.imul(D,Zt),c=c+Math.imul(W,Vt)|0,f=Math.imul(W,Zt),v=v+Math.imul(h,Yt)|0,c=c+Math.imul(h,Xt)|0,c=c+Math.imul(E,Yt)|0,f=f+Math.imul(E,Xt)|0,v=v+Math.imul(Ct,Jt)|0,c=c+Math.imul(Ct,Qt)|0,c=c+Math.imul(m,Jt)|0,f=f+Math.imul(m,Qt)|0;var Ln=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,v=Math.imul(D,Yt),c=Math.imul(D,Xt),c=c+Math.imul(W,Yt)|0,f=Math.imul(W,Xt),v=v+Math.imul(h,Jt)|0,c=c+Math.imul(h,Qt)|0,c=c+Math.imul(E,Jt)|0,f=f+Math.imul(E,Qt)|0;var Cn=(N+v|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,v=Math.imul(D,Jt),c=Math.imul(D,Qt),c=c+Math.imul(W,Jt)|0,f=Math.imul(W,Qt);var Un=(N+v|0)+((c&8191)<<13)|0;return N=(f+(c>>>13)|0)+(Un>>>26)|0,Un&=67108863,A[0]=mn,A[1]=yn,A[2]=wn,A[3]=bn,A[4]=vn,A[5]=xn,A[6]=Sn,A[7]=En,A[8]=Bn,A[9]=_n,A[10]=An,A[11]=kn,A[12]=In,A[13]=Mn,A[14]=Rn,A[15]=Tn,A[16]=Ln,A[17]=Cn,A[18]=Un,N!==0&&(A[19]=N,g.length++),g};Math.imul||(V=$);function G(w,a,d){d.negative=a.negative^w.negative,d.length=w.length+a.length;for(var g=0,y=0,x=0;x<d.length-1;x++){var A=y;y=0;for(var N=g&67108863,v=Math.min(x,a.length-1),c=Math.max(0,x-w.length+1);c<=v;c++){var f=x-c,b=w.words[f]|0,_=a.words[c]|0,P=b*_,j=P&67108863;A=A+(P/67108864|0)|0,j=j+N|0,N=j&67108863,A=A+(j>>>26)|0,y+=A>>>26,A&=67108863}d.words[x]=N,g=A,A=y}return g!==0?d.words[x]=g:d.length--,d._strip()}function Q(w,a,d){return G(w,a,d)}i.prototype.mulTo=function(a,d){var g,y=this.length+a.length;return this.length===10&&a.length===10?g=V(this,a,d):y<63?g=$(this,a,d):y<1024?g=G(this,a,d):g=Q(this,a,d),g},i.prototype.mul=function(a){var d=new i(null);return d.words=new Array(this.length+a.length),this.mulTo(a,d)},i.prototype.mulf=function(a){var d=new i(null);return d.words=new Array(this.length+a.length),Q(this,a,d)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var d=a<0;d&&(a=-a),r(typeof a=="number"),r(a<67108864);for(var g=0,y=0;y<this.length;y++){var x=(this.words[y]|0)*a,A=(x&67108863)+(g&67108863);g>>=26,g+=x/67108864|0,g+=A>>>26,this.words[y]=A&67108863}return g!==0&&(this.words[y]=g,this.length++),this.length=a===0?1:this.length,d?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var d=R(a);if(d.length===0)return new i(1);for(var g=this,y=0;y<d.length&&d[y]===0;y++,g=g.sqr());if(++y<d.length)for(var x=g.sqr();y<d.length;y++,x=x.sqr())d[y]!==0&&(g=g.mul(x));return g},i.prototype.iushln=function(a){r(typeof a=="number"&&a>=0);var d=a%26,g=(a-d)/26,y=67108863>>>26-d<<26-d,x;if(d!==0){var A=0;for(x=0;x<this.length;x++){var N=this.words[x]&y,v=(this.words[x]|0)-N<<d;this.words[x]=v|A,A=N>>>26-d}A&&(this.words[x]=A,this.length++)}if(g!==0){for(x=this.length-1;x>=0;x--)this.words[x+g]=this.words[x];for(x=0;x<g;x++)this.words[x]=0;this.length+=g}return this._strip()},i.prototype.ishln=function(a){return r(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,d,g){r(typeof a=="number"&&a>=0);var y;d?y=(d-d%26)/26:y=0;var x=a%26,A=Math.min((a-x)/26,this.length),N=67108863^67108863>>>x<<x,v=g;if(y-=A,y=Math.max(0,y),v){for(var c=0;c<A;c++)v.words[c]=this.words[c];v.length=A}if(A!==0)if(this.length>A)for(this.length-=A,c=0;c<this.length;c++)this.words[c]=this.words[c+A];else this.words[0]=0,this.length=1;var f=0;for(c=this.length-1;c>=0&&(f!==0||c>=y);c--){var b=this.words[c]|0;this.words[c]=f<<26-x|b>>>x,f=b&N}return v&&f!==0&&(v.words[v.length++]=f),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,d,g){return r(this.negative===0),this.iushrn(a,d,g)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){r(typeof a=="number"&&a>=0);var d=a%26,g=(a-d)/26,y=1<<d;if(this.length<=g)return!1;var x=this.words[g];return!!(x&y)},i.prototype.imaskn=function(a){r(typeof a=="number"&&a>=0);var d=a%26,g=(a-d)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(d!==0&&g++,this.length=Math.min(g,this.length),d!==0){var y=67108863^67108863>>>d<<d;this.words[this.length-1]&=y}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return r(typeof a=="number"),r(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},i.prototype.isubn=function(a){if(r(typeof a=="number"),r(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,d,g){var y=a.length+g,x;this._expand(y);var A,N=0;for(x=0;x<a.length;x++){A=(this.words[x+g]|0)+N;var v=(a.words[x]|0)*d;A-=v&67108863,N=(A>>26)-(v/67108864|0),this.words[x+g]=A&67108863}for(;x<this.length-g;x++)A=(this.words[x+g]|0)+N,N=A>>26,this.words[x+g]=A&67108863;if(N===0)return this._strip();for(r(N===-1),N=0,x=0;x<this.length;x++)A=-(this.words[x]|0)+N,N=A>>26,this.words[x]=A&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,d){var g=this.length-a.length,y=this.clone(),x=a,A=x.words[x.length-1]|0,N=this._countBits(A);g=26-N,g!==0&&(x=x.ushln(g),y.iushln(g),A=x.words[x.length-1]|0);var v=y.length-x.length,c;if(d!=="mod"){c=new i(null),c.length=v+1,c.words=new Array(c.length);for(var f=0;f<c.length;f++)c.words[f]=0}var b=y.clone()._ishlnsubmul(x,1,v);b.negative===0&&(y=b,c&&(c.words[v]=1));for(var _=v-1;_>=0;_--){var P=(y.words[x.length+_]|0)*67108864+(y.words[x.length+_-1]|0);for(P=Math.min(P/A|0,67108863),y._ishlnsubmul(x,P,_);y.negative!==0;)P--,y.negative=0,y._ishlnsubmul(x,1,_),y.isZero()||(y.negative^=1);c&&(c.words[_]=P)}return c&&c._strip(),y._strip(),d!=="div"&&g!==0&&y.iushrn(g),{div:c||null,mod:y}},i.prototype.divmod=function(a,d,g){if(r(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var y,x,A;return this.negative!==0&&a.negative===0?(A=this.neg().divmod(a,d),d!=="mod"&&(y=A.div.neg()),d!=="div"&&(x=A.mod.neg(),g&&x.negative!==0&&x.iadd(a)),{div:y,mod:x}):this.negative===0&&a.negative!==0?(A=this.divmod(a.neg(),d),d!=="mod"&&(y=A.div.neg()),{div:y,mod:A.mod}):(this.negative&a.negative)!==0?(A=this.neg().divmod(a.neg(),d),d!=="div"&&(x=A.mod.neg(),g&&x.negative!==0&&x.isub(a)),{div:A.div,mod:x}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?d==="div"?{div:this.divn(a.words[0]),mod:null}:d==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,d)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var d=this.divmod(a);if(d.mod.isZero())return d.div;var g=d.div.negative!==0?d.mod.isub(a):d.mod,y=a.ushrn(1),x=a.andln(1),A=g.cmp(y);return A<0||x===1&&A===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},i.prototype.modrn=function(a){var d=a<0;d&&(a=-a),r(a<=67108863);for(var g=(1<<26)%a,y=0,x=this.length-1;x>=0;x--)y=(g*y+(this.words[x]|0))%a;return d?-y:y},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var d=a<0;d&&(a=-a),r(a<=67108863);for(var g=0,y=this.length-1;y>=0;y--){var x=(this.words[y]|0)+g*67108864;this.words[y]=x/a|0,g=x%a}return this._strip(),d?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){r(a.negative===0),r(!a.isZero());var d=this,g=a.clone();d.negative!==0?d=d.umod(a):d=d.clone();for(var y=new i(1),x=new i(0),A=new i(0),N=new i(1),v=0;d.isEven()&&g.isEven();)d.iushrn(1),g.iushrn(1),++v;for(var c=g.clone(),f=d.clone();!d.isZero();){for(var b=0,_=1;(d.words[0]&_)===0&&b<26;++b,_<<=1);if(b>0)for(d.iushrn(b);b-- >0;)(y.isOdd()||x.isOdd())&&(y.iadd(c),x.isub(f)),y.iushrn(1),x.iushrn(1);for(var P=0,j=1;(g.words[0]&j)===0&&P<26;++P,j<<=1);if(P>0)for(g.iushrn(P);P-- >0;)(A.isOdd()||N.isOdd())&&(A.iadd(c),N.isub(f)),A.iushrn(1),N.iushrn(1);d.cmp(g)>=0?(d.isub(g),y.isub(A),x.isub(N)):(g.isub(d),A.isub(y),N.isub(x))}return{a:A,b:N,gcd:g.iushln(v)}},i.prototype._invmp=function(a){r(a.negative===0),r(!a.isZero());var d=this,g=a.clone();d.negative!==0?d=d.umod(a):d=d.clone();for(var y=new i(1),x=new i(0),A=g.clone();d.cmpn(1)>0&&g.cmpn(1)>0;){for(var N=0,v=1;(d.words[0]&v)===0&&N<26;++N,v<<=1);if(N>0)for(d.iushrn(N);N-- >0;)y.isOdd()&&y.iadd(A),y.iushrn(1);for(var c=0,f=1;(g.words[0]&f)===0&&c<26;++c,f<<=1);if(c>0)for(g.iushrn(c);c-- >0;)x.isOdd()&&x.iadd(A),x.iushrn(1);d.cmp(g)>=0?(d.isub(g),y.isub(x)):(g.isub(d),x.isub(y))}var b;return d.cmpn(1)===0?b=y:b=x,b.cmpn(0)<0&&b.iadd(a),b},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var d=this.clone(),g=a.clone();d.negative=0,g.negative=0;for(var y=0;d.isEven()&&g.isEven();y++)d.iushrn(1),g.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;g.isEven();)g.iushrn(1);var x=d.cmp(g);if(x<0){var A=d;d=g,g=A}else if(x===0||g.cmpn(1)===0)break;d.isub(g)}while(!0);return g.iushln(y)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){r(typeof a=="number");var d=a%26,g=(a-d)/26,y=1<<d;if(this.length<=g)return this._expand(g+1),this.words[g]|=y,this;for(var x=y,A=g;x!==0&&A<this.length;A++){var N=this.words[A]|0;N+=x,x=N>>>26,N&=67108863,this.words[A]=N}return x!==0&&(this.words[A]=x,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var d=a<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var g;if(this.length>1)g=1;else{d&&(a=-a),r(a<=67108863,"Number is too big");var y=this.words[0]|0;g=y===a?0:y<a?-1:1}return this.negative!==0?-g|0:g},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var d=this.ucmp(a);return this.negative!==0?-d|0:d},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var d=0,g=this.length-1;g>=0;g--){var y=this.words[g]|0,x=a.words[g]|0;if(y!==x){y<x?d=-1:y>x&&(d=1);break}}return d},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new C(a)},i.prototype.toRed=function(a){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return r(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return r(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var X={k256:null,p224:null,p192:null,p25519:null};function Y(w,a){this.name=w,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Y.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},Y.prototype.ireduce=function(a){var d=a,g;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),g=d.bitLength();while(g>this.n);var y=g<this.n?-1:d.ucmp(this.p);return y===0?(d.words[0]=0,d.length=1):y>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},Y.prototype.split=function(a,d){a.iushrn(this.n,0,d)},Y.prototype.imulK=function(a){return a.imul(this.k)};function at(){Y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(at,Y),at.prototype.split=function(a,d){for(var g=4194303,y=Math.min(a.length,9),x=0;x<y;x++)d.words[x]=a.words[x];if(d.length=y,a.length<=9){a.words[0]=0,a.length=1;return}var A=a.words[9];for(d.words[d.length++]=A&g,x=10;x<a.length;x++){var N=a.words[x]|0;a.words[x-10]=(N&g)<<4|A>>>22,A=N}A>>>=22,a.words[x-10]=A,A===0&&a.length>10?a.length-=10:a.length-=9},at.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var d=0,g=0;g<a.length;g++){var y=a.words[g]|0;d+=y*977,a.words[g]=d&67108863,d=y*64+(d/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ot(){Y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ot,Y);function K(){Y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(K,Y);function I(){Y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(I,Y),I.prototype.imulK=function(a){for(var d=0,g=0;g<a.length;g++){var y=(a.words[g]|0)*19+d,x=y&67108863;y>>>=26,a.words[g]=x,d=y}return d!==0&&(a.words[a.length++]=d),a},i._prime=function(a){if(X[a])return X[a];var d;if(a==="k256")d=new at;else if(a==="p224")d=new ot;else if(a==="p192")d=new K;else if(a==="p25519")d=new I;else throw new Error("Unknown prime "+a);return X[a]=d,d};function C(w){if(typeof w=="string"){var a=i._prime(w);this.m=a.p,this.prime=a}else r(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}C.prototype._verify1=function(a){r(a.negative===0,"red works only with positives"),r(a.red,"red works only with red numbers")},C.prototype._verify2=function(a,d){r((a.negative|d.negative)===0,"red works only with positives"),r(a.red&&a.red===d.red,"red works only with red numbers")},C.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(k(a,a.umod(this.m)._forceRed(this)),a)},C.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},C.prototype.add=function(a,d){this._verify2(a,d);var g=a.add(d);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},C.prototype.iadd=function(a,d){this._verify2(a,d);var g=a.iadd(d);return g.cmp(this.m)>=0&&g.isub(this.m),g},C.prototype.sub=function(a,d){this._verify2(a,d);var g=a.sub(d);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},C.prototype.isub=function(a,d){this._verify2(a,d);var g=a.isub(d);return g.cmpn(0)<0&&g.iadd(this.m),g},C.prototype.shl=function(a,d){return this._verify1(a),this.imod(a.ushln(d))},C.prototype.imul=function(a,d){return this._verify2(a,d),this.imod(a.imul(d))},C.prototype.mul=function(a,d){return this._verify2(a,d),this.imod(a.mul(d))},C.prototype.isqr=function(a){return this.imul(a,a.clone())},C.prototype.sqr=function(a){return this.mul(a,a)},C.prototype.sqrt=function(a){if(a.isZero())return a.clone();var d=this.m.andln(3);if(r(d%2===1),d===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(a,g)}for(var y=this.m.subn(1),x=0;!y.isZero()&&y.andln(1)===0;)x++,y.iushrn(1);r(!y.isZero());var A=new i(1).toRed(this),N=A.redNeg(),v=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,v).cmp(N)!==0;)c.redIAdd(N);for(var f=this.pow(c,y),b=this.pow(a,y.addn(1).iushrn(1)),_=this.pow(a,y),P=x;_.cmp(A)!==0;){for(var j=_,et=0;j.cmp(A)!==0;et++)j=j.redSqr();r(et<P);var st=this.pow(f,new i(1).iushln(P-et-1));b=b.redMul(st),f=st.redSqr(),_=_.redMul(f),P=et}return b},C.prototype.invm=function(a){var d=a._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},C.prototype.pow=function(a,d){if(d.isZero())return new i(1).toRed(this);if(d.cmpn(1)===0)return a.clone();var g=4,y=new Array(1<<g);y[0]=new i(1).toRed(this),y[1]=a;for(var x=2;x<y.length;x++)y[x]=this.mul(y[x-1],a);var A=y[0],N=0,v=0,c=d.bitLength()%26;for(c===0&&(c=26),x=d.length-1;x>=0;x--){for(var f=d.words[x],b=c-1;b>=0;b--){var _=f>>b&1;if(A!==y[0]&&(A=this.sqr(A)),_===0&&N===0){v=0;continue}N<<=1,N|=_,v++,!(v!==g&&(x!==0||b!==0))&&(A=this.mul(A,y[N]),v=0,N=0)}c=26}return A},C.prototype.convertTo=function(a){var d=a.umod(this.m);return d===a?d.clone():d},C.prototype.convertFrom=function(a){var d=a.clone();return d.red=null,d},i.mont=function(a){return new q(a)};function q(w){C.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(q,C),q.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},q.prototype.convertFrom=function(a){var d=this.imod(a.mul(this.rinv));return d.red=null,d},q.prototype.imul=function(a,d){if(a.isZero()||d.isZero())return a.words[0]=0,a.length=1,a;var g=a.imul(d),y=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=g.isub(y).iushrn(this.shift),A=x;return x.cmp(this.m)>=0?A=x.isub(this.m):x.cmpn(0)<0&&(A=x.iadd(this.m)),A._forceRed(this)},q.prototype.mul=function(a,d){if(a.isZero()||d.isZero())return new i(0)._forceRed(this);var g=a.mul(d),y=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=g.isub(y).iushrn(this.shift),A=x;return x.cmp(this.m)>=0?A=x.isub(this.m):x.cmpn(0)<0&&(A=x.iadd(this.m)),A._forceRed(this)},q.prototype.invm=function(a){var d=this.imod(a._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(n,Fa)}($r)),$r.exports}var Na=Zs();const Yi=sn(Na);var Pr={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Xi;function Oa(){return Xi||(Xi=1,function(n,t){var e=hi(),r=e.Buffer;function s(o,u){for(var p in o)u[p]=o[p]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(s(e,t),t.Buffer=i);function i(o,u,p){return r(o,u,p)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,u,p){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,u,p)},i.alloc=function(o,u,p){if(typeof o!="number")throw new TypeError("Argument must be a number");var S=r(o);return u!==void 0?typeof p=="string"?S.fill(u,p):S.fill(u):S.fill(0),S},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}}(Pr,Pr.exports)),Pr.exports}var Hn,Ji;function Pa(){if(Ji)return Hn;Ji=1;var n=Oa().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),u=o.charCodeAt(0);if(r[u]!==255)throw new TypeError(o+" is ambiguous");r[u]=i}var p=e.length,S=e.charAt(0),k=Math.log(p)/Math.log(256),T=Math.log(256)/Math.log(p);function M(L){if((Array.isArray(L)||L instanceof Uint8Array)&&(L=n.from(L)),!n.isBuffer(L))throw new TypeError("Expected Buffer");if(L.length===0)return"";for(var R=0,$=0,V=0,G=L.length;V!==G&&L[V]===0;)V++,R++;for(var Q=(G-V)*T+1>>>0,X=new Uint8Array(Q);V!==G;){for(var Y=L[V],at=0,ot=Q-1;(Y!==0||at<$)&&ot!==-1;ot--,at++)Y+=256*X[ot]>>>0,X[ot]=Y%p>>>0,Y=Y/p>>>0;if(Y!==0)throw new Error("Non-zero carry");$=at,V++}for(var K=Q-$;K!==Q&&X[K]===0;)K++;for(var I=S.repeat(R);K<Q;++K)I+=e.charAt(X[K]);return I}function B(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return n.alloc(0);for(var R=0,$=0,V=0;L[R]===S;)$++,R++;for(var G=(L.length-R)*k+1>>>0,Q=new Uint8Array(G);R<L.length;){var X=L.charCodeAt(R);if(X>255)return;var Y=r[X];if(Y===255)return;for(var at=0,ot=G-1;(Y!==0||at<V)&&ot!==-1;ot--,at++)Y+=p*Q[ot]>>>0,Q[ot]=Y%256>>>0,Y=Y/256>>>0;if(Y!==0)throw new Error("Non-zero carry");V=at,R++}for(var K=G-V;K!==G&&Q[K]===0;)K++;var I=n.allocUnsafe($+(G-K));I.fill(0,0,$);for(var C=$;K!==G;)I[C++]=Q[K++];return I}function F(L){var R=B(L);if(R)return R;throw new Error("Non-base"+p+" character")}return{encode:M,decodeUnsafe:B,decode:F}}return Hn=t,Hn}var $n,Qi;function Ys(){if(Qi)return $n;Qi=1;var n=Pa(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return $n=n(t),$n}var qa=Ys();const se=sn(qa),ts=Ts;var vt={};function Ce(n,t,e){return t<=n&&n<=e}function un(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function Da(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var u=i&1023,p=o&1023;s.push(65536+(u<<10)+p),r+=1}else s.push(65533)}r+=1}return s}function za(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Yr=-1;function yi(n){this.tokens=[].slice.call(n)}yi.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Yr},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var pr=-1;function Kn(n,t){if(n)throw TypeError("Decoder error");return t||65533}var Xr="utf-8";function Jr(n,t){if(!(this instanceof Jr))return new Jr(n,t);if(n=n!==void 0?String(n).toLowerCase():Xr,n!==Xr)throw new Error("Encoding not supported. Only utf-8 is supported");t=un(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Jr.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=un(e),this._streaming||(this._decoder=new Ha({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new yi(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==pr);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===pr)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),za(i)}};function Qr(n,t){if(!(this instanceof Qr))return new Qr(n,t);if(n=n!==void 0?String(n).toLowerCase():Xr,n!==Xr)throw new Error("Encoding not supported. Only utf-8 is supported");t=un(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Qr.prototype={encode:function(t,e){t=t?String(t):"",e=un(e),this._streaming||(this._encoder=new $a(this._options)),this._streaming=!!e.stream;for(var r=[],s=new yi(Da(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==pr);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==pr;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function Ha(n){var t=n.fatal,e=0,r=0,s=0,i=128,o=191;this.handler=function(u,p){if(p===Yr&&s!==0)return s=0,Kn(t);if(p===Yr)return pr;if(s===0){if(Ce(p,0,127))return p;if(Ce(p,194,223))s=1,e=p-192;else if(Ce(p,224,239))p===224&&(i=160),p===237&&(o=159),s=2,e=p-224;else if(Ce(p,240,244))p===240&&(i=144),p===244&&(o=143),s=3,e=p-240;else return Kn(t);return e=e<<6*s,null}if(!Ce(p,i,o))return e=s=r=0,i=128,o=191,u.prepend(p),Kn(t);if(i=128,o=191,r+=1,e+=p-128<<6*(s-r),r!==s)return null;var S=e;return e=s=r=0,S}}function $a(n){n.fatal,this.handler=function(t,e){if(e===Yr)return pr;if(Ce(e,0,127))return e;var r,s;Ce(e,128,2047)?(r=1,s=192):Ce(e,2048,65535)?(r=2,s=224):Ce(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var o=e>>6*(r-1);i.push(128|o&63),r-=1}return i}}const Ka=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Jr,TextEncoder:Qr},Symbol.toStringTag,{value:"Module"})),Wa=li(Ka);var es;function ja(){if(es)return vt;es=1;var n=vt&&vt.__createBinding||(Object.create?function(K,I,C,q){q===void 0&&(q=C),Object.defineProperty(K,q,{enumerable:!0,get:function(){return I[C]}})}:function(K,I,C,q){q===void 0&&(q=C),K[q]=I[C]}),t=vt&&vt.__setModuleDefault||(Object.create?function(K,I){Object.defineProperty(K,"default",{enumerable:!0,value:I})}:function(K,I){K.default=I}),e=vt&&vt.__decorate||function(K,I,C,q){var w=arguments.length,a=w<3?I:q===null?q=Object.getOwnPropertyDescriptor(I,C):q,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(K,I,C,q);else for(var g=K.length-1;g>=0;g--)(d=K[g])&&(a=(w<3?d(a):w>3?d(I,C,a):d(I,C))||a);return w>3&&a&&Object.defineProperty(I,C,a),a},r=vt&&vt.__importStar||function(K){if(K&&K.__esModule)return K;var I={};if(K!=null)for(var C in K)C!=="default"&&Object.hasOwnProperty.call(K,C)&&n(I,K,C);return t(I,K),I},s=vt&&vt.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(vt,"__esModule",{value:!0}),vt.deserializeUnchecked=vt.deserialize=vt.serialize=vt.BinaryReader=vt.BinaryWriter=vt.BorshError=vt.baseDecode=vt.baseEncode=void 0;const i=s(Zs()),o=s(Ys()),u=r(Wa),p=typeof TextDecoder!="function"?u.TextDecoder:TextDecoder,S=new p("utf-8",{fatal:!0});function k(K){return typeof K=="string"&&(K=Buffer.from(K,"utf8")),o.default.encode(Buffer.from(K))}vt.baseEncode=k;function T(K){return Buffer.from(o.default.decode(K))}vt.baseDecode=T;const M=1024;class B extends Error{constructor(I){super(I),this.fieldPath=[],this.originalMessage=I}addToFieldPath(I){this.fieldPath.splice(0,0,I),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}vt.BorshError=B;class F{constructor(){this.buf=Buffer.alloc(M),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(M)]))}writeU8(I){this.maybeResize(),this.buf.writeUInt8(I,this.length),this.length+=1}writeU16(I){this.maybeResize(),this.buf.writeUInt16LE(I,this.length),this.length+=2}writeU32(I){this.maybeResize(),this.buf.writeUInt32LE(I,this.length),this.length+=4}writeU64(I){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(I).toArray("le",8)))}writeU128(I){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(I).toArray("le",16)))}writeU256(I){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(I).toArray("le",32)))}writeU512(I){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(I).toArray("le",64)))}writeBuffer(I){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),I,Buffer.alloc(M)]),this.length+=I.length}writeString(I){this.maybeResize();const C=Buffer.from(I,"utf8");this.writeU32(C.length),this.writeBuffer(C)}writeFixedArray(I){this.writeBuffer(Buffer.from(I))}writeArray(I,C){this.maybeResize(),this.writeU32(I.length);for(const q of I)this.maybeResize(),C(q)}toArray(){return this.buf.subarray(0,this.length)}}vt.BinaryWriter=F;function L(K,I,C){const q=C.value;C.value=function(...w){try{return q.apply(this,w)}catch(a){if(a instanceof RangeError){const d=a.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(d)>=0)throw new B("Reached the end of buffer when deserializing")}throw a}}}class R{constructor(I){this.buf=I,this.offset=0}readU8(){const I=this.buf.readUInt8(this.offset);return this.offset+=1,I}readU16(){const I=this.buf.readUInt16LE(this.offset);return this.offset+=2,I}readU32(){const I=this.buf.readUInt32LE(this.offset);return this.offset+=4,I}readU64(){const I=this.readBuffer(8);return new i.default(I,"le")}readU128(){const I=this.readBuffer(16);return new i.default(I,"le")}readU256(){const I=this.readBuffer(32);return new i.default(I,"le")}readU512(){const I=this.readBuffer(64);return new i.default(I,"le")}readBuffer(I){if(this.offset+I>this.buf.length)throw new B(`Expected buffer length ${I} isn't within bounds`);const C=this.buf.slice(this.offset,this.offset+I);return this.offset+=I,C}readString(){const I=this.readU32(),C=this.readBuffer(I);try{return S.decode(C)}catch(q){throw new B(`Error decoding UTF-8 string: ${q}`)}}readFixedArray(I){return new Uint8Array(this.readBuffer(I))}readArray(I){const C=this.readU32(),q=Array();for(let w=0;w<C;++w)q.push(I());return q}}e([L],R.prototype,"readU8",null),e([L],R.prototype,"readU16",null),e([L],R.prototype,"readU32",null),e([L],R.prototype,"readU64",null),e([L],R.prototype,"readU128",null),e([L],R.prototype,"readU256",null),e([L],R.prototype,"readU512",null),e([L],R.prototype,"readString",null),e([L],R.prototype,"readFixedArray",null),e([L],R.prototype,"readArray",null),vt.BinaryReader=R;function $(K){return K.charAt(0).toUpperCase()+K.slice(1)}function V(K,I,C,q,w){try{if(typeof q=="string")w[`write${$(q)}`](C);else if(q instanceof Array)if(typeof q[0]=="number"){if(C.length!==q[0])throw new B(`Expecting byte array of length ${q[0]}, but got ${C.length} bytes`);w.writeFixedArray(C)}else if(q.length===2&&typeof q[1]=="number"){if(C.length!==q[1])throw new B(`Expecting byte array of length ${q[1]}, but got ${C.length} bytes`);for(let a=0;a<q[1];a++)V(K,null,C[a],q[0],w)}else w.writeArray(C,a=>{V(K,I,a,q[0],w)});else if(q.kind!==void 0)switch(q.kind){case"option":{C==null?w.writeU8(0):(w.writeU8(1),V(K,I,C,q.type,w));break}case"map":{w.writeU32(C.size),C.forEach((a,d)=>{V(K,I,d,q.key,w),V(K,I,a,q.value,w)});break}default:throw new B(`FieldType ${q} unrecognized`)}else G(K,C,w)}catch(a){throw a instanceof B&&a.addToFieldPath(I),a}}function G(K,I,C){if(typeof I.borshSerialize=="function"){I.borshSerialize(C);return}const q=K.get(I.constructor);if(!q)throw new B(`Class ${I.constructor.name} is missing in schema`);if(q.kind==="struct")q.fields.map(([w,a])=>{V(K,w,I[w],a,C)});else if(q.kind==="enum"){const w=I[q.field];for(let a=0;a<q.values.length;++a){const[d,g]=q.values[a];if(d===w){C.writeU8(a),V(K,d,I[d],g,C);break}}}else throw new B(`Unexpected schema kind: ${q.kind} for ${I.constructor.name}`)}function Q(K,I,C=F){const q=new C;return G(K,I,q),q.toArray()}vt.serialize=Q;function X(K,I,C,q){try{if(typeof C=="string")return q[`read${$(C)}`]();if(C instanceof Array){if(typeof C[0]=="number")return q.readFixedArray(C[0]);if(typeof C[1]=="number"){const w=[];for(let a=0;a<C[1];a++)w.push(X(K,null,C[0],q));return w}else return q.readArray(()=>X(K,I,C[0],q))}if(C.kind==="option")return q.readU8()?X(K,I,C.type,q):void 0;if(C.kind==="map"){let w=new Map;const a=q.readU32();for(let d=0;d<a;d++){const g=X(K,I,C.key,q),y=X(K,I,C.value,q);w.set(g,y)}return w}return Y(K,C,q)}catch(w){throw w instanceof B&&w.addToFieldPath(I),w}}function Y(K,I,C){if(typeof I.borshDeserialize=="function")return I.borshDeserialize(C);const q=K.get(I);if(!q)throw new B(`Class ${I.name} is missing in schema`);if(q.kind==="struct"){const w={};for(const[a,d]of K.get(I).fields)w[a]=X(K,a,d,C);return new I(w)}if(q.kind==="enum"){const w=C.readU8();if(w>=q.values.length)throw new B(`Enum index: ${w} is out of range`);const[a,d]=q.values[w],g=X(K,a,d,C);return new I({[a]:g})}throw new B(`Unexpected schema kind: ${q.kind} for ${I.constructor.name}`)}function at(K,I,C,q=R){const w=new q(C),a=Y(K,I,w);if(w.offset<C.length)throw new B(`Unexpected ${C.length-w.offset} bytes after deserialized data`);return a}vt.deserialize=at;function ot(K,I,C,q=R){const w=new q(C);return Y(K,I,w)}return vt.deserializeUnchecked=ot,vt}var Wn=ja(),H={},rs;function Ga(){if(rs)return H;rs=1,Object.defineProperty(H,"__esModule",{value:!0}),H.s16=H.s8=H.nu64be=H.u48be=H.u40be=H.u32be=H.u24be=H.u16be=H.nu64=H.u48=H.u40=H.u32=H.u24=H.u16=H.u8=H.offset=H.greedy=H.Constant=H.UTF8=H.CString=H.Blob=H.Boolean=H.BitField=H.BitStructure=H.VariantLayout=H.Union=H.UnionLayoutDiscriminator=H.UnionDiscriminator=H.Structure=H.Sequence=H.DoubleBE=H.Double=H.FloatBE=H.Float=H.NearInt64BE=H.NearInt64=H.NearUInt64BE=H.NearUInt64=H.IntBE=H.Int=H.UIntBE=H.UInt=H.OffsetLayout=H.GreedyCount=H.ExternalLayout=H.bindConstructorLayout=H.nameWithProperty=H.Layout=H.uint8ArrayToBuffer=H.checkUint8Array=void 0,H.constant=H.utf8=H.cstr=H.blob=H.unionLayoutDiscriminator=H.union=H.seq=H.bits=H.struct=H.f64be=H.f64=H.f32be=H.f32=H.ns64be=H.s48be=H.s40be=H.s32be=H.s24be=H.s16be=H.ns64=H.s48=H.s40=H.s32=H.s24=void 0;const n=hi();function t(c){if(!(c instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}H.checkUint8Array=t;function e(c){return t(c),n.Buffer.from(c.buffer,c.byteOffset,c.length)}H.uint8ArrayToBuffer=e;let r=class{constructor(f,b){if(!Number.isInteger(f))throw new TypeError("span must be an integer");this.span=f,this.property=b}makeDestinationObject(){return{}}getSpan(f,b){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(f){const b=Object.create(this.constructor.prototype);return Object.assign(b,this),b.property=f,b}fromArray(f){}};H.Layout=r;function s(c,f){return f.property?c+"["+f.property+"]":c}H.nameWithProperty=s;function i(c,f){if(typeof c!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(c,"layout_"))throw new Error("Class is already bound to a layout");if(!(f&&f instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(f,"boundConstructor_"))throw new Error("layout is already bound to a constructor");c.layout_=f,f.boundConstructor_=c,f.makeDestinationObject=()=>new c,Object.defineProperty(c.prototype,"encode",{value(b,_){return f.encode(this,b,_)},writable:!0}),Object.defineProperty(c,"decode",{value(b,_){return f.decode(b,_)},writable:!0})}H.bindConstructorLayout=i;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}H.ExternalLayout=o;class u extends o{constructor(f=1,b){if(!Number.isInteger(f)||0>=f)throw new TypeError("elementSpan must be a (positive) integer");super(-1,b),this.elementSpan=f}isCount(){return!0}decode(f,b=0){t(f);const _=f.length-b;return Math.floor(_/this.elementSpan)}encode(f,b,_){return 0}}H.GreedyCount=u;class p extends o{constructor(f,b=0,_){if(!(f instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(b))throw new TypeError("offset must be integer or undefined");super(f.span,_||f.property),this.layout=f,this.offset=b}isCount(){return this.layout instanceof S||this.layout instanceof k}decode(f,b=0){return this.layout.decode(f,b+this.offset)}encode(f,b,_=0){return this.layout.encode(f,b,_+this.offset)}}H.OffsetLayout=p;class S extends r{constructor(f,b){if(super(f,b),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,b=0){return e(f).readUIntLE(b,this.span)}encode(f,b,_=0){return e(b).writeUIntLE(f,_,this.span),this.span}}H.UInt=S;class k extends r{constructor(f,b){if(super(f,b),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,b=0){return e(f).readUIntBE(b,this.span)}encode(f,b,_=0){return e(b).writeUIntBE(f,_,this.span),this.span}}H.UIntBE=k;class T extends r{constructor(f,b){if(super(f,b),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,b=0){return e(f).readIntLE(b,this.span)}encode(f,b,_=0){return e(b).writeIntLE(f,_,this.span),this.span}}H.Int=T;class M extends r{constructor(f,b){if(super(f,b),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,b=0){return e(f).readIntBE(b,this.span)}encode(f,b,_=0){return e(b).writeIntBE(f,_,this.span),this.span}}H.IntBE=M;const B=Math.pow(2,32);function F(c){const f=Math.floor(c/B),b=c-f*B;return{hi32:f,lo32:b}}function L(c,f){return c*B+f}class R extends r{constructor(f){super(8,f)}decode(f,b=0){const _=e(f),P=_.readUInt32LE(b),j=_.readUInt32LE(b+4);return L(j,P)}encode(f,b,_=0){const P=F(f),j=e(b);return j.writeUInt32LE(P.lo32,_),j.writeUInt32LE(P.hi32,_+4),8}}H.NearUInt64=R;class $ extends r{constructor(f){super(8,f)}decode(f,b=0){const _=e(f),P=_.readUInt32BE(b),j=_.readUInt32BE(b+4);return L(P,j)}encode(f,b,_=0){const P=F(f),j=e(b);return j.writeUInt32BE(P.hi32,_),j.writeUInt32BE(P.lo32,_+4),8}}H.NearUInt64BE=$;class V extends r{constructor(f){super(8,f)}decode(f,b=0){const _=e(f),P=_.readUInt32LE(b),j=_.readInt32LE(b+4);return L(j,P)}encode(f,b,_=0){const P=F(f),j=e(b);return j.writeUInt32LE(P.lo32,_),j.writeInt32LE(P.hi32,_+4),8}}H.NearInt64=V;class G extends r{constructor(f){super(8,f)}decode(f,b=0){const _=e(f),P=_.readInt32BE(b),j=_.readUInt32BE(b+4);return L(P,j)}encode(f,b,_=0){const P=F(f),j=e(b);return j.writeInt32BE(P.hi32,_),j.writeUInt32BE(P.lo32,_+4),8}}H.NearInt64BE=G;class Q extends r{constructor(f){super(4,f)}decode(f,b=0){return e(f).readFloatLE(b)}encode(f,b,_=0){return e(b).writeFloatLE(f,_),4}}H.Float=Q;class X extends r{constructor(f){super(4,f)}decode(f,b=0){return e(f).readFloatBE(b)}encode(f,b,_=0){return e(b).writeFloatBE(f,_),4}}H.FloatBE=X;class Y extends r{constructor(f){super(8,f)}decode(f,b=0){return e(f).readDoubleLE(b)}encode(f,b,_=0){return e(b).writeDoubleLE(f,_),8}}H.Double=Y;class at extends r{constructor(f){super(8,f)}decode(f,b=0){return e(f).readDoubleBE(b)}encode(f,b,_=0){return e(b).writeDoubleBE(f,_),8}}H.DoubleBE=at;class ot extends r{constructor(f,b,_){if(!(f instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(b instanceof o&&b.isCount()||Number.isInteger(b)&&0<=b))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let P=-1;!(b instanceof o)&&0<f.span&&(P=b*f.span),super(P,_),this.elementLayout=f,this.count=b}getSpan(f,b=0){if(0<=this.span)return this.span;let _=0,P=this.count;if(P instanceof o&&(P=P.decode(f,b)),0<this.elementLayout.span)_=P*this.elementLayout.span;else{let j=0;for(;j<P;)_+=this.elementLayout.getSpan(f,b+_),++j}return _}decode(f,b=0){const _=[];let P=0,j=this.count;for(j instanceof o&&(j=j.decode(f,b));P<j;)_.push(this.elementLayout.decode(f,b)),b+=this.elementLayout.getSpan(f,b),P+=1;return _}encode(f,b,_=0){const P=this.elementLayout,j=f.reduce((et,st)=>et+P.encode(st,b,_+et),0);return this.count instanceof o&&this.count.encode(f.length,b,_),j}}H.Sequence=ot;class K extends r{constructor(f,b,_){if(!(Array.isArray(f)&&f.reduce((j,et)=>j&&et instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof b=="boolean"&&_===void 0&&(_=b,b=void 0);for(const j of f)if(0>j.span&&j.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let P=-1;try{P=f.reduce((j,et)=>j+et.getSpan(),0)}catch{}super(P,b),this.fields=f,this.decodePrefixes=!!_}getSpan(f,b=0){if(0<=this.span)return this.span;let _=0;try{_=this.fields.reduce((P,j)=>{const et=j.getSpan(f,b);return b+=et,P+et},0)}catch{throw new RangeError("indeterminate span")}return _}decode(f,b=0){t(f);const _=this.makeDestinationObject();for(const P of this.fields)if(P.property!==void 0&&(_[P.property]=P.decode(f,b)),b+=P.getSpan(f,b),this.decodePrefixes&&f.length===b)break;return _}encode(f,b,_=0){const P=_;let j=0,et=0;for(const st of this.fields){let Rt=st.span;if(et=0<Rt?Rt:0,st.property!==void 0){const yt=f[st.property];yt!==void 0&&(et=st.encode(yt,b,_),0>Rt&&(Rt=st.getSpan(b,_)))}j=_,_+=Rt}return j+et-P}fromArray(f){const b=this.makeDestinationObject();for(const _ of this.fields)_.property!==void 0&&0<f.length&&(b[_.property]=f.shift());return b}layoutFor(f){if(typeof f!="string")throw new TypeError("property must be string");for(const b of this.fields)if(b.property===f)return b}offsetOf(f){if(typeof f!="string")throw new TypeError("property must be string");let b=0;for(const _ of this.fields){if(_.property===f)return b;0>_.span?b=-1:0<=b&&(b+=_.span)}}}H.Structure=K;class I{constructor(f){this.property=f}decode(f,b){throw new Error("UnionDiscriminator is abstract")}encode(f,b,_){throw new Error("UnionDiscriminator is abstract")}}H.UnionDiscriminator=I;class C extends I{constructor(f,b){if(!(f instanceof o&&f.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(b||f.property||"variant"),this.layout=f}decode(f,b){return this.layout.decode(f,b)}encode(f,b,_){return this.layout.encode(f,b,_)}}H.UnionLayoutDiscriminator=C;class q extends r{constructor(f,b,_){let P;if(f instanceof S||f instanceof k)P=new C(new p(f));else if(f instanceof o&&f.isCount())P=new C(f);else if(f instanceof I)P=f;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(b===void 0&&(b=null),!(b===null||b instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(b!==null){if(0>b.span)throw new Error("defaultLayout must have constant span");b.property===void 0&&(b=b.replicate("content"))}let j=-1;b&&(j=b.span,0<=j&&(f instanceof S||f instanceof k)&&(j+=P.layout.span)),super(j,_),this.discriminator=P,this.usesPrefixDiscriminator=f instanceof S||f instanceof k,this.defaultLayout=b,this.registry={};let et=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(st){return et(st)},this.configGetSourceVariant=function(st){et=st.bind(this)}}getSpan(f,b=0){if(0<=this.span)return this.span;const _=this.getVariant(f,b);if(!_)throw new Error("unable to determine span for unrecognized variant");return _.getSpan(f,b)}defaultGetSourceVariant(f){if(Object.prototype.hasOwnProperty.call(f,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(f,this.defaultLayout.property))return;const b=this.registry[f[this.discriminator.property]];if(b&&(!b.layout||b.property&&Object.prototype.hasOwnProperty.call(f,b.property)))return b}else for(const b in this.registry){const _=this.registry[b];if(_.property&&Object.prototype.hasOwnProperty.call(f,_.property))return _}throw new Error("unable to infer src variant")}decode(f,b=0){let _;const P=this.discriminator,j=P.decode(f,b),et=this.registry[j];if(et===void 0){const st=this.defaultLayout;let Rt=0;this.usesPrefixDiscriminator&&(Rt=P.layout.span),_=this.makeDestinationObject(),_[P.property]=j,_[st.property]=st.decode(f,b+Rt)}else _=et.decode(f,b);return _}encode(f,b,_=0){const P=this.getSourceVariant(f);if(P===void 0){const j=this.discriminator,et=this.defaultLayout;let st=0;return this.usesPrefixDiscriminator&&(st=j.layout.span),j.encode(f[j.property],b,_),st+et.encode(f[et.property],b,_+st)}return P.encode(f,b,_)}addVariant(f,b,_){const P=new w(this,f,b,_);return this.registry[f]=P,P}getVariant(f,b=0){let _;return f instanceof Uint8Array?_=this.discriminator.decode(f,b):_=f,this.registry[_]}}H.Union=q;class w extends r{constructor(f,b,_,P){if(!(f instanceof q))throw new TypeError("union must be a Union");if(!Number.isInteger(b)||0>b)throw new TypeError("variant must be a (non-negative) integer");if(typeof _=="string"&&P===void 0&&(P=_,_=null),_){if(!(_ instanceof r))throw new TypeError("layout must be a Layout");if(f.defaultLayout!==null&&0<=_.span&&_.span>f.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof P!="string")throw new TypeError("variant must have a String property")}let j=f.span;0>f.span&&(j=_?_.span:0,0<=j&&f.usesPrefixDiscriminator&&(j+=f.discriminator.layout.span)),super(j,P),this.union=f,this.variant=b,this.layout=_||null}getSpan(f,b=0){if(0<=this.span)return this.span;let _=0;this.union.usesPrefixDiscriminator&&(_=this.union.discriminator.layout.span);let P=0;return this.layout&&(P=this.layout.getSpan(f,b+_)),_+P}decode(f,b=0){const _=this.makeDestinationObject();if(this!==this.union.getVariant(f,b))throw new Error("variant mismatch");let P=0;return this.union.usesPrefixDiscriminator&&(P=this.union.discriminator.layout.span),this.layout?_[this.property]=this.layout.decode(f,b+P):this.property?_[this.property]=!0:this.union.usesPrefixDiscriminator&&(_[this.union.discriminator.property]=this.variant),_}encode(f,b,_=0){let P=0;if(this.union.usesPrefixDiscriminator&&(P=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(f,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,b,_);let j=P;if(this.layout&&(this.layout.encode(f[this.property],b,_+P),j+=this.layout.getSpan(b,_+P),0<=this.union.span&&j>this.union.span))throw new Error("encoded variant overruns containing union");return j}fromArray(f){if(this.layout)return this.layout.fromArray(f)}}H.VariantLayout=w;function a(c){return 0>c&&(c+=4294967296),c}class d extends r{constructor(f,b,_){if(!(f instanceof S||f instanceof k))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof b=="string"&&_===void 0&&(_=b,b=!1),4<f.span)throw new RangeError("word cannot exceed 32 bits");super(f.span,_),this.word=f,this.msb=!!b,this.fields=[];let P=0;this._packedSetValue=function(j){return P=a(j),this},this._packedGetValue=function(){return P}}decode(f,b=0){const _=this.makeDestinationObject(),P=this.word.decode(f,b);this._packedSetValue(P);for(const j of this.fields)j.property!==void 0&&(_[j.property]=j.decode(f));return _}encode(f,b,_=0){const P=this.word.decode(b,_);this._packedSetValue(P);for(const j of this.fields)if(j.property!==void 0){const et=f[j.property];et!==void 0&&j.encode(et)}return this.word.encode(this._packedGetValue(),b,_)}addField(f,b){const _=new g(this,f,b);return this.fields.push(_),_}addBoolean(f){const b=new y(this,f);return this.fields.push(b),b}fieldFor(f){if(typeof f!="string")throw new TypeError("property must be string");for(const b of this.fields)if(b.property===f)return b}}H.BitStructure=d;class g{constructor(f,b,_){if(!(f instanceof d))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(b)||0>=b)throw new TypeError("bits must be positive integer");const P=8*f.span,j=f.fields.reduce((et,st)=>et+st.bits,0);if(b+j>P)throw new Error("bits too long for span remainder ("+(P-j)+" of "+P+" remain)");this.container=f,this.bits=b,this.valueMask=(1<<b)-1,b===32&&(this.valueMask=4294967295),this.start=j,this.container.msb&&(this.start=P-j-b),this.wordMask=a(this.valueMask<<this.start),this.property=_}decode(f,b){const _=this.container._packedGetValue();return a(_&this.wordMask)>>>this.start}encode(f){if(typeof f!="number"||!Number.isInteger(f)||f!==a(f&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const b=this.container._packedGetValue(),_=a(f<<this.start);this.container._packedSetValue(a(b&~this.wordMask)|_)}}H.BitField=g;class y extends g{constructor(f,b){super(f,1,b)}decode(f,b){return!!super.decode(f,b)}encode(f){typeof f=="boolean"&&(f=+f),super.encode(f)}}H.Boolean=y;class x extends r{constructor(f,b){if(!(f instanceof o&&f.isCount()||Number.isInteger(f)&&0<=f))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let _=-1;f instanceof o||(_=f),super(_,b),this.length=f}getSpan(f,b){let _=this.span;return 0>_&&(_=this.length.decode(f,b)),_}decode(f,b=0){let _=this.span;return 0>_&&(_=this.length.decode(f,b)),e(f).slice(b,b+_)}encode(f,b,_){let P=this.length;if(this.length instanceof o&&(P=f.length),!(f instanceof Uint8Array&&P===f.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+P+") Uint8Array as src");if(_+P>b.length)throw new RangeError("encoding overruns Uint8Array");const j=e(f);return e(b).write(j.toString("hex"),_,P,"hex"),this.length instanceof o&&this.length.encode(P,b,_),P}}H.Blob=x;class A extends r{constructor(f){super(-1,f)}getSpan(f,b=0){t(f);let _=b;for(;_<f.length&&f[_]!==0;)_+=1;return 1+_-b}decode(f,b=0){const _=this.getSpan(f,b);return e(f).slice(b,b+_-1).toString("utf-8")}encode(f,b,_=0){typeof f!="string"&&(f=String(f));const P=n.Buffer.from(f,"utf8"),j=P.length;if(_+j>b.length)throw new RangeError("encoding overruns Buffer");const et=e(b);return P.copy(et,_),et[_+j]=0,j+1}}H.CString=A;class N extends r{constructor(f,b){if(typeof f=="string"&&b===void 0&&(b=f,f=void 0),f===void 0)f=-1;else if(!Number.isInteger(f))throw new TypeError("maxSpan must be an integer");super(-1,b),this.maxSpan=f}getSpan(f,b=0){return t(f),f.length-b}decode(f,b=0){const _=this.getSpan(f,b);if(0<=this.maxSpan&&this.maxSpan<_)throw new RangeError("text length exceeds maxSpan");return e(f).slice(b,b+_).toString("utf-8")}encode(f,b,_=0){typeof f!="string"&&(f=String(f));const P=n.Buffer.from(f,"utf8"),j=P.length;if(0<=this.maxSpan&&this.maxSpan<j)throw new RangeError("text length exceeds maxSpan");if(_+j>b.length)throw new RangeError("encoding overruns Buffer");return P.copy(e(b),_),j}}H.UTF8=N;class v extends r{constructor(f,b){super(0,b),this.value=f}decode(f,b){return this.value}encode(f,b,_){return 0}}return H.Constant=v,H.greedy=(c,f)=>new u(c,f),H.offset=(c,f,b)=>new p(c,f,b),H.u8=c=>new S(1,c),H.u16=c=>new S(2,c),H.u24=c=>new S(3,c),H.u32=c=>new S(4,c),H.u40=c=>new S(5,c),H.u48=c=>new S(6,c),H.nu64=c=>new R(c),H.u16be=c=>new k(2,c),H.u24be=c=>new k(3,c),H.u32be=c=>new k(4,c),H.u40be=c=>new k(5,c),H.u48be=c=>new k(6,c),H.nu64be=c=>new $(c),H.s8=c=>new T(1,c),H.s16=c=>new T(2,c),H.s24=c=>new T(3,c),H.s32=c=>new T(4,c),H.s40=c=>new T(5,c),H.s48=c=>new T(6,c),H.ns64=c=>new V(c),H.s16be=c=>new M(2,c),H.s24be=c=>new M(3,c),H.s32be=c=>new M(4,c),H.s40be=c=>new M(5,c),H.s48be=c=>new M(6,c),H.ns64be=c=>new G(c),H.f32=c=>new Q(c),H.f32be=c=>new X(c),H.f64=c=>new Y(c),H.f64be=c=>new at(c),H.struct=(c,f,b)=>new K(c,f,b),H.bits=(c,f,b)=>new d(c,f,b),H.seq=(c,f,b)=>new ot(c,f,b),H.union=(c,f,b)=>new q(c,f,b),H.unionLayoutDiscriminator=(c,f)=>new C(c,f),H.blob=(c,f)=>new x(c,f),H.cstr=c=>new A(c),H.utf8=(c,f)=>new N(c,f),H.constant=(c,f)=>new v(c,f),H}var U=Ga(),Va=8078e3,Za=8078001,Ya=8078004,Xa=8078005,Ja=8078006,Qa=8078011;function Xs(n){return Array.isArray(n)?"%5B"+n.map(Xs).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function tc([n,t]){return`${n}=${Xs(t)}`}function ec(n){const t=Object.entries(n).map(tc).join("&");return btoa(t)}function rc(n,t={}){{let e=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(t).length&&(e+=` '${ec(t)}'`),`${e}\``}}var ur=class extends Error{cause=this.cause;context;constructor(...[n,t]){let e,r;if(t){const{cause:i,...o}=t;i&&(r={cause:i}),Object.keys(o).length>0&&(e=o)}const s=rc(n,e);super(s,r),this.context={__code:n,...e},this.name="SolanaError"}};function nc(n,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(n)}function ic(n){return Object.freeze({...n,encode:t=>{const e=new Uint8Array(nc(t,n));return n.write(t,e,0),e}})}function sc(n){return Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]})}function ir(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function oc(n,t){if(ir(n)!==ir(t))throw new ur(Ya);if(ir(n)&&ir(t)&&n.fixedSize!==t.fixedSize)throw new ur(Xa,{decoderFixedSize:t.fixedSize,encoderFixedSize:n.fixedSize});if(!ir(n)&&!ir(t)&&n.maxSize!==t.maxSize)throw new ur(Ja,{decoderMaxSize:t.maxSize,encoderMaxSize:n.maxSize});return{...t,...n,decode:t.decode,encode:n.encode,read:t.read,write:n.write}}function ac(n,t,e=0){if(t.length-e<=0)throw new ur(Va,{codecDescription:n})}function cc(n,t,e,r=0){const s=e.length-r;if(s<t)throw new ur(Za,{bytesLength:s,codecDescription:n,expected:t})}function uc(n,t,e,r){if(r<t||r>e)throw new ur(Qa,{codecDescription:n,max:e,min:t,value:r})}function Js(n){return n?.endian!==1}function fc(n){return ic({fixedSize:n.size,write(t,e,r){n.range&&uc(n.name,n.range[0],n.range[1],t);const s=new ArrayBuffer(n.size);return n.set(new DataView(s),t,Js(n.config)),e.set(new Uint8Array(s),r),r+n.size}})}function lc(n){return sc({fixedSize:n.size,read(t,e=0){ac(n.name,t,e),cc(n.name,n.size,t,e);const r=new DataView(hc(t,e,n.size));return[n.get(r,Js(n.config)),e+n.size]}})}function hc(n,t,e){const r=n.byteOffset+(t??0),s=e??n.byteLength;return n.buffer.slice(r,r+s)}var dc=(n={})=>fc({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,r)=>t.setBigUint64(0,BigInt(e),r),size:8}),pc=(n={})=>lc({config:n,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),gc=(n={})=>oc(dc(n),pc(n));class mc extends TypeError{constructor(t,e){let r;const{message:s,explanation:i,...o}=t,{path:u}=t,p=u.length===0?s:`At path: ${u.join(".")} -- ${s}`;super(i??p),i!=null&&(this.cause=p),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function yc(n){return Ir(n)&&typeof n[Symbol.iterator]=="function"}function Ir(n){return typeof n=="object"&&n!=null}function tn(n){return Ir(n)&&!Array.isArray(n)}function Be(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function wc(n){const{done:t,value:e}=n.next();return t?void 0:e}function bc(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:o}=e,{refinement:u,message:p=`Expected a value of type \`${o}\`${u?` with refinement \`${u}\``:""}, but received: \`${Be(r)}\``}=n;return{value:r,type:o,refinement:u,key:s[s.length-1],path:s,branch:i,...n,message:p}}function*ns(n,t,e,r){yc(n)||(n=[n]);for(const s of n){const i=bc(s,t,e,r);i&&(yield i)}}function*wi(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:o=!1}=e,u={path:r,branch:s,mask:o};i&&(n=t.coercer(n,u));let p="valid";for(const S of t.validator(n,u))S.explanation=e.message,p="not_valid",yield[S,void 0];for(let[S,k,T]of t.entries(n,u)){const M=wi(k,T,{path:S===void 0?r:[...r,S],branch:S===void 0?s:[...s,k],coerce:i,mask:o,message:e.message});for(const B of M)B[0]?(p=B[0].refinement!=null?"not_refined":"not_valid",yield[B[0],void 0]):i&&(k=B[1],S===void 0?n=k:n instanceof Map?n.set(S,k):n instanceof Set?n.add(k):Ir(n)&&(k!==void 0||S in n)&&(n[S]=k))}if(p!=="not_valid")for(const S of t.refiner(n,u))S.explanation=e.message,p="not_refined",yield[S,void 0];p==="valid"&&(yield[void 0,n])}let Me=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:o=p=>p,entries:u=function*(){}}=t;this.type=e,this.schema=r,this.entries=u,this.coercer=o,s?this.validator=(p,S)=>{const k=s(p,S);return ns(k,S,this,p)}:this.validator=()=>[],i?this.refiner=(p,S)=>{const k=i(p,S);return ns(k,S,this,p)}:this.refiner=()=>[]}assert(t,e){return vc(t,this,e)}create(t,e){return tt(t,this,e)}is(t){return Qs(t,this)}mask(t,e){return xc(t,this,e)}validate(t,e={}){return Mr(t,this,e)}};function vc(n,t,e){const r=Mr(n,t,{message:e});if(r[0])throw r[0]}function tt(n,t,e){const r=Mr(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function xc(n,t,e){const r=Mr(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function Qs(n,t){return!Mr(n,t)[0]}function Mr(n,t,e={}){const r=wi(n,t,e),s=wc(r);return s[0]?[new mc(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Je(n,t){return new Me({type:n,schema:null,validator:t})}function Sc(){return Je("any",()=>!0)}function rt(n){return new Me({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Be(t)}`}})}function Ie(){return Je("boolean",n=>typeof n=="boolean")}function bi(n){return Je("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${Be(t)}`)}function It(n){const t=Be(n),e=typeof n;return new Me({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${Be(r)}`}})}function Ec(){return Je("never",()=>!1)}function nt(n){return new Me({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function z(){return Je("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${Be(n)}`)}function ct(n){return new Me({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function to(n,t){return new Me({type:"record",schema:null,*entries(e){if(Ir(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return tn(e)||`Expected an object, but received: ${Be(e)}`},coercer(e){return tn(e)?{...e}:e}})}function J(){return Je("string",n=>typeof n=="string"||`Expected a string, but received: ${Be(n)}`)}function vi(n){const t=Ec();return new Me({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Be(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function Z(n){const t=Object.keys(n);return new Me({type:"type",schema:n,*entries(e){if(Ir(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return tn(e)||`Expected an object, but received: ${Be(e)}`},coercer(e){return tn(e)?{...e}:e}})}function de(n){const t=n.map(e=>e.type).join(" | ");return new Me({type:"union",schema:null,coercer(e,r){for(const s of n){const[i,o]=s.validate(e,{coerce:!0,mask:r.mask});if(!i)return o}return e},validator(e,r){const s=[];for(const i of n){const[...o]=wi(e,i,r),[u]=o;if(u[0])for(const[p]of o)p&&s.push(p);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Be(e)}`,...s]}})}function mr(){return Je("unknown",()=>!0)}function Rr(n,t,e){return new Me({...n,coercer:(r,s)=>Qs(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}var qr,Bc=new Uint8Array(16);function eo(){if(!qr&&(qr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!qr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return qr(Bc)}const _c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function fn(n){return typeof n=="string"&&_c.test(n)}var ne=[];for(var jn=0;jn<256;++jn)ne.push((jn+256).toString(16).substr(1));function ln(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ne[n[t+0]]+ne[n[t+1]]+ne[n[t+2]]+ne[n[t+3]]+"-"+ne[n[t+4]]+ne[n[t+5]]+"-"+ne[n[t+6]]+ne[n[t+7]]+"-"+ne[n[t+8]]+ne[n[t+9]]+"-"+ne[n[t+10]]+ne[n[t+11]]+ne[n[t+12]]+ne[n[t+13]]+ne[n[t+14]]+ne[n[t+15]]).toLowerCase();if(!fn(e))throw TypeError("Stringified UUID is invalid");return e}var is,Gn,Vn=0,Zn=0;function Ac(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||is,o=n.clockseq!==void 0?n.clockseq:Gn;if(i==null||o==null){var u=n.random||(n.rng||eo)();i==null&&(i=is=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),o==null&&(o=Gn=(u[6]<<8|u[7])&16383)}var p=n.msecs!==void 0?n.msecs:Date.now(),S=n.nsecs!==void 0?n.nsecs:Zn+1,k=p-Vn+(S-Zn)/1e4;if(k<0&&n.clockseq===void 0&&(o=o+1&16383),(k<0||p>Vn)&&n.nsecs===void 0&&(S=0),S>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Vn=p,Zn=S,Gn=o,p+=122192928e5;var T=((p&268435455)*1e4+S)%4294967296;s[r++]=T>>>24&255,s[r++]=T>>>16&255,s[r++]=T>>>8&255,s[r++]=T&255;var M=p/4294967296*1e4&268435455;s[r++]=M>>>8&255,s[r++]=M&255,s[r++]=M>>>24&15|16,s[r++]=M>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var B=0;B<6;++B)s[r+B]=i[B];return t||ln(s)}function ro(n){if(!fn(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function kc(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var Ic="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Mc="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function no(n,t,e){function r(s,i,o,u){if(typeof s=="string"&&(s=kc(s)),typeof i=="string"&&(i=ro(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var p=new Uint8Array(16+s.length);if(p.set(i),p.set(s,i.length),p=e(p),p[6]=p[6]&15|t,p[8]=p[8]&63|128,o){u=u||0;for(var S=0;S<16;++S)o[u+S]=p[S];return o}return ln(p)}try{r.name=n}catch{}return r.DNS=Ic,r.URL=Mc,r}function Rc(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return Tc(Lc(Cc(n),n.length*8))}function Tc(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(o)}return t}function io(n){return(n+64>>>9<<4)+14+1}function Lc(n,t){n[t>>5]|=128<<t%32,n[io(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<n.length;o+=16){var u=e,p=r,S=s,k=i;e=ce(e,r,s,i,n[o],7,-680876936),i=ce(i,e,r,s,n[o+1],12,-389564586),s=ce(s,i,e,r,n[o+2],17,606105819),r=ce(r,s,i,e,n[o+3],22,-1044525330),e=ce(e,r,s,i,n[o+4],7,-176418897),i=ce(i,e,r,s,n[o+5],12,1200080426),s=ce(s,i,e,r,n[o+6],17,-1473231341),r=ce(r,s,i,e,n[o+7],22,-45705983),e=ce(e,r,s,i,n[o+8],7,1770035416),i=ce(i,e,r,s,n[o+9],12,-1958414417),s=ce(s,i,e,r,n[o+10],17,-42063),r=ce(r,s,i,e,n[o+11],22,-1990404162),e=ce(e,r,s,i,n[o+12],7,1804603682),i=ce(i,e,r,s,n[o+13],12,-40341101),s=ce(s,i,e,r,n[o+14],17,-1502002290),r=ce(r,s,i,e,n[o+15],22,1236535329),e=ue(e,r,s,i,n[o+1],5,-165796510),i=ue(i,e,r,s,n[o+6],9,-1069501632),s=ue(s,i,e,r,n[o+11],14,643717713),r=ue(r,s,i,e,n[o],20,-373897302),e=ue(e,r,s,i,n[o+5],5,-701558691),i=ue(i,e,r,s,n[o+10],9,38016083),s=ue(s,i,e,r,n[o+15],14,-660478335),r=ue(r,s,i,e,n[o+4],20,-405537848),e=ue(e,r,s,i,n[o+9],5,568446438),i=ue(i,e,r,s,n[o+14],9,-1019803690),s=ue(s,i,e,r,n[o+3],14,-187363961),r=ue(r,s,i,e,n[o+8],20,1163531501),e=ue(e,r,s,i,n[o+13],5,-1444681467),i=ue(i,e,r,s,n[o+2],9,-51403784),s=ue(s,i,e,r,n[o+7],14,1735328473),r=ue(r,s,i,e,n[o+12],20,-1926607734),e=fe(e,r,s,i,n[o+5],4,-378558),i=fe(i,e,r,s,n[o+8],11,-2022574463),s=fe(s,i,e,r,n[o+11],16,1839030562),r=fe(r,s,i,e,n[o+14],23,-35309556),e=fe(e,r,s,i,n[o+1],4,-1530992060),i=fe(i,e,r,s,n[o+4],11,1272893353),s=fe(s,i,e,r,n[o+7],16,-155497632),r=fe(r,s,i,e,n[o+10],23,-1094730640),e=fe(e,r,s,i,n[o+13],4,681279174),i=fe(i,e,r,s,n[o],11,-358537222),s=fe(s,i,e,r,n[o+3],16,-722521979),r=fe(r,s,i,e,n[o+6],23,76029189),e=fe(e,r,s,i,n[o+9],4,-640364487),i=fe(i,e,r,s,n[o+12],11,-421815835),s=fe(s,i,e,r,n[o+15],16,530742520),r=fe(r,s,i,e,n[o+2],23,-995338651),e=le(e,r,s,i,n[o],6,-198630844),i=le(i,e,r,s,n[o+7],10,1126891415),s=le(s,i,e,r,n[o+14],15,-1416354905),r=le(r,s,i,e,n[o+5],21,-57434055),e=le(e,r,s,i,n[o+12],6,1700485571),i=le(i,e,r,s,n[o+3],10,-1894986606),s=le(s,i,e,r,n[o+10],15,-1051523),r=le(r,s,i,e,n[o+1],21,-2054922799),e=le(e,r,s,i,n[o+8],6,1873313359),i=le(i,e,r,s,n[o+15],10,-30611744),s=le(s,i,e,r,n[o+6],15,-1560198380),r=le(r,s,i,e,n[o+13],21,1309151649),e=le(e,r,s,i,n[o+4],6,-145523070),i=le(i,e,r,s,n[o+11],10,-1120210379),s=le(s,i,e,r,n[o+2],15,718787259),r=le(r,s,i,e,n[o+9],21,-343485551),e=He(e,u),r=He(r,p),s=He(s,S),i=He(i,k)}return[e,r,s,i]}function Cc(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(io(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function He(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function Uc(n,t){return n<<t|n>>>32-t}function hn(n,t,e,r,s,i){return He(Uc(He(He(t,n),He(r,i)),s),e)}function ce(n,t,e,r,s,i,o){return hn(t&e|~t&r,n,t,s,i,o)}function ue(n,t,e,r,s,i,o){return hn(t&r|e&~r,n,t,s,i,o)}function fe(n,t,e,r,s,i,o){return hn(t^e^r,n,t,s,i,o)}function le(n,t,e,r,s,i,o){return hn(e^(t|~r),n,t,s,i,o)}var Fc=no("v3",48,Rc);function Nc(n,t,e){n=n||{};var r=n.random||(n.rng||eo)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return ln(r)}function Oc(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function Yn(n,t){return n<<t|n>>>32-t}function Pc(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,o=Math.ceil(i/16),u=new Array(o),p=0;p<o;++p){for(var S=new Uint32Array(16),k=0;k<16;++k)S[k]=n[p*64+k*4]<<24|n[p*64+k*4+1]<<16|n[p*64+k*4+2]<<8|n[p*64+k*4+3];u[p]=S}u[o-1][14]=(n.length-1)*8/Math.pow(2,32),u[o-1][14]=Math.floor(u[o-1][14]),u[o-1][15]=(n.length-1)*8&4294967295;for(var T=0;T<o;++T){for(var M=new Uint32Array(80),B=0;B<16;++B)M[B]=u[T][B];for(var F=16;F<80;++F)M[F]=Yn(M[F-3]^M[F-8]^M[F-14]^M[F-16],1);for(var L=e[0],R=e[1],$=e[2],V=e[3],G=e[4],Q=0;Q<80;++Q){var X=Math.floor(Q/20),Y=Yn(L,5)+Oc(X,R,$,V)+G+t[X]+M[Q]>>>0;G=V,V=$,$=Yn(R,30)>>>0,R=L,L=Y}e[0]=e[0]+L>>>0,e[1]=e[1]+R>>>0,e[2]=e[2]+$>>>0,e[3]=e[3]+V>>>0,e[4]=e[4]+G>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var qc=no("v5",80,Pc);const Dc="00000000-0000-0000-0000-000000000000";function zc(n){if(!fn(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const Hc=Object.freeze(Object.defineProperty({__proto__:null,NIL:Dc,parse:ro,stringify:ln,v1:Ac,v3:Fc,v4:Nc,v5:qc,validate:fn,version:zc},Symbol.toStringTag,{value:"Module"})),so=li(Hc);var Xn,ss;function $c(){if(ss)return Xn;ss=1;const n=so.v4;return Xn=function(e,r,s,i){if(typeof e!="string")throw new TypeError(e+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const u={method:e};if(o===2&&(u.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");u.params=r}if(typeof s>"u"){const p=typeof i.generator=="function"?i.generator:function(){return n()};u.id=p(u,i)}else o===2&&s===null?i.notificationIdNull&&(u.id=null):u.id=s;return u},Xn}var Jn,os;function Kc(){if(os)return Jn;os=1;const n=so.v4,t=$c(),e=function(r,s){if(!(this instanceof e))return new e(r,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return n()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=r};return Jn=e,e.prototype.request=function(r,s,i,o){const u=this;let p=null;const S=Array.isArray(r)&&typeof s=="function";if(this.options.version===1&&S)throw new TypeError("JSON-RPC 1.0 does not support batching");if(S||!S&&r&&typeof r=="object"&&typeof s=="function")o=s,p=r;else{typeof i=="function"&&(o=i,i=void 0);const M=typeof o=="function";try{p=t(r,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(B){if(M)return o(B);throw B}if(!M)return p}let T;try{T=JSON.stringify(p,this.options.replacer)}catch(M){return o(M)}return this.callServer(T,function(M,B){u._parseResponse(M,B,o)}),p},e.prototype._parseResponse=function(r,s,i){if(r){i(r);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(u){return i(u)}if(i.length===3)if(Array.isArray(o)){const u=function(S){return typeof S.error<"u"},p=function(S){return!u(S)};return i(null,o.filter(u),o.filter(p))}else return i(null,o.error,o.result);i(null,o)},Jn}var Wc=Kc();const jc=sn(Wc);var Qn={exports:{}},as;function Gc(){return as||(as=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(p,S,k){this.fn=p,this.context=S,this.once=k||!1}function i(p,S,k,T,M){if(typeof k!="function")throw new TypeError("The listener must be a function");var B=new s(k,T||p,M),F=e?e+S:S;return p._events[F]?p._events[F].fn?p._events[F]=[p._events[F],B]:p._events[F].push(B):(p._events[F]=B,p._eventsCount++),p}function o(p,S){--p._eventsCount===0?p._events=new r:delete p._events[S]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var S=[],k,T;if(this._eventsCount===0)return S;for(T in k=this._events)t.call(k,T)&&S.push(e?T.slice(1):T);return Object.getOwnPropertySymbols?S.concat(Object.getOwnPropertySymbols(k)):S},u.prototype.listeners=function(S){var k=e?e+S:S,T=this._events[k];if(!T)return[];if(T.fn)return[T.fn];for(var M=0,B=T.length,F=new Array(B);M<B;M++)F[M]=T[M].fn;return F},u.prototype.listenerCount=function(S){var k=e?e+S:S,T=this._events[k];return T?T.fn?1:T.length:0},u.prototype.emit=function(S,k,T,M,B,F){var L=e?e+S:S;if(!this._events[L])return!1;var R=this._events[L],$=arguments.length,V,G;if(R.fn){switch(R.once&&this.removeListener(S,R.fn,void 0,!0),$){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,k),!0;case 3:return R.fn.call(R.context,k,T),!0;case 4:return R.fn.call(R.context,k,T,M),!0;case 5:return R.fn.call(R.context,k,T,M,B),!0;case 6:return R.fn.call(R.context,k,T,M,B,F),!0}for(G=1,V=new Array($-1);G<$;G++)V[G-1]=arguments[G];R.fn.apply(R.context,V)}else{var Q=R.length,X;for(G=0;G<Q;G++)switch(R[G].once&&this.removeListener(S,R[G].fn,void 0,!0),$){case 1:R[G].fn.call(R[G].context);break;case 2:R[G].fn.call(R[G].context,k);break;case 3:R[G].fn.call(R[G].context,k,T);break;case 4:R[G].fn.call(R[G].context,k,T,M);break;default:if(!V)for(X=1,V=new Array($-1);X<$;X++)V[X-1]=arguments[X];R[G].fn.apply(R[G].context,V)}}return!0},u.prototype.on=function(S,k,T){return i(this,S,k,T,!1)},u.prototype.once=function(S,k,T){return i(this,S,k,T,!0)},u.prototype.removeListener=function(S,k,T,M){var B=e?e+S:S;if(!this._events[B])return this;if(!k)return o(this,B),this;var F=this._events[B];if(F.fn)F.fn===k&&(!M||F.once)&&(!T||F.context===T)&&o(this,B);else{for(var L=0,R=[],$=F.length;L<$;L++)(F[L].fn!==k||M&&!F[L].once||T&&F[L].context!==T)&&R.push(F[L]);R.length?this._events[B]=R.length===1?R[0]:R:o(this,B)}return this},u.prototype.removeAllListeners=function(S){var k;return S?(k=e?e+S:S,this._events[k]&&o(this,k)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,n.exports=u}(Qn)),Qn.exports}var Vc=Gc();const oo=sn(Vc);var Zc=class extends oo{socket;constructor(n,t,e){super(),this.socket=new window.WebSocket(n,e),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(n,t,e){const r=e||t;try{this.socket.send(n),r()}catch(s){r(s)}}close(n,t){this.socket.close(n,t)}addEventListener(n,t,e){this.socket.addEventListener(n,t,e)}};function Yc(n,t){return new Zc(n,t)}var Xc=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},Jc=class extends oo{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(n,t="ws://localhost:8080",{autoconnect:e=!0,reconnect:r=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},u,p){super(),this.webSocketFactory=n,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=e,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=u||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),p?this.dataPack=p:this.dataPack=new Xc,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(n,t,e,r){return!r&&typeof e=="object"&&(r=e,e=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(n,t),u={jsonrpc:"2.0",method:n,params:t||void 0,id:o};this.socket.send(this.dataPack.encode(u),r,p=>{if(p)return i(p);this.queue[o]={promise:[s,i]},e&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},e))})})}async login(n){const t=await this.call("rpc.login",n);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(n,t){return new Promise((e,r)=>{if(!this.ready)return r(new Error("socket not ready"));const s={jsonrpc:"2.0",method:n,params:t};this.socket.send(this.dataPack.encode(s),i=>{if(i)return r(i);e()})})}async subscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.on",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed subscribing to an event '"+n+"' with: "+t[n]);return t}async unsubscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.off",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(n,t){this.socket.close(n||1e3,t)}setAutoReconnect(n){this.reconnect=n}setReconnectInterval(n){this.reconnect_interval=n}setMaxReconnects(n){this.max_reconnects=n}_connect(n,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(n,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=dt.Buffer.from(e).toString());try{e=this.dataPack.decode(e)}catch{return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const r=[e.notification];if(e.params.constructor===Object)r.push(e.params);else for(let s=0;s<e.params.length;s++)r.push(e.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:e,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",e,r),0),this.ready=!1,this.socket=void 0,e!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(n,t),this.reconnect_interval)))})}};class ao extends As{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Bs(t);const r=di(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),hr(i)}update(t){return jr(this),this.iHash.update(t),this}digestInto(t){jr(this),me(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:u}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=u,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const co=(n,t,e)=>new ao(n,t).update(e).digest();co.create=(n,t)=>new ao(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cs=(n,t)=>(n+(n>=0?t:-t)/uo)/t;function Qc(n,t,e){const[[r,s],[i,o]]=t,u=cs(o*n,e),p=cs(-s*n,e);let S=n-u*r-p*i,k=-u*s-p*o;const T=S<Ne,M=k<Ne;T&&(S=-S),M&&(k=-k);const B=_r(Math.ceil(Cs(e)/2))+fr;if(S<Ne||S>=B||k<Ne||k>=B)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:T,k1:S,k2neg:M,k2:k}}function us(n){n.lowS!==void 0&&Ye("lowS",n.lowS),n.prehash!==void 0&&Ye("prehash",n.prehash)}class tu extends Error{constructor(t=""){super(t)}}const Le={Err:tu,_tlv:{encode:(n,t)=>{const{Err:e}=Le;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,s=Or(r);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=r>127?Or(s.length/2|128):"";return Or(n)+i+s+t},decode(n,t){const{Err:e}=Le;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const p=s&127;if(!p)throw new e("tlv.decode(long): indefinite length not supported");if(p>4)throw new e("tlv.decode(long): byte length is too big");const S=t.subarray(r,r+p);if(S.length!==p)throw new e("tlv.decode: length bytes not complete");if(S[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const k of S)o=o<<8|k;if(r+=p,o<128)throw new e("tlv.decode(long): not minimal encoding")}const u=t.subarray(r,r+o);if(u.length!==o)throw new e("tlv.decode: wrong value length");return{v:u,l:t.subarray(r+o)}}},_int:{encode(n){const{Err:t}=Le;if(n<Ne)throw new t("integer: negative integers are not allowed");let e=Or(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=Le;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return on(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=Le,s=Ft("signature",n),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:u,l:p}=r.decode(2,i),{v:S,l:k}=r.decode(2,p);if(k.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(u),s:e.decode(S)}},hexFromSig(n){const{_tlv:t,_int:e}=Le,r=t.encode(2,e.encode(n.r)),s=t.encode(2,e.encode(n.s)),i=r+s;return t.encode(48,i)}},Ne=BigInt(0),fr=BigInt(1),uo=BigInt(2),Dr=BigInt(3),eu=BigInt(4);function ru(n,t,e){function r(s){const i=n.sqr(s),o=n.mul(i,s);return n.add(n.add(o,n.mul(s,t)),e)}return r}function sr(n,t){const{BYTES:e}=n;let r;if(typeof t=="bigint")r=t;else{let s=Ft("private key",t);try{r=n.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${e}, got ${typeof t}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function nu(n,t={}){const{Fp:e,Fn:r}=Vs("weierstrass",n,t),{h:s,n:i}=n;Ar(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=t;if(o&&(!e.is0(n.a)||typeof o.beta!="bigint"||!Array.isArray(o.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');function u(){if(!e.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function p(K,I,C){const{x:q,y:w}=I.toAffine(),a=e.toBytes(q);if(Ye("isCompressed",C),C){u();const d=!e.isOdd(w);return Fe(fo(d),a)}else return Fe(Uint8Array.of(4),a,e.toBytes(w))}function S(K){me(K);const I=e.BYTES,C=I+1,q=2*I+1,w=K.length,a=K[0],d=K.subarray(1);if(w===C&&(a===2||a===3)){const g=e.fromBytes(d);if(!e.isValid(g))throw new Error("bad point: is not on curve, wrong x");const y=M(g);let x;try{x=e.sqrt(y)}catch(v){const c=v instanceof Error?": "+v.message:"";throw new Error("bad point: is not on curve, sqrt error"+c)}u();const A=e.isOdd(x);return(a&1)===1!==A&&(x=e.neg(x)),{x:g,y:x}}else if(w===q&&a===4){const g=e.fromBytes(d.subarray(I*0,I*1)),y=e.fromBytes(d.subarray(I*1,I*2));if(!B(g,y))throw new Error("bad point: is not on curve");return{x:g,y}}else throw new Error(`bad point: got length ${w}, expected compressed=${C} or uncompressed=${q}`)}const k=t.toBytes||p,T=t.fromBytes||S,M=ru(e,n.a,n.b);function B(K,I){const C=e.sqr(I),q=M(K);return e.eql(C,q)}if(!B(n.Gx,n.Gy))throw new Error("bad curve params: generator point");const F=e.mul(e.pow(n.a,Dr),eu),L=e.mul(e.sqr(n.b),BigInt(27));if(e.is0(e.add(F,L)))throw new Error("bad curve params: a or b");function R(K,I,C=!1){if(!e.isValid(I)||C&&e.is0(I))throw new Error(`bad point coordinate ${K}`);return I}function $(K){if(!(K instanceof Y))throw new Error("ProjectivePoint expected")}function V(K){if(!o||!o.basises)throw new Error("no endo");return Qc(K,o.basises,r.ORDER)}const G=Vr((K,I)=>{const{X:C,Y:q,Z:w}=K;if(e.eql(w,e.ONE))return{x:C,y:q};const a=K.is0();I==null&&(I=a?e.ONE:e.inv(w));const d=e.mul(C,I),g=e.mul(q,I),y=e.mul(w,I);if(a)return{x:e.ZERO,y:e.ZERO};if(!e.eql(y,e.ONE))throw new Error("invZ was invalid");return{x:d,y:g}}),Q=Vr(K=>{if(K.is0()){if(t.allowInfinityPoint&&!e.is0(K.Y))return;throw new Error("bad point: ZERO")}const{x:I,y:C}=K.toAffine();if(!e.isValid(I)||!e.isValid(C))throw new Error("bad point: x or y not field elements");if(!B(I,C))throw new Error("bad point: equation left != right");if(!K.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function X(K,I,C,q,w){return C=new Y(e.mul(C.X,K),C.Y,C.Z),I=Zr(q,I),C=Zr(w,C),I.add(C)}class Y{constructor(I,C,q){this.X=R("x",I),this.Y=R("y",C,!0),this.Z=R("z",q),Object.freeze(this)}static fromAffine(I){const{x:C,y:q}=I||{};if(!I||!e.isValid(C)||!e.isValid(q))throw new Error("invalid affine point");if(I instanceof Y)throw new Error("projective point not allowed");return e.is0(C)&&e.is0(q)?Y.ZERO:new Y(C,q,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}static normalizeZ(I){return Ve(Y,I)}static fromBytes(I){return me(I),Y.fromHex(I)}static fromHex(I){const C=Y.fromAffine(T(Ft("pointHex",I)));return C.assertValidity(),C}static fromPrivateKey(I){return Y.BASE.multiply(sr(r,I))}static msm(I,C){return Gs(Y,r,I,C)}_setWindowSize(I){this.precompute(I)}precompute(I=8,C=!0){return ot.createCache(this,I),C||this.multiply(Dr),this}assertValidity(){Q(this)}hasEvenY(){const{y:I}=this.toAffine();if(!e.isOdd)throw new Error("Field doesn't support isOdd");return!e.isOdd(I)}equals(I){$(I);const{X:C,Y:q,Z:w}=this,{X:a,Y:d,Z:g}=I,y=e.eql(e.mul(C,g),e.mul(a,w)),x=e.eql(e.mul(q,g),e.mul(d,w));return y&&x}negate(){return new Y(this.X,e.neg(this.Y),this.Z)}double(){const{a:I,b:C}=n,q=e.mul(C,Dr),{X:w,Y:a,Z:d}=this;let g=e.ZERO,y=e.ZERO,x=e.ZERO,A=e.mul(w,w),N=e.mul(a,a),v=e.mul(d,d),c=e.mul(w,a);return c=e.add(c,c),x=e.mul(w,d),x=e.add(x,x),g=e.mul(I,x),y=e.mul(q,v),y=e.add(g,y),g=e.sub(N,y),y=e.add(N,y),y=e.mul(g,y),g=e.mul(c,g),x=e.mul(q,x),v=e.mul(I,v),c=e.sub(A,v),c=e.mul(I,c),c=e.add(c,x),x=e.add(A,A),A=e.add(x,A),A=e.add(A,v),A=e.mul(A,c),y=e.add(y,A),v=e.mul(a,d),v=e.add(v,v),A=e.mul(v,c),g=e.sub(g,A),x=e.mul(v,N),x=e.add(x,x),x=e.add(x,x),new Y(g,y,x)}add(I){$(I);const{X:C,Y:q,Z:w}=this,{X:a,Y:d,Z:g}=I;let y=e.ZERO,x=e.ZERO,A=e.ZERO;const N=n.a,v=e.mul(n.b,Dr);let c=e.mul(C,a),f=e.mul(q,d),b=e.mul(w,g),_=e.add(C,q),P=e.add(a,d);_=e.mul(_,P),P=e.add(c,f),_=e.sub(_,P),P=e.add(C,w);let j=e.add(a,g);return P=e.mul(P,j),j=e.add(c,b),P=e.sub(P,j),j=e.add(q,w),y=e.add(d,g),j=e.mul(j,y),y=e.add(f,b),j=e.sub(j,y),A=e.mul(N,P),y=e.mul(v,b),A=e.add(y,A),y=e.sub(f,A),A=e.add(f,A),x=e.mul(y,A),f=e.add(c,c),f=e.add(f,c),b=e.mul(N,b),P=e.mul(v,P),f=e.add(f,b),b=e.sub(c,b),b=e.mul(N,b),P=e.add(P,b),c=e.mul(f,P),x=e.add(x,c),c=e.mul(j,P),y=e.mul(_,y),y=e.sub(y,c),c=e.mul(_,f),A=e.mul(j,A),A=e.add(A,c),new Y(y,x,A)}subtract(I){return this.add(I.negate())}is0(){return this.equals(Y.ZERO)}multiply(I){const{endo:C}=t;if(!r.isValidNot0(I))throw new Error("invalid scalar: out of range");let q,w;const a=d=>ot.cached(this,d,g=>Ve(Y,g));if(C){const{k1neg:d,k1:g,k2neg:y,k2:x}=V(I),{p:A,f:N}=a(g),{p:v,f:c}=a(x);w=N.add(c),q=X(C.beta,A,v,d,y)}else{const{p:d,f:g}=a(I);q=d,w=g}return Ve(Y,[q,w])[0]}multiplyUnsafe(I){const{endo:C}=t,q=this;if(!r.isValid(I))throw new Error("invalid scalar: out of range");if(I===Ne||q.is0())return Y.ZERO;if(I===fr)return q;if(ot.hasCache(this))return this.multiply(I);if(C){const{k1neg:w,k1:a,k2neg:d,k2:g}=V(I),{p1:y,p2:x}=ma(Y,q,a,g);return X(C.beta,y,x,w,d)}else return ot.unsafe(q,I)}multiplyAndAddUnsafe(I,C,q){const w=this.multiplyUnsafe(C).add(I.multiplyUnsafe(q));return w.is0()?void 0:w}toAffine(I){return G(this,I)}isTorsionFree(){const{isTorsionFree:I}=t;return s===fr?!0:I?I(Y,this):ot.unsafe(this,i).is0()}clearCofactor(){const{clearCofactor:I}=t;return s===fr?this:I?I(Y,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(I=!0){return Ye("isCompressed",I),this.assertValidity(),k(Y,this,I)}toRawBytes(I=!0){return this.toBytes(I)}toHex(I=!0){return Ze(this.toBytes(I))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}Y.BASE=new Y(n.Gx,n.Gy,e.ONE),Y.ZERO=new Y(e.ZERO,e.ONE,e.ZERO),Y.Fp=e,Y.Fn=r;const at=r.BITS,ot=new js(Y,t.endo?Math.ceil(at/2):at);return Y}function fo(n){return Uint8Array.of(n?2:3)}function iu(n,t,e={}){Bs(t),Ar(e,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Is,s=e.hmac||((g,...y)=>co(t,g,Fe(...y))),{Fp:i,Fn:o}=n,{ORDER:u,BITS:p}=o,S=$s(u),k={secret:o.BYTES,public:1+i.BYTES,publicUncompressed:1+2*i.BYTES,signature:2*o.BYTES,seed:S};function T(g){const y=u>>fr;return g>y}function M(g){return T(g)?o.neg(g):g}function B(g,y){if(!o.isValidNot0(y))throw new Error(`invalid signature ${g}: out of range 1..CURVE.n`)}class F{constructor(y,x,A){B("r",y),B("s",x),this.r=y,this.s=x,A!=null&&(this.recovery=A),Object.freeze(this)}static fromBytes(y,x="compact"){if(x==="compact"){const A=o.BYTES;me(y,A*2);const N=y.subarray(0,A),v=y.subarray(A,A*2);return new F(o.fromBytes(N),o.fromBytes(v))}if(x==="der"){me(y);const{r:A,s:N}=Le.toSig(y);return new F(A,N)}throw new Error("invalid format")}static fromHex(y,x){return this.fromBytes(Gr(y),x)}addRecoveryBit(y){return new F(this.r,this.s,y)}recoverPublicKey(y){const x=i.ORDER,{r:A,s:N,recovery:v}=this;if(v==null||![0,1,2,3].includes(v))throw new Error("recovery id invalid");if(u*uo<x&&v>1)throw new Error("recovery id is ambiguous for h>1 curve");const f=v===2||v===3?A+u:A;if(!i.isValid(f))throw new Error("recovery id 2 or 3 invalid");const b=i.toBytes(f),_=n.fromHex(Fe(fo((v&1)===0),b)),P=o.inv(f),j=at(Ft("msgHash",y)),et=o.create(-j*P),st=o.create(N*P),Rt=n.BASE.multiplyUnsafe(et).add(_.multiplyUnsafe(st));if(Rt.is0())throw new Error("point at infinify");return Rt.assertValidity(),Rt}hasHighS(){return T(this.s)}normalizeS(){return this.hasHighS()?new F(this.r,o.neg(this.s),this.recovery):this}toBytes(y="compact"){if(y==="compact")return Fe(o.toBytes(this.r),o.toBytes(this.s));if(y==="der")return Gr(Le.hexFromSig(this));throw new Error("invalid format")}toHex(y){return Ze(this.toBytes(y))}assertValidity(){}static fromCompact(y){return F.fromBytes(Ft("sig",y),"compact")}static fromDER(y){return F.fromBytes(Ft("sig",y),"der")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ze(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ze(this.toBytes("compact"))}}function L(g){try{return!!sr(o,g)}catch{return!1}}function R(g,y){try{const x=g.length;return y===!0&&x!==k.public||y===!1&&x!==k.publicUncompressed?!1:!!n.fromBytes(g)}catch{return!1}}function $(g=r(S)){return da(g,u)}const V={isValidSecretKey:L,isValidPublicKey:R,randomSecretKey:$,isValidPrivateKey:L,randomPrivateKey:$,normPrivateKeyToScalar:g=>sr(o,g),precompute(g=8,y=n.BASE){return y.precompute(g,!1)}};function G(g,y=!0){return n.BASE.multiply(sr(o,g)).toBytes(y)}function Q(g){if(typeof g=="bigint")return!1;if(g instanceof n)return!0;if(o.allowedLengths||k.secret===k.public)return;const y=Ft("key",g).length;return y===k.public||y===k.publicUncompressed}function X(g,y,x=!0){if(Q(g)===!0)throw new Error("first arg must be private key");if(Q(y)===!1)throw new Error("second arg must be public key");const A=sr(o,g);return n.fromHex(y).multiply(A).toBytes(x)}const Y=e.bits2int||function(g){if(g.length>8192)throw new Error("input is too large");const y=on(g),x=g.length*8-p;return x>0?y>>BigInt(x):y},at=e.bits2int_modN||function(g){return o.create(Y(g))},ot=_r(p);function K(g){return ar("num < 2^"+p,g,Ne,ot),o.toBytes(g)}function I(g,y,x=C){if(["recovered","canonical"].some(et=>et in x))throw new Error("sign() legacy options not supported");let{lowS:A,prehash:N,extraEntropy:v}=x;A==null&&(A=!0),g=Ft("msgHash",g),us(x),N&&(g=Ft("prehashed msgHash",t(g)));const c=at(g),f=sr(o,y),b=[K(f),K(c)];if(v!=null&&v!==!1){const et=v===!0?r(k.secret):v;b.push(Ft("extraEntropy",et))}const _=Fe(...b),P=c;function j(et){const st=Y(et);if(!o.isValidNot0(st))return;const Rt=o.inv(st),yt=n.BASE.multiply(st).toAffine(),wt=o.create(yt.x);if(wt===Ne)return;const he=o.create(Rt*o.create(P+wt*f));if(he===Ne)return;let bt=(yt.x===wt?0:2)|Number(yt.y&fr),St=he;return A&&T(he)&&(St=M(he),bt^=1),new F(wt,St,bt)}return{seed:_,k2sig:j}}const C={lowS:e.lowS,prehash:!1},q={lowS:e.lowS,prehash:!1};function w(g,y,x=C){const{seed:A,k2sig:N}=I(g,y,x);return ra(t.outputLen,o.BYTES,s)(A,N)}n.BASE.precompute(8);function a(g,y,x,A=q){const N=g;y=Ft("msgHash",y),x=Ft("publicKey",x),us(A);const{lowS:v,prehash:c,format:f}=A;if("strict"in A)throw new Error("options.strict was renamed to lowS");let b,_;if(f===void 0){const P=typeof N=="string"||Wr(N),j=!P&&N!==null&&typeof N=="object"&&typeof N.r=="bigint"&&typeof N.s=="bigint";if(!P&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(j)b=new F(N.r,N.s);else if(P){try{b=F.fromDER(N)}catch(et){if(!(et instanceof Le.Err))throw et}if(!b)try{b=F.fromCompact(N)}catch{return!1}}}else if(f==="compact"||f==="der"){if(typeof N!="string"&&!Wr(N))throw new Error('"der" / "compact" format expects Uint8Array signature');b=F.fromBytes(Ft("sig",N),f)}else if(f==="js"){if(!(N instanceof F))throw new Error('"js" format expects Signature instance');b=N}else throw new Error('format must be "compact", "der" or "js"');if(!b)return!1;try{if(_=n.fromHex(x),v&&b.hasHighS())return!1;c&&(y=t(y));const{r:P,s:j}=b,et=at(y),st=o.inv(j),Rt=o.create(et*st),yt=o.create(P*st),wt=n.BASE.multiplyUnsafe(Rt).add(_.multiplyUnsafe(yt));return wt.is0()?!1:o.create(wt.x)===P}catch{return!1}}function d(g){const y=V.randomSecretKey(g);return{secretKey:y,publicKey:G(y)}}return Object.freeze({keygen:d,getPublicKey:G,sign:w,verify:a,getSharedSecret:X,utils:V,Point:n,Signature:F,info:{type:"weierstrass",lengths:k,publicKeyHasPrefix:!0}})}function su(n){const t={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=Xe(t.n,{BITS:n.nBitLength,allowedLengths:r,modOnDecode:n.wrapPrivateKey}),i={Fp:e,Fn:s,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:t,curveOpts:i}}function ou(n){const{CURVE:t,curveOpts:e}=su(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:t,curveOpts:e,hash:n.hash,ecdsaOpts:r}}function au(n,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:n})}function cu(n){const{CURVE:t,curveOpts:e,hash:r,ecdsaOpts:s}=ou(n),i=nu(t,e),o=iu(i,r,s);return au(n,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function uu(n,t){const e=r=>cu({...n,hash:r});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xi={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},fu={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},fs=BigInt(2);function lu(n){const t=xi.p,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),u=BigInt(44),p=BigInt(88),S=n*n*n%t,k=S*S*n%t,T=Ut(k,e,t)*k%t,M=Ut(T,e,t)*k%t,B=Ut(M,fs,t)*S%t,F=Ut(B,s,t)*B%t,L=Ut(F,i,t)*F%t,R=Ut(L,u,t)*L%t,$=Ut(R,p,t)*R%t,V=Ut($,u,t)*L%t,G=Ut(V,e,t)*k%t,Q=Ut(G,o,t)*F%t,X=Ut(Q,r,t)*S%t,Y=Ut(X,fs,t);if(!ai.eql(ai.sqr(Y),n))throw new Error("Cannot find square root");return Y}const ai=Xe(xi.p,void 0,void 0,{sqrt:lu}),hu=uu({...xi,Fp:ai,lowS:!0,endo:fu},Ts);kr.utils.randomPrivateKey;kr.getPublicKey;function ls(n){try{return kr.ExtendedPoint.fromHex(n),!0}catch{return!1}}const du=(n,t)=>kr.sign(n,t.slice(0,32)),pu=kr.verify,ie=n=>dt.Buffer.isBuffer(n)?n:n instanceof Uint8Array?dt.Buffer.from(n.buffer,n.byteOffset,n.byteLength):dt.Buffer.from(n);class gu{constructor(t){Object.assign(this,t)}encode(){return dt.Buffer.from(Wn.serialize(Kr,this))}static decode(t){return Wn.deserialize(Kr,this,t)}static decodeUnchecked(t){return Wn.deserializeUnchecked(Kr,this,t)}}const Kr=new Map;var lo;const mu=32,$e=32;function yu(n){return n._bn!==void 0}let hs=1;class ut extends gu{constructor(t){if(super({}),this._bn=void 0,yu(t))this._bn=t._bn;else{if(typeof t=="string"){const e=se.decode(t);if(e.length!=$e)throw new Error("Invalid public key input");this._bn=new Yi(e)}else this._bn=new Yi(t);if(this._bn.byteLength()>$e)throw new Error("Invalid public key input")}}static unique(){const t=new ut(hs);return hs+=1,new ut(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return se.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(dt.Buffer);if(t.length===$e)return t;const e=dt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=dt.Buffer.concat([t.toBuffer(),dt.Buffer.from(e),r.toBuffer()]),i=ts(s);return new ut(i)}static createProgramAddressSync(t,e){let r=dt.Buffer.alloc(0);t.forEach(function(i){if(i.length>mu)throw new TypeError("Max seed length exceeded");r=dt.Buffer.concat([r,ie(i)])}),r=dt.Buffer.concat([r,e.toBuffer(),dt.Buffer.from("ProgramDerivedAddress")]);const s=ts(r);if(ls(s))throw new Error("Invalid seeds, address must fall off the curve");return new ut(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(dt.Buffer.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ut(t);return ls(e.toBytes())}}lo=ut;ut.default=new lo("11111111111111111111111111111111");Kr.set(ut,{kind:"struct",fields:[["_bn","u256"]]});new ut("BPFLoader1111111111111111111111111111111111");const lr=1232,ho=127,po=64;class go extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(go.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class mo extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(mo.prototype,"name",{value:"TransactionExpiredTimeoutError"});class vr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(vr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class en{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const mt=(n="publicKey")=>U.blob(32,n),cr=(n="string")=>{const t=U.struct([U.u32("length"),U.u32("lengthPadding"),U.blob(U.offset(U.u32(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,u)=>{const p={chars:dt.Buffer.from(i,"utf8")};return r(p,o,u)},s.alloc=i=>U.u32().span+U.u32().span+dt.Buffer.from(i,"utf8").length,s},wu=(n="authorized")=>U.struct([mt("staker"),mt("withdrawer")],n),bu=(n="lockup")=>U.struct([U.ns64("unixTimestamp"),U.ns64("epoch"),mt("custodian")],n),vu=(n="voteInit")=>U.struct([mt("nodePubkey"),mt("authorizedVoter"),mt("authorizedWithdrawer"),U.u8("commission")],n),xu=(n="voteAuthorizeWithSeedArgs")=>U.struct([U.u32("voteAuthorizationType"),mt("currentAuthorityDerivedKeyOwnerPubkey"),cr("currentAuthorityDerivedKeySeed"),mt("newAuthorized")],n);function yo(n,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return yo({layout:s},t[s.property]);return 0};let r=0;return n.layout.fields.forEach(s=>{r+=e(s)}),r}function be(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function ve(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function te(n,t){if(!n)throw new Error(t||"Assertion failed")}class dn{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=o=>{const u=o.toBase58();let p=r.get(u);return p===void 0&&(p={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(u,p)),p},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const u of o.keys){const p=s(u.pubkey);p.isSigner||=u.isSigner,p.isWritable||=u.isWritable}}return new dn(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];te(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,p])=>p.isSigner&&p.isWritable),r=t.filter(([,p])=>p.isSigner&&!p.isWritable),s=t.filter(([,p])=>!p.isSigner&&p.isWritable),i=t.filter(([,p])=>!p.isSigner&&!p.isWritable),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{te(e.length>0,"Expected at least one writable signer key");const[p]=e[0];te(p===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...e.map(([p])=>new ut(p)),...r.map(([p])=>new ut(p)),...s.map(([p])=>new ut(p)),...i.map(([p])=>new ut(p))];return[o,u]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const u=new ut(i),p=t.findIndex(S=>S.equals(u));p>=0&&(te(p<256,"Max lookup table index exceeded"),r.push(p),s.push(u),this.keyMetaMap.delete(i))}return[r,s]}}const wo="Reached end of buffer unexpectedly";function Ue(n){if(n.length===0)throw new Error(wo);return n.shift()}function xe(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(wo);return n.splice(...t)}class Ke{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ut(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:se.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new en(this.staticAccountKeys)}static compile(t){const e=dn.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),o=new en(s).compileInstructions(t.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:se.encode(u.data)}));return new Ke({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];ve(e,t);const r=this.instructions.map(T=>{const{accounts:M,programIdIndex:B}=T,F=Array.from(se.decode(T.data));let L=[];ve(L,M.length);let R=[];return ve(R,F.length),{programIdIndex:B,keyIndicesCount:dt.Buffer.from(L),keyIndices:M,dataLength:dt.Buffer.from(R),data:F}});let s=[];ve(s,r.length);let i=dt.Buffer.alloc(lr);dt.Buffer.from(s).copy(i);let o=s.length;r.forEach(T=>{const B=U.struct([U.u8("programIdIndex"),U.blob(T.keyIndicesCount.length,"keyIndicesCount"),U.seq(U.u8("keyIndex"),T.keyIndices.length,"keyIndices"),U.blob(T.dataLength.length,"dataLength"),U.seq(U.u8("userdatum"),T.data.length,"data")]).encode(T,i,o);o+=B}),i=i.slice(0,o);const u=U.struct([U.blob(1,"numRequiredSignatures"),U.blob(1,"numReadonlySignedAccounts"),U.blob(1,"numReadonlyUnsignedAccounts"),U.blob(e.length,"keyCount"),U.seq(mt("key"),t,"keys"),mt("recentBlockhash")]),p={numRequiredSignatures:dt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:dt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:dt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:dt.Buffer.from(e),keys:this.accountKeys.map(T=>ie(T.toBytes())),recentBlockhash:se.decode(this.recentBlockhash)};let S=dt.Buffer.alloc(2048);const k=u.encode(p,S);return i.copy(S,k),S.slice(0,k+i.length)}static from(t){let e=[...t];const r=Ue(e);if(r!==(r&ho))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Ue(e),i=Ue(e),o=be(e);let u=[];for(let M=0;M<o;M++){const B=xe(e,0,$e);u.push(new ut(dt.Buffer.from(B)))}const p=xe(e,0,$e),S=be(e);let k=[];for(let M=0;M<S;M++){const B=Ue(e),F=be(e),L=xe(e,0,F),R=be(e),$=xe(e,0,R),V=se.encode(dt.Buffer.from($));k.push({programIdIndex:B,accounts:L,data:V})}const T={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:se.encode(dt.Buffer.from(p)),accountKeys:u,instructions:k};return new Ke(T)}}class rn{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new en(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((o,u)=>o+u.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=r-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=dn.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const k of i){const T=e.extractTableLookup(k);if(T!==void 0){const[M,{writable:B,readonly:F}]=T;r.push(M),s.writable.push(...B),s.readonly.push(...F)}}const[o,u]=e.getMessageComponents(),S=new en(u,s).compileInstructions(t.instructions);return new rn({header:o,staticAccountKeys:u,recentBlockhash:t.recentBlockhash,compiledInstructions:S,addressTableLookups:r})}serialize(){const t=Array();ve(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();ve(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();ve(i,this.addressTableLookups.length);const o=U.struct([U.u8("prefix"),U.struct([U.u8("numRequiredSignatures"),U.u8("numReadonlySignedAccounts"),U.u8("numReadonlyUnsignedAccounts")],"header"),U.blob(t.length,"staticAccountKeysLength"),U.seq(mt(),this.staticAccountKeys.length,"staticAccountKeys"),mt("recentBlockhash"),U.blob(r.length,"instructionsLength"),U.blob(e.length,"serializedInstructions"),U.blob(i.length,"addressTableLookupsLength"),U.blob(s.length,"serializedAddressTableLookups")]),u=new Uint8Array(lr),S=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(k=>k.toBytes()),recentBlockhash:se.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},u);return u.slice(0,S)}serializeInstructions(){let t=0;const e=new Uint8Array(lr);for(const r of this.compiledInstructions){const s=Array();ve(s,r.accountKeyIndexes.length);const i=Array();ve(i,r.data.length);const o=U.struct([U.u8("programIdIndex"),U.blob(s.length,"encodedAccountKeyIndexesLength"),U.seq(U.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),U.blob(i.length,"encodedDataLength"),U.blob(r.data.length,"data")]);t+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(lr);for(const r of this.addressTableLookups){const s=Array();ve(s,r.writableIndexes.length);const i=Array();ve(i,r.readonlyIndexes.length);const o=U.struct([mt("accountKey"),U.blob(s.length,"encodedWritableIndexesLength"),U.seq(U.u8(),r.writableIndexes.length,"writableIndexes"),U.blob(i.length,"encodedReadonlyIndexesLength"),U.seq(U.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=Ue(e),s=r&ho;te(r!==s,"Expected versioned message but received legacy message");const i=s;te(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Ue(e),numReadonlySignedAccounts:Ue(e),numReadonlyUnsignedAccounts:Ue(e)},u=[],p=be(e);for(let F=0;F<p;F++)u.push(new ut(xe(e,0,$e)));const S=se.encode(xe(e,0,$e)),k=be(e),T=[];for(let F=0;F<k;F++){const L=Ue(e),R=be(e),$=xe(e,0,R),V=be(e),G=new Uint8Array(xe(e,0,V));T.push({programIdIndex:L,accountKeyIndexes:$,data:G})}const M=be(e),B=[];for(let F=0;F<M;F++){const L=new ut(xe(e,0,$e)),R=be(e),$=xe(e,0,R),V=be(e),G=xe(e,0,V);B.push({accountKey:L,writableIndexes:$,readonlyIndexes:G})}return new rn({header:o,staticAccountKeys:u,recentBlockhash:S,compiledInstructions:T,addressTableLookups:B})}}let ze=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const Su=dt.Buffer.alloc(po).fill(0);class Ee{constructor(t){this.keys=void 0,this.programId=void 0,this.data=dt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class ke{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Ee(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let L=0;L<e.length;L++)if(e[L].programId===void 0)throw new Error(`Transaction instruction index ${L} has undefined program id`);const s=[],i=[];e.forEach(L=>{L.keys.forEach($=>{i.push({...$})});const R=L.programId.toString();s.includes(R)||s.push(R)}),s.forEach(L=>{i.push({pubkey:new ut(L),isSigner:!1,isWritable:!1})});const o=[];i.forEach(L=>{const R=L.pubkey.toString(),$=o.findIndex(V=>V.pubkey.toString()===R);$>-1?(o[$].isWritable=o[$].isWritable||L.isWritable,o[$].isSigner=o[$].isSigner||L.isSigner):o.push(L)}),o.sort(function(L,R){if(L.isSigner!==R.isSigner)return L.isSigner?-1:1;if(L.isWritable!==R.isWritable)return L.isWritable?-1:1;const $={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return L.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",$)});const u=o.findIndex(L=>L.pubkey.equals(r));if(u>-1){const[L]=o.splice(u,1);L.isSigner=!0,L.isWritable=!0,o.unshift(L)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const L of this.signatures){const R=o.findIndex($=>$.pubkey.equals(L.publicKey));if(R>-1)o[R].isSigner||(o[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${L.publicKey.toString()}`)}let p=0,S=0,k=0;const T=[],M=[];o.forEach(({pubkey:L,isSigner:R,isWritable:$})=>{R?(T.push(L.toString()),p+=1,$||(S+=1)):(M.push(L.toString()),$||(k+=1))});const B=T.concat(M),F=e.map(L=>{const{data:R,programId:$}=L;return{programIdIndex:B.indexOf($.toString()),accounts:L.keys.map(V=>B.indexOf(V.pubkey.toString())),data:se.encode(R)}});return F.forEach(L=>{te(L.programIdIndex>=0),L.accounts.forEach(R=>te(R>=0))}),new Ke({header:{numRequiredSignatures:p,numReadonlySignedAccounts:S,numReadonlyUnsignedAccounts:k},accountKeys:B,recentBlockhash:t,instructions:F})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=du(r,s.secretKey);this._addSignature(s.publicKey,ie(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){te(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=dt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(r.missing||=[]).push(i):pu(s,t,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(u=>u.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(u=>u.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];ve(r,e.length);const s=r.length+e.length*64+t.length,i=dt.Buffer.alloc(s);return te(e.length<256),dt.Buffer.from(r).copy(i,0),e.forEach(({signature:o},u)=>{o!==null&&(te(o.length===64,"signature has invalid length"),dt.Buffer.from(o).copy(i,r.length+u*64))}),t.copy(i,r.length+e.length*64),te(i.length<=lr,`Transaction too large: ${i.length} > ${lr}`),i}get keys(){return te(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return te(this.instructions.length===1),this.instructions[0].programId}get data(){return te(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=be(e);let s=[];for(let i=0;i<r;i++){const o=xe(e,0,po);s.push(se.encode(dt.Buffer.from(o)))}return ke.populate(Ke.from(e),s)}static populate(t,e=[]){const r=new ke;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==se.encode(Su)?null:se.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const u=t.accountKeys[o];return{pubkey:u,isSigner:r.signatures.some(p=>p.publicKey.toString()===u.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});r.instructions.push(new Ee({keys:i,programId:t.accountKeys[s.programIdIndex],data:se.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}const Eu=160,Bu=64,_u=Eu/Bu,Au=1e3/_u;new ut("SysvarC1ock11111111111111111111111111111111");new ut("SysvarEpochSchedu1e111111111111111111111111");new ut("Sysvar1nstructions1111111111111111111111111");const ti=new ut("SysvarRecentB1ockHashes11111111111111111111"),ds=new ut("SysvarRent111111111111111111111111111111111");new ut("SysvarRewards111111111111111111111111111111");new ut("SysvarS1otHashes111111111111111111111111111");new ut("SysvarS1otHistory11111111111111111111111111");new ut("SysvarStakeHistory1111111111111111111111111");class ps extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let u;switch(t){case"send":u=`Transaction ${e} resulted in an error. 
${r}. `+i+o;break;case"simulate":u=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:u=`Unknown action '${(p=>p)(t)}'`}super(u),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class it extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}function or(n){return new Promise(t=>setTimeout(t,n))}function ye(n,t){const e=n.layout.span>=0?n.layout.span:yo(n,t),r=dt.Buffer.alloc(e),s=Object.assign({instruction:n.index},t);return n.layout.encode(s,r),r}const ku=U.nu64("lamportsPerSignature"),bo=U.struct([U.u32("version"),U.u32("state"),mt("authorizedPubkey"),mt("nonce"),U.struct([ku],"feeCalculator")]),gs=bo.span;class Si{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=bo.decode(ie(t),0);return new Si({authorizedPubkey:new ut(e.authorizedPubkey),nonce:new ut(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function gr(n){const t=U.blob(8,n),e=t.decode.bind(t),r=t.encode.bind(t),s=t,i=gc();return s.decode=(o,u)=>{const p=e(o,u);return i.decode(p)},s.encode=(o,u,p)=>{const S=i.encode(o);return r(S,u,p)},s}const we=Object.freeze({Create:{index:0,layout:U.struct([U.u32("instruction"),U.ns64("lamports"),U.ns64("space"),mt("programId")])},Assign:{index:1,layout:U.struct([U.u32("instruction"),mt("programId")])},Transfer:{index:2,layout:U.struct([U.u32("instruction"),gr("lamports")])},CreateWithSeed:{index:3,layout:U.struct([U.u32("instruction"),mt("base"),cr("seed"),U.ns64("lamports"),U.ns64("space"),mt("programId")])},AdvanceNonceAccount:{index:4,layout:U.struct([U.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:U.struct([U.u32("instruction"),mt("authorized")])},AuthorizeNonceAccount:{index:7,layout:U.struct([U.u32("instruction"),mt("authorized")])},Allocate:{index:8,layout:U.struct([U.u32("instruction"),U.ns64("space")])},AllocateWithSeed:{index:9,layout:U.struct([U.u32("instruction"),mt("base"),cr("seed"),U.ns64("space"),mt("programId")])},AssignWithSeed:{index:10,layout:U.struct([U.u32("instruction"),mt("base"),cr("seed"),mt("programId")])},TransferWithSeed:{index:11,layout:U.struct([U.u32("instruction"),gr("lamports"),cr("seed"),mt("programId")])},UpgradeNonceAccount:{index:12,layout:U.struct([U.u32("instruction")])}});class Er{constructor(){}static createAccount(t){const e=we.Create,r=ye(e,{lamports:t.lamports,space:t.space,programId:ie(t.programId.toBuffer())});return new Ee({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const s=we.TransferWithSeed;e=ye(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:ie(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=we.Transfer;e=ye(s,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Ee({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const s=we.AssignWithSeed;e=ye(s,{base:ie(t.basePubkey.toBuffer()),seed:t.seed,programId:ie(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=we.Assign;e=ye(s,{programId:ie(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ee({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=we.CreateWithSeed,r=ye(e,{base:ie(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:ie(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Ee({keys:s,programId:this.programId,data:r})}static createNonceAccount(t){const e=new ke;"basePubkey"in t&&"seed"in t?e.add(Er.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:gs,programId:this.programId})):e.add(Er.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:gs,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=we.InitializeNonceAccount,r=ye(e,{authorized:ie(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:ti,isSigner:!1,isWritable:!1},{pubkey:ds,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Ee(s)}static nonceAdvance(t){const e=we.AdvanceNonceAccount,r=ye(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:ti,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Ee(s)}static nonceWithdraw(t){const e=we.WithdrawNonceAccount,r=ye(e,{lamports:t.lamports});return new Ee({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:ti,isSigner:!1,isWritable:!1},{pubkey:ds,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=we.AuthorizeNonceAccount,r=ye(e,{authorized:ie(t.newAuthorizedPubkey.toBuffer())});return new Ee({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const s=we.AllocateWithSeed;e=ye(s,{base:ie(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:ie(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=we.Allocate;e=ye(s,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ee({keys:r,programId:this.programId,data:e})}}Er.programId=new ut("11111111111111111111111111111111");new ut("BPFLoader2111111111111111111111111111111111");function Iu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ei,ms;function Mu(){if(ms)return ei;ms=1;var n=Object.prototype.toString,t=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function e(r,s){var i,o,u,p,S,k,T;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),s);if(T=n.call(r),T==="[object Array]"){for(u="[",o=r.length-1,i=0;i<o;i++)u+=e(r[i],!0)+",";return o>-1&&(u+=e(r[i],!0)),u+"]"}else if(T==="[object Object]"){for(p=t(r).sort(),o=p.length,u="",i=0;i<o;)S=p[i],k=e(r[S],!1),k!==void 0&&(u&&(u+=","),u+=JSON.stringify(S)+":"+k),i++;return"{"+u+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return ei=function(r){var s=e(r,!1);if(s!==void 0)return""+s},ei}var Ru=Mu(),ys=Iu(Ru);const br=32;function ri(n){let t=0;for(;n>1;)n/=2,t++;return t}function Tu(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Lu{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=ri(Tu(t+br+1))-ri(br)-1,r=this.getSlotsInEpoch(e),s=t-(r-br);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*br:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+ri(br)):this.slotsPerEpoch}}var Cu=globalThis.fetch;class Uu extends Jc{constructor(t,e,r){const s=i=>{const o=Yc(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,r),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Fu(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const ws=56;class bs{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Fu(Nu,t),r=t.length-ws;te(r>=0,"lookup table is invalid"),te(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=U.struct([U.seq(mt(),s,"addresses")]).decode(t.slice(ws));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ut(e.authority[0]):void 0,addresses:i.map(o=>new ut(o))}}}const Nu={index:1,layout:U.struct([U.u32("typeIndex"),gr("deactivationSlot"),U.nu64("lastExtendedSlot"),U.u8("lastExtendedStartIndex"),U.u8(),U.seq(mt(),U.offset(U.u8(),-1),"authority")])},Ou=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Pu(n){const t=n.match(Ou);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,s,i]=t,o=n.startsWith("https:")?"wss:":"ws:",u=s==null?null:parseInt(s.slice(1),10),p=u==null?"":`:${u+1}`;return`${o}//${r}${p}${i}`}const Mt=Rr(bi(ut),J(),n=>new ut(n)),vo=vi([J(),It("base64")]),Ei=Rr(bi(dt.Buffer),vo,n=>dt.Buffer.from(n[0],"base64")),qu=30*1e3;function Du(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function xt(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...s}=n;t=r,e=s}return{commitment:t,config:e}}function vs(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function xo(n){return de([Z({jsonrpc:It("2.0"),id:J(),result:n}),Z({jsonrpc:It("2.0"),id:J(),error:Z({code:mr(),message:J(),data:ct(Sc())})})])}const zu=xo(mr());function gt(n){return Rr(xo(n),zu,t=>"error"in t?t:{...t,result:tt(t.result,n)})}function Nt(n){return gt(Z({context:Z({slot:z()}),value:n}))}function pn(n){return Z({context:Z({slot:z()}),value:n})}function ni(n,t){return n===0?new rn({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ut(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:se.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Ke(t)}const Hu=Z({foundation:z(),foundationTerm:z(),initial:z(),taper:z(),terminal:z()}),$u=gt(rt(nt(Z({epoch:z(),effectiveSlot:z(),amount:z(),postBalance:z(),commission:ct(nt(z()))})))),Ku=rt(Z({slot:z(),prioritizationFee:z()})),Wu=Z({total:z(),validator:z(),foundation:z(),epoch:z()}),ju=Z({epoch:z(),slotIndex:z(),slotsInEpoch:z(),absoluteSlot:z(),blockHeight:ct(z()),transactionCount:ct(z())}),Gu=Z({slotsPerEpoch:z(),leaderScheduleSlotOffset:z(),warmup:Ie(),firstNormalEpoch:z(),firstNormalSlot:z()}),Vu=to(J(),rt(z())),Qe=nt(de([Z({}),J()])),Zu=Z({err:Qe}),Yu=It("receivedSignature"),Xu=Z({"solana-core":J(),"feature-set":ct(z())}),Ju=Z({program:J(),programId:Mt,parsed:mr()}),Qu=Z({programId:Mt,accounts:rt(Mt),data:J()}),xs=Nt(Z({err:nt(de([Z({}),J()])),logs:nt(rt(J())),accounts:ct(nt(rt(nt(Z({executable:Ie(),owner:J(),lamports:z(),data:rt(J()),rentEpoch:ct(z())}))))),unitsConsumed:ct(z()),returnData:ct(nt(Z({programId:J(),data:vi([J(),It("base64")])}))),innerInstructions:ct(nt(rt(Z({index:z(),instructions:rt(de([Ju,Qu]))}))))})),tf=Nt(Z({byIdentity:to(J(),rt(z())),range:Z({firstSlot:z(),lastSlot:z()})}));function ef(n,t,e,r,s,i){const o=e||Cu;let u;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let p;return r&&(p=async(k,T)=>{const M=await new Promise((B,F)=>{try{r(k,T,(L,R)=>B([L,R]))}catch(L){F(L)}});return await o(...M)}),new jc(async(k,T)=>{const M={method:"POST",body:k,agent:u,headers:Object.assign({"Content-Type":"application/json"},t||{},rl)};try{let B=5,F,L=500;for(;p?F=await p(n,M):F=await o(n,M),!(F.status!==429||s===!0||(B-=1,B===0));)console.error(`Server responded with ${F.status} ${F.statusText}.  Retrying after ${L}ms delay...`),await or(L),L*=2;const R=await F.text();F.ok?T(null,R):T(new Error(`${F.status} ${F.statusText}: ${R}`))}catch(B){B instanceof Error&&T(B)}},{})}function rf(n){return(t,e)=>new Promise((r,s)=>{n.request(t,e,(i,o)=>{if(i){s(i);return}r(o)})})}function nf(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>n.request(i.methodName,i.args));n.request(s,(i,o)=>{if(i){r(i);return}e(o)})})}const sf=gt(Hu),of=gt(Wu),af=gt(Ku),cf=gt(ju),uf=gt(Gu),ff=gt(Vu),lf=gt(z()),hf=Nt(Z({total:z(),circulating:z(),nonCirculating:z(),nonCirculatingAccounts:rt(Mt)})),ci=Z({amount:J(),uiAmount:nt(z()),decimals:z(),uiAmountString:ct(J())}),df=Nt(rt(Z({address:Mt,amount:J(),uiAmount:nt(z()),decimals:z(),uiAmountString:ct(J())}))),pf=Nt(rt(Z({pubkey:Mt,account:Z({executable:Ie(),owner:Mt,lamports:z(),data:Ei,rentEpoch:z()})}))),ui=Z({program:J(),parsed:mr(),space:z()}),gf=Nt(rt(Z({pubkey:Mt,account:Z({executable:Ie(),owner:Mt,lamports:z(),data:ui,rentEpoch:z()})}))),mf=Nt(rt(Z({lamports:z(),address:Mt}))),Br=Z({executable:Ie(),owner:Mt,lamports:z(),data:Ei,rentEpoch:z()}),yf=Z({pubkey:Mt,account:Br}),wf=Rr(de([bi(dt.Buffer),ui]),de([vo,ui]),n=>Array.isArray(n)?tt(n,Ei):n),fi=Z({executable:Ie(),owner:Mt,lamports:z(),data:wf,rentEpoch:z()}),bf=Z({pubkey:Mt,account:fi}),vf=Z({state:de([It("active"),It("inactive"),It("activating"),It("deactivating")]),active:z(),inactive:z()}),xf=gt(rt(Z({signature:J(),slot:z(),err:Qe,memo:nt(J()),blockTime:ct(nt(z()))}))),Sf=gt(rt(Z({signature:J(),slot:z(),err:Qe,memo:nt(J()),blockTime:ct(nt(z()))}))),Ef=Z({subscription:z(),result:pn(Br)}),Bf=Z({pubkey:Mt,account:Br}),_f=Z({subscription:z(),result:pn(Bf)}),Af=Z({parent:z(),slot:z(),root:z()}),kf=Z({subscription:z(),result:Af}),If=de([Z({type:de([It("firstShredReceived"),It("completed"),It("optimisticConfirmation"),It("root")]),slot:z(),timestamp:z()}),Z({type:It("createdBank"),parent:z(),slot:z(),timestamp:z()}),Z({type:It("frozen"),slot:z(),timestamp:z(),stats:Z({numTransactionEntries:z(),numSuccessfulTransactions:z(),numFailedTransactions:z(),maxTransactionsPerEntry:z()})}),Z({type:It("dead"),slot:z(),timestamp:z(),err:J()})]),Mf=Z({subscription:z(),result:If}),Rf=Z({subscription:z(),result:pn(de([Zu,Yu]))}),Tf=Z({subscription:z(),result:z()}),Lf=Z({pubkey:J(),gossip:nt(J()),tpu:nt(J()),rpc:nt(J()),version:nt(J())}),Ss=Z({votePubkey:J(),nodePubkey:J(),activatedStake:z(),epochVoteAccount:Ie(),epochCredits:rt(vi([z(),z(),z()])),commission:z(),lastVote:z(),rootSlot:nt(z())}),Cf=gt(Z({current:rt(Ss),delinquent:rt(Ss)})),Uf=de([It("processed"),It("confirmed"),It("finalized")]),Ff=Z({slot:z(),confirmations:nt(z()),err:Qe,confirmationStatus:ct(Uf)}),Nf=Nt(rt(nt(Ff))),Of=gt(z()),So=Z({accountKey:Mt,writableIndexes:rt(z()),readonlyIndexes:rt(z())}),Bi=Z({signatures:rt(J()),message:Z({accountKeys:rt(J()),header:Z({numRequiredSignatures:z(),numReadonlySignedAccounts:z(),numReadonlyUnsignedAccounts:z()}),instructions:rt(Z({accounts:rt(z()),data:J(),programIdIndex:z()})),recentBlockhash:J(),addressTableLookups:ct(rt(So))})}),Eo=Z({pubkey:Mt,signer:Ie(),writable:Ie(),source:ct(de([It("transaction"),It("lookupTable")]))}),Bo=Z({accountKeys:rt(Eo),signatures:rt(J())}),_o=Z({parsed:mr(),program:J(),programId:Mt}),Ao=Z({accounts:rt(Mt),data:J(),programId:Mt}),Pf=de([Ao,_o]),qf=de([Z({parsed:mr(),program:J(),programId:J()}),Z({accounts:rt(J()),data:J(),programId:J()})]),ko=Rr(Pf,qf,n=>"accounts"in n?tt(n,Ao):tt(n,_o)),Io=Z({signatures:rt(J()),message:Z({accountKeys:rt(Eo),instructions:rt(ko),recentBlockhash:J(),addressTableLookups:ct(nt(rt(So)))})}),nn=Z({accountIndex:z(),mint:J(),owner:ct(J()),programId:ct(J()),uiTokenAmount:ci}),Mo=Z({writable:rt(Mt),readonly:rt(Mt)}),gn=Z({err:Qe,fee:z(),innerInstructions:ct(nt(rt(Z({index:z(),instructions:rt(Z({accounts:rt(z()),data:J(),programIdIndex:z()}))})))),preBalances:rt(z()),postBalances:rt(z()),logMessages:ct(nt(rt(J()))),preTokenBalances:ct(nt(rt(nn))),postTokenBalances:ct(nt(rt(nn))),loadedAddresses:ct(Mo),computeUnitsConsumed:ct(z())}),_i=Z({err:Qe,fee:z(),innerInstructions:ct(nt(rt(Z({index:z(),instructions:rt(ko)})))),preBalances:rt(z()),postBalances:rt(z()),logMessages:ct(nt(rt(J()))),preTokenBalances:ct(nt(rt(nn))),postTokenBalances:ct(nt(rt(nn))),loadedAddresses:ct(Mo),computeUnitsConsumed:ct(z())}),yr=de([It(0),It("legacy")]),tr=Z({pubkey:J(),lamports:z(),postBalance:nt(z()),rewardType:nt(J()),commission:ct(nt(z()))}),Df=gt(nt(Z({blockhash:J(),previousBlockhash:J(),parentSlot:z(),transactions:rt(Z({transaction:Bi,meta:nt(gn),version:ct(yr)})),rewards:ct(rt(tr)),blockTime:nt(z()),blockHeight:nt(z())}))),zf=gt(nt(Z({blockhash:J(),previousBlockhash:J(),parentSlot:z(),rewards:ct(rt(tr)),blockTime:nt(z()),blockHeight:nt(z())}))),Hf=gt(nt(Z({blockhash:J(),previousBlockhash:J(),parentSlot:z(),transactions:rt(Z({transaction:Bo,meta:nt(gn),version:ct(yr)})),rewards:ct(rt(tr)),blockTime:nt(z()),blockHeight:nt(z())}))),$f=gt(nt(Z({blockhash:J(),previousBlockhash:J(),parentSlot:z(),transactions:rt(Z({transaction:Io,meta:nt(_i),version:ct(yr)})),rewards:ct(rt(tr)),blockTime:nt(z()),blockHeight:nt(z())}))),Kf=gt(nt(Z({blockhash:J(),previousBlockhash:J(),parentSlot:z(),transactions:rt(Z({transaction:Bo,meta:nt(_i),version:ct(yr)})),rewards:ct(rt(tr)),blockTime:nt(z()),blockHeight:nt(z())}))),Wf=gt(nt(Z({blockhash:J(),previousBlockhash:J(),parentSlot:z(),rewards:ct(rt(tr)),blockTime:nt(z()),blockHeight:nt(z())}))),jf=gt(nt(Z({blockhash:J(),previousBlockhash:J(),parentSlot:z(),transactions:rt(Z({transaction:Bi,meta:nt(gn)})),rewards:ct(rt(tr)),blockTime:nt(z())}))),Es=gt(nt(Z({blockhash:J(),previousBlockhash:J(),parentSlot:z(),signatures:rt(J()),blockTime:nt(z())}))),ii=gt(nt(Z({slot:z(),meta:nt(gn),blockTime:ct(nt(z())),transaction:Bi,version:ct(yr)}))),zr=gt(nt(Z({slot:z(),transaction:Io,meta:nt(_i),blockTime:ct(nt(z())),version:ct(yr)}))),Gf=Nt(Z({blockhash:J(),lastValidBlockHeight:z()})),Vf=Nt(Ie()),Zf=Z({slot:z(),numTransactions:z(),numSlots:z(),samplePeriodSecs:z()}),Yf=gt(rt(Zf)),Xf=Nt(nt(Z({feeCalculator:Z({lamportsPerSignature:z()})}))),Jf=gt(J()),Qf=gt(J()),tl=Z({err:Qe,logs:rt(J()),signature:J()}),el=Z({result:pn(tl),subscription:z()}),rl={"solana-client":"js/1.0.0-maintenance"};class nl{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const S={};return async k=>{const{commitment:T,config:M}=xt(k),B=this._buildArgs([],T,void 0,M),F=ys(B);return S[F]=S[F]??(async()=>{try{const L=await this._rpcRequest("getBlockHeight",B),R=tt(L,gt(z()));if("error"in R)throw new it(R.error,"failed to get block height information");return R.result}finally{delete S[F]}})(),await S[F]}})();let r,s,i,o,u,p;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,u=e.disableRetryOnRateLimit,p=e.httpAgent),this._rpcEndpoint=Du(t),this._rpcWsEndpoint=r||Pu(t),this._rpcClient=ef(t,s,i,o,u,p),this._rpcRequest=rf(this._rpcClient),this._rpcBatchRequest=nf(this._rpcClient),this._rpcWebSocket=new Uu(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=xt(e),i=this._buildArgs([t.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),u=tt(o,Nt(z()));if("error"in u)throw new it(u.error,`failed to get balance for ${t.toBase58()}`);return u.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=tt(e,gt(nt(z())));if("error"in r)throw new it(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=tt(t,gt(z()));if("error"in e)throw new it(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=tt(t,lf);if("error"in e)throw new it(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=tt(r,hf);if("error"in s)throw new it(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=tt(s,Nt(ci));if("error"in i)throw new it(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=tt(s,Nt(ci));if("error"in i)throw new it(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=xt(r);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const u=this._buildArgs(o,s,"base64",i),p=await this._rpcRequest("getTokenAccountsByOwner",u),S=tt(p,pf);if("error"in S)throw new it(S.error,`failed to get token accounts owned by account ${t.toBase58()}`);return S.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),u=tt(o,gf);if("error"in u)throw new it(u.error,`failed to get token accounts owned by account ${t.toBase58()}`);return u.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=tt(s,mf);if("error"in i)throw new it(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=tt(s,df);if("error"in i)throw new it(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=xt(e),i=this._buildArgs([t.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),u=tt(o,Nt(nt(Br)));if("error"in u)throw new it(u.error,`failed to get info about account ${t.toBase58()}`);return u.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=xt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),u=tt(o,Nt(nt(fi)));if("error"in u)throw new it(u.error,`failed to get info about account ${t.toBase58()}`);return u.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:s}=xt(e),i=t.map(S=>S.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),u=await this._rpcRequest("getMultipleAccounts",o),p=tt(u,Nt(rt(nt(fi))));if("error"in p)throw new it(p.error,`failed to get info for accounts ${i}`);return p.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=xt(e),i=t.map(S=>S.toBase58()),o=this._buildArgs([i],r,"base64",s),u=await this._rpcRequest("getMultipleAccounts",o),p=tt(u,Nt(rt(nt(Br))));if("error"in p)throw new it(p.error,`failed to get info for accounts ${i}`);return p.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=xt(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??i?.epoch}),u=await this._rpcRequest("getStakeActivation",o),p=tt(u,gt(vf));if("error"in p)throw new it(p.error,`failed to get Stake Activation ${t.toBase58()}`);return p.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=xt(e),{encoding:i,...o}=s||{},u=this._buildArgs([t.toBase58()],r,i||"base64",{...o,...o.filters?{filters:vs(o.filters)}:null}),p=await this._rpcRequest("getProgramAccounts",u),S=rt(yf),k=o.withContext===!0?tt(p,Nt(S)):tt(p,gt(S));if("error"in k)throw new it(k.error,`failed to get accounts owned by program ${t.toBase58()}`);return k.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=xt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),u=tt(o,gt(rt(bf)));if("error"in u)throw new it(u.error,`failed to get accounts owned by program ${t.toBase58()}`);return u.result}async confirmTransaction(t,e){let r;if(typeof t=="string")r=t;else{const i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let s;try{s=se.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return te(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,s,i=!1;const o=new Promise((p,S)=>{try{r=this.onSignature(e,(T,M)=>{r=void 0;const B={context:M,value:T};p({__type:ze.PROCESSED,response:B})},t);const k=new Promise(T=>{r==null?T():s=this._onSubscriptionStateChange(r,M=>{M==="subscribed"&&T()})});(async()=>{if(await k,i)return;const T=await this.getSignatureStatus(e);if(i||T==null)return;const{context:M,value:B}=T;if(B!=null)if(B?.err)S(B.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(B.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(B.confirmationStatus==="processed"||B.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,p({__type:ze.PROCESSED,response:{context:M,value:B}})}})()}catch(k){S(k)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(T=>{const M=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let B=await M();if(!i){for(;B<=r;)if(await or(1e3),i||(B=await M(),i))return;T({__type:ze.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:p}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),S=this.getCancellationPromise(e);let k;try{const T=await Promise.race([S,p,o]);if(T.__type===ze.PROCESSED)k=T.response;else throw new go(s)}finally{i=!0,u()}return k}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let u=!1;const p=new Promise(B=>{let F=i,L=null;const R=async()=>{try{const{context:$,value:V}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return L=$.slot,V?.nonce}catch{return F}};(async()=>{if(F=await R(),!u)for(;;){if(i!==F){B({__type:ze.NONCE_INVALID,slotInWhichNonceDidAdvance:L});return}if(await or(2e3),u||(F=await R(),u))return}})()}),{abortConfirmation:S,confirmationPromise:k}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),T=this.getCancellationPromise(e);let M;try{const B=await Promise.race([T,k,p]);if(B.__type===ze.PROCESSED)M=B.response;else{let F;for(;;){const L=await this.getSignatureStatus(o);if(L==null)break;if(L.context.slot<(B.slotInWhichNonceDidAdvance??r)){await or(400);continue}F=L;break}if(F?.value){const L=t||"finalized",{confirmationStatus:R}=F.value;switch(L){case"processed":case"recent":if(R!=="processed"&&R!=="confirmed"&&R!=="finalized")throw new vr(o);break;case"confirmed":case"single":case"singleGossip":if(R!=="confirmed"&&R!=="finalized")throw new vr(o);break;case"finalized":case"max":case"root":if(R!=="finalized")throw new vr(o);break;default:}M={context:F.context,value:{err:F.value.err}}}else throw new vr(o)}}finally{u=!0,S()}return M}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const s=new Promise(p=>{let S=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{S=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>p({__type:ze.TIMED_OUT,timeoutMs:S}),S)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let u;try{const p=await Promise.race([o,s]);if(p.__type===ze.PROCESSED)u=p.response;else throw new mo(e,p.timeoutMs/1e3)}finally{clearTimeout(r),i()}return u}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=tt(t,gt(rt(Lf)));if("error"in e)throw new it(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=tt(r,Cf);if("error"in s)throw new it(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=xt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),o=tt(i,gt(z()));if("error"in o)throw new it(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:r}=xt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=tt(i,gt(J()));if("error"in o)throw new it(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=tt(s,gt(rt(Mt)));if("error"in i)throw new it(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);te(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=tt(s,Nf);if("error"in i)throw new it(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=xt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=tt(i,gt(z()));if("error"in o)throw new it(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=tt(r,sf);if("error"in s)throw new it(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=xt(r),o=this._buildArgs([t.map(S=>S.toBase58())],s,void 0,{...i,epoch:e??i?.epoch}),u=await this._rpcRequest("getInflationReward",o),p=tt(u,$u);if("error"in p)throw new it(p.error,"failed to get inflation reward");return p.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=tt(t,of);if("error"in e)throw new it(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=xt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=tt(i,cf);if("error"in o)throw new it(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=tt(t,uf);if("error"in e)throw new it(e.error,"failed to get epoch schedule");const r=e.result;return new Lu(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=tt(t,ff);if("error"in e)throw new it(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=tt(s,Of);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=tt(e,Yf);if("error"in r)throw new it(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=tt(s,Xf);if("error"in i)throw new it(i.error,"failed to get fee calculator");const{context:o,value:u}=i.result;return{context:o,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(t,e){const r=ie(t.serialize()).toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),o=tt(i,Nt(nt(z())));if("error"in o)throw new it(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(o=>o.toBase58()),r=e?.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=tt(s,af);if("error"in i)throw new it(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=xt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=tt(i,Gf);if("error"in o)throw new it(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:r,config:s}=xt(e),i=this._buildArgs([t],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),u=tt(o,Vf);if("error"in u)throw new it(u.error,"failed to determine if the blockhash `"+t+"`is valid");return u.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=tt(t,gt(Xu));if("error"in e)throw new it(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=tt(t,gt(J()));if("error"in e)throw new it(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=xt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const u=tt(o,Hf);if("error"in u)throw u.error;return u.result}case"none":{const u=tt(o,zf);if("error"in u)throw u.error;return u.result}default:{const u=tt(o,Df);if("error"in u)throw u.error;const{result:p}=u;return p?{...p,transactions:p.transactions.map(({transaction:S,meta:k,version:T})=>({meta:k,transaction:{...S,message:ni(T,S.message)},version:T}))}:null}}}catch(u){throw new it(u,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:s}=xt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const u=tt(o,Kf);if("error"in u)throw u.error;return u.result}case"none":{const u=tt(o,Wf);if("error"in u)throw u.error;return u.result}default:{const u=tt(o,$f);if("error"in u)throw u.error;return u.result}}}catch(u){throw new it(u,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:u,...p}=t;r=u,e=p}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=tt(i,tf);if("error"in o)throw new it(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:r,config:s}=xt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getTransaction",i),u=tt(o,ii);if("error"in u)throw new it(u.error,"failed to get transaction");const p=u.result;return p&&{...p,transaction:{...p.transaction,message:ni(p.version,p.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=xt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),u=tt(o,zr);if("error"in u)throw new it(u.error,"failed to get transaction");return u.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=xt(e),i=t.map(p=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([p],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(p=>{const S=tt(p,zr);if("error"in S)throw new it(S.error,"failed to get transactions");return S.result})}async getTransactions(t,e){const{commitment:r,config:s}=xt(e),i=t.map(p=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([p],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(p=>{const S=tt(p,ii);if("error"in S)throw new it(S.error,"failed to get transactions");const k=S.result;return k&&{...k,transaction:{...k.transaction,message:ni(k.version,k.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",r),i=tt(s,jf);if("error"in i)throw new it(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const u={...o,transactions:o.transactions.map(({transaction:p,meta:S})=>{const k=new Ke(p.message);return{meta:S,transaction:{...p,message:k}}})};return{...u,transactions:u.transactions.map(({transaction:p,meta:S})=>({meta:S,transaction:ke.populate(p.message,p.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),o=tt(i,gt(rt(z())));if("error"in o)throw new it(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=tt(s,Es);if("error"in i)throw new it(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=tt(s,Es);if("error"in i)throw new it(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",r),i=tt(s,ii);if("error"in i)throw new it(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const u=new Ke(o.transaction.message),p=o.transaction.signatures;return{...o,transaction:ke.populate(u,p)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=tt(s,zr);if("error"in i)throw new it(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const u=tt(o,zr);if("error"in u)throw new it(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const p=await this.getConfirmedBlockSignatures(e,"finalized");p.signatures.length>0&&(s.until=p.signatures[p.signatures.length-1].toString())}catch(p){if(p instanceof Error&&p.message.includes("skipped"))continue;throw p}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const p=await this.getConfirmedBlockSignatures(r);p.signatures.length>0&&(s.before=p.signatures[p.signatures.length-1].toString())}catch(p){if(p instanceof Error&&p.message.includes("skipped"))continue;throw p}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(p=>p.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=tt(i,xf);if("error"in o)throw new it(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=tt(i,Sf);if("error"in o)throw new it(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new bs({key:t,state:bs.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=Si.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=tt(r,Jf);if("error"in s)throw new it(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await or(100);const r=Date.now()-this._blockhashInfo.lastFetch>=qu;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await or(Au/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=xt(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=tt(i,Nt(z()));if("error"in o)throw new it(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,r){if("message"in t){const L=t.serialize(),R=dt.Buffer.from(L).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const $=e||{};$.encoding="base64","commitment"in $||($.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&($.innerInstructions=e.innerInstructions);const V=[R,$],G=await this._rpcRequest("simulateTransaction",V),Q=tt(G,xs);if("error"in Q)throw new Error("failed to simulate transaction: "+Q.error.message);return Q.result}let s;if(t instanceof ke){let F=t;s=new ke,s.feePayer=F.feePayer,s.instructions=t.instructions,s.nonceInfo=F.nonceInfo,s.signatures=F.signatures}else s=ke.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let F=this._disableBlockhashCaching;for(;;){const L=await this._blockhashWithExpiryBlockHeight(F);if(s.lastValidBlockHeight=L.lastValidBlockHeight,s.recentBlockhash=L.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const R=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(R)&&!this._blockhashInfo.transactionSignatures.includes(R)){this._blockhashInfo.simulatedSignatures.push(R);break}else F=!0}}const o=s._compile(),u=o.serialize(),S=s._serialize(u).toString("base64"),k={encoding:"base64",commitment:this.commitment};if(r){const F=(Array.isArray(r)?r:o.nonProgramIds()).map(L=>L.toBase58());k.accounts={encoding:"base64",addresses:F}}i&&(k.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(k.innerInstructions=e.innerInstructions);const T=[S,k],M=await this._rpcRequest("simulateTransaction",T),B=tt(M,xs);if("error"in B){let F;if("data"in B.error&&(F=B.error.data.logs,F&&Array.isArray(F))){const L=`
    `,R=L+F.join(L);console.error(B.error.message,R)}throw new ps({action:"simulate",signature:"",transactionMessage:B.error.message,logs:F})}return B.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=u.lastValidBlockHeight,t.recentBlockhash=u.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const p=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(p))o=!0;else{this._blockhashInfo.transactionSignatures.push(p);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=ie(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[t,r],u=await this._rpcRequest("sendTransaction",o),p=tt(u,Qf);if("error"in p){let S;throw"data"in p.error&&(S=p.error.data.logs),new ps({action:s?"send":"simulate",signature:"",transactionMessage:p.error.message,logs:S})}return p.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){const r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(i=>{try{i(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const u=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=s.callbacks,await this._updateSubscriptions()}catch(u){if(console.error(`Received ${u instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:u}),!e())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(u){if(u instanceof Error&&console.error(`${o} error:`,u.message),!e())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=tt(t,Ef);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=ys([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];te(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:s,config:i}=xt(r),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=tt(t,_f);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const{commitment:i,config:o}=xt(r),u=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:vs(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},u)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=tt(t,el);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=tt(t,kf);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=tt(t,Mf);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=tt(t,Rf);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,u)=>{if(o.type==="status"){e(o.result,u);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),u=this._makeSubscription({callback:(p,S)=>{e(p,S);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return u}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=tt(t,Tf);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:U.struct([U.u32("instruction"),gr("recentSlot"),U.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:U.struct([U.u32("instruction")])},ExtendLookupTable:{index:2,layout:U.struct([U.u32("instruction"),gr(),U.seq(mt(),U.offset(U.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:U.struct([U.u32("instruction")])},CloseLookupTable:{index:4,layout:U.struct([U.u32("instruction")])}});new ut("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:U.struct([U.u8("instruction"),U.u32("units"),U.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:U.struct([U.u8("instruction"),U.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:U.struct([U.u8("instruction"),U.u32("units")])},SetComputeUnitPrice:{index:3,layout:U.struct([U.u8("instruction"),gr("microLamports")])}});new ut("ComputeBudget111111111111111111111111111111");U.struct([U.u8("numSignatures"),U.u8("padding"),U.u16("signatureOffset"),U.u16("signatureInstructionIndex"),U.u16("publicKeyOffset"),U.u16("publicKeyInstructionIndex"),U.u16("messageDataOffset"),U.u16("messageDataSize"),U.u16("messageInstructionIndex")]);new ut("Ed25519SigVerify111111111111111111111111111");hu.utils.isValidPrivateKey;U.struct([U.u8("numSignatures"),U.u16("signatureOffset"),U.u8("signatureInstructionIndex"),U.u16("ethAddressOffset"),U.u8("ethAddressInstructionIndex"),U.u16("messageDataOffset"),U.u16("messageDataSize"),U.u8("messageInstructionIndex"),U.blob(20,"ethAddress"),U.blob(64,"signature"),U.u8("recoveryId")]);new ut("KeccakSecp256k11111111111111111111111111111");var Ro;new ut("StakeConfig11111111111111111111111111111111");class To{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}Ro=To;To.default=new Ro(0,0,ut.default);Object.freeze({Initialize:{index:0,layout:U.struct([U.u32("instruction"),wu(),bu()])},Authorize:{index:1,layout:U.struct([U.u32("instruction"),mt("newAuthorized"),U.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:U.struct([U.u32("instruction")])},Split:{index:3,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},Withdraw:{index:4,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},Deactivate:{index:5,layout:U.struct([U.u32("instruction")])},Merge:{index:7,layout:U.struct([U.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:U.struct([U.u32("instruction"),mt("newAuthorized"),U.u32("stakeAuthorizationType"),cr("authoritySeed"),mt("authorityOwner")])}});new ut("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:U.struct([U.u32("instruction"),vu()])},Authorize:{index:1,layout:U.struct([U.u32("instruction"),mt("newAuthorized"),U.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:U.struct([U.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:U.struct([U.u32("instruction"),xu()])}});new ut("Vote111111111111111111111111111111111111111");new ut("Va1idator1nfo111111111111111111111111111111");Z({name:J(),website:ct(J()),details:ct(J()),iconUrl:ct(J()),keybaseUsername:ct(J())});new ut("Vote111111111111111111111111111111111111111");U.struct([mt("nodePubkey"),mt("authorizedWithdrawer"),U.u8("commission"),U.nu64(),U.seq(U.struct([U.nu64("slot"),U.u32("confirmationCount")]),U.offset(U.u32(),-8),"votes"),U.u8("rootSlotValid"),U.nu64("rootSlot"),U.nu64(),U.seq(U.struct([U.nu64("epoch"),mt("authorizedVoter")]),U.offset(U.u32(),-8),"authorizedVoters"),U.struct([U.seq(U.struct([mt("authorizedPubkey"),U.nu64("epochOfLastAuthorizedSwitch"),U.nu64("targetEpoch")]),32,"buf"),U.nu64("idx"),U.u8("isEmpty")],"priorVoters"),U.nu64(),U.seq(U.struct([U.nu64("epoch"),U.nu64("credits"),U.nu64("prevCredits")]),U.offset(U.u32(),-8),"epochCredits"),U.struct([U.nu64("slot"),U.nu64("timestamp")],"lastTimestamp")]);const il=1e9;window.Buffer=dt.Buffer;const sl=new URLSearchParams(window.location.search),Lo=sl.get("session"),Hr=document.getElementById("bundle"),Ai=document.getElementById("sendBtn"),We=document.getElementById("result");let xr=[];async function ol(){try{const n=await fetch(`/phantom/send/session?session=${Lo}`);if(!n.ok){Hr.textContent="Failed to load bundle (session may be missing or expired).";return}const t=await n.json();if(xr=Array.isArray(t)?t:t.bundle,!Array.isArray(xr)||xr.length===0){Hr.textContent="No bundle found.";return}Hr.innerHTML=xr.map((e,r)=>`<div class='tx'>#${r+1}: <b>${e.address}</b>  ${e.amount} SOL</div>`).join(""),Ai.disabled=!1}catch{Hr.textContent="Failed to load bundle (network/server error)."}}async function al(){if(!window.solana||!window.solana.isPhantom){We.innerHTML='Phantom Wallet not found. <a href="https://phantom.app/download" target="_blank" style="color:#8b5cf6;">Install Phantom</a>';return}Ai.disabled=!0,We.textContent="Sending transactions...";try{await window.solana.connect();const n=new nl("https://api.devnet.solana.com"),t=window.solana.publicKey;let e=[];for(const r of xr){if(!r||!r.address||!r.amount){We.innerHTML='<span style="color:red"> Error: Malformed bundle data (missing address or amount).</span>';return}let s;try{s=new ut(r.address)}catch{We.innerHTML=`<span style='color:red'> Error: Invalid recipient address: ${r.address}</span>`;return}const i=Math.floor(parseFloat(r.amount)*il),o=new ke().add(Er.transfer({fromPubkey:t,toPubkey:s,lamports:i}));o.feePayer=t,o.recentBlockhash=(await n.getLatestBlockhash()).blockhash;const u=await window.solana.signTransaction(o),p=await n.sendRawTransaction(u.serialize());e.push(p)}We.innerHTML=" Sent!<br>"+e.map(r=>`<a href='https://explorer.solana.com/tx/${r}?cluster=devnet' target='_blank'>View ${r}</a>`).join("<br>");try{await fetch("/phantom/send/signed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session:Lo,signatures:e})})}catch{We.innerHTML+="<br> Failed to notify backend of signatures."}}catch(n){We.innerHTML=`<span style='color:red'> Error: ${n.message||n}</span>`}}Ai.addEventListener("click",al);ol();
